The following is a digest of the repository "client".
This digest is designed to be easily parsed by Large Language Models.

--- SUMMARY ---
Repository: client
Files Analyzed: 169
Total Text Size: 298.47 KB
Estimated Tokens (text only): ~74,022

--- DIRECTORY STRUCTURE ---
client/
├── app/
│   ├── (auth)/
│   │   ├── forgot-password/
│   │   │   ├── _components/
│   │   │   │   ├── validation/
│   │   │   │   │   └── schema.js
│   │   │   │   └── ForgotPasswordForm.jsx
│   │   │   ├── layout.js
│   │   │   └── page.js
│   │   ├── reset-password/
│   │   │   ├── _components/
│   │   │   │   ├── validation/
│   │   │   │   │   └── schema.js
│   │   │   │   └── ResetPasswordForm.jsx
│   │   │   ├── layout.js
│   │   │   └── page.js
│   │   ├── signin/
│   │   │   ├── _components/
│   │   │   │   ├── validation/
│   │   │   │   │   └── schema.js
│   │   │   │   ├── SignInForm.jsx
│   │   │   │   └── SignInWrapper.jsx
│   │   │   ├── layout.js
│   │   │   └── page.js
│   │   └── signup/
│   │       ├── _components/
│   │       │   ├── validation/
│   │       │   │   └── schema.js
│   │       │   ├── SignUpForm.jsx
│   │       │   └── SignUpWrapper.jsx
│   │       ├── layout.js
│   │       └── page.js
│   ├── (dashboard)/
│   │   ├── admin/
│   │   │   ├── courses/
│   │   │   │   ├── _components/
│   │   │   │   │   ├── courses/
│   │   │   │   │   │   ├── CoursesDialog.jsx
│   │   │   │   │   │   ├── CoursesHeader.jsx
│   │   │   │   │   │   ├── CoursesTable.jsx
│   │   │   │   │   │   ├── index.js
│   │   │   │   │   │   └── NoCourse.jsx
│   │   │   │   │   ├── skeleton/
│   │   │   │   │   │   ├── CourseFormSkeleton.jsx
│   │   │   │   │   │   ├── CourseSkeleton.jsx
│   │   │   │   │   │   ├── CoursesSkeleton.jsx
│   │   │   │   │   │   └── index.js
│   │   │   │   │   ├── validation/
│   │   │   │   │   │   └── schema.js
│   │   │   │   │   ├── Course.jsx
│   │   │   │   │   ├── CourseForm.jsx
│   │   │   │   │   ├── Courses.jsx
│   │   │   │   │   ├── CoursesWrapper.jsx
│   │   │   │   │   └── index.js
│   │   │   │   ├── [id]/
│   │   │   │   │   ├── edit/
│   │   │   │   │   │   └── page.js
│   │   │   │   │   └── page.js
│   │   │   │   ├── create/
│   │   │   │   │   └── page.js
│   │   │   │   ├── layout.js
│   │   │   │   └── page.js
│   │   │   ├── messages/
│   │   │   │   ├── _components/
│   │   │   │   │   ├── messages/
│   │   │   │   │   │   ├── index.js
│   │   │   │   │   │   ├── MessagesDialog.jsx
│   │   │   │   │   │   ├── MessagesHeader.jsx
│   │   │   │   │   │   ├── MessagesTable.jsx
│   │   │   │   │   │   └── NoMessage.jsx
│   │   │   │   │   ├── skeleton/
│   │   │   │   │   │   ├── index.js
│   │   │   │   │   │   ├── MessageSkeleton.jsx
│   │   │   │   │   │   └── MessagesSkeleton.jsx
│   │   │   │   │   ├── validation/
│   │   │   │   │   │   └── schema.js
│   │   │   │   │   ├── index.js
│   │   │   │   │   ├── Message.jsx
│   │   │   │   │   ├── MessageForm.jsx
│   │   │   │   │   ├── Messages.jsx
│   │   │   │   │   └── MessagesWrapper.jsx
│   │   │   │   ├── [id]/
│   │   │   │   │   └── page.js
│   │   │   │   ├── create/
│   │   │   │   │   └── page.js
│   │   │   │   ├── layout.js
│   │   │   │   └── page.js
│   │   │   ├── projects/
│   │   │   │   ├── _components/
│   │   │   │   │   ├── projects/
│   │   │   │   │   │   ├── index.js
│   │   │   │   │   │   ├── NoProject.jsx
│   │   │   │   │   │   ├── ProjectsDialog.jsx
│   │   │   │   │   │   ├── ProjectsHeader.jsx
│   │   │   │   │   │   └── ProjectsTable.jsx
│   │   │   │   │   ├── skeleton/
│   │   │   │   │   │   ├── index.js
│   │   │   │   │   │   ├── ProjectFormSkeleton.jsx
│   │   │   │   │   │   ├── ProjectSkeleton.jsx
│   │   │   │   │   │   └── ProjectsSkeleton.jsx
│   │   │   │   │   ├── validation/
│   │   │   │   │   │   └── schema.js
│   │   │   │   │   ├── index.js
│   │   │   │   │   ├── Project.jsx
│   │   │   │   │   ├── ProjectForm.jsx
│   │   │   │   │   ├── Projects.jsx
│   │   │   │   │   └── ProjectsWrapper.jsx
│   │   │   │   ├── [id]/
│   │   │   │   │   ├── edit/
│   │   │   │   │   │   └── page.js
│   │   │   │   │   └── page.js
│   │   │   │   ├── create/
│   │   │   │   │   └── page.js
│   │   │   │   ├── layout.js
│   │   │   │   └── page.js
│   │   │   ├── universities/
│   │   │   │   ├── _components/
│   │   │   │   │   ├── skeleton/
│   │   │   │   │   │   ├── index.js
│   │   │   │   │   │   ├── UniversitiesSkeleton.jsx
│   │   │   │   │   │   ├── UniversityFormSkeleton.jsx
│   │   │   │   │   │   └── UniversitySkeleton.jsx
│   │   │   │   │   ├── universities/
│   │   │   │   │   │   ├── index.js
│   │   │   │   │   │   ├── NoUniversity.jsx
│   │   │   │   │   │   ├── UniversitiesDialog.jsx
│   │   │   │   │   │   ├── UniversitiesHeader.jsx
│   │   │   │   │   │   └── UniversitiesTable.jsx
│   │   │   │   │   ├── validation/
│   │   │   │   │   │   └── schema.js
│   │   │   │   │   ├── index.js
│   │   │   │   │   ├── Universities.jsx
│   │   │   │   │   ├── UniversitiesWrapper.jsx
│   │   │   │   │   ├── University.jsx
│   │   │   │   │   └── UniversityForm.jsx
│   │   │   │   ├── [id]/
│   │   │   │   │   ├── edit/
│   │   │   │   │   │   └── page.js
│   │   │   │   │   └── page.js
│   │   │   │   ├── create/
│   │   │   │   │   └── page.js
│   │   │   │   ├── layout.js
│   │   │   │   └── page.js
│   │   │   └── users/
│   │   │       ├── _components/
│   │   │       │   ├── skeletons/
│   │   │       │   │   ├── index.js
│   │   │       │   │   └── UsersSkeleton.jsx
│   │   │       │   ├── users/
│   │   │       │   │   ├── index.js
│   │   │       │   │   ├── UsersDialog.jsx
│   │   │       │   │   ├── UsersHeader.jsx
│   │   │       │   │   └── UsersTable.jsx
│   │   │       │   ├── validation/
│   │   │       │   │   └── schema.js
│   │   │       │   ├── index.js
│   │   │       │   ├── UserForm.jsx
│   │   │       │   ├── Users.jsx
│   │   │       │   └── UsersWrapper.jsx
│   │   │       ├── create/
│   │   │       │   └── page.js
│   │   │       ├── layout.js
│   │   │       └── page.js
│   │   ├── dashboard/
│   │   │   ├── _components/
│   │   │   │   ├── AdminControls.jsx
│   │   │   │   ├── CourseTab.jsx
│   │   │   │   ├── DashboardClient.jsx
│   │   │   │   ├── DashboardHeader.jsx
│   │   │   │   ├── DashboardTabs.jsx
│   │   │   │   ├── MessageTab.jsx
│   │   │   │   ├── ProjectTab.jsx
│   │   │   │   ├── UniversityTab.jsx
│   │   │   │   └── Welcoming.jsx
│   │   │   └── page.js
│   │   └── profile/
│   │       ├── _components/
│   │       │   ├── validation/
│   │       │   │   └── schema.js
│   │       │   └── ProfileClient.jsx
│   │       └── page.js
│   ├── favicon.ico [binary]
│   ├── globals.css
│   ├── layout.js
│   ├── page.js
│   └── providers.js
├── components/
│   ├── auth/
│   │   ├── AdminRoute.jsx
│   │   └── ProtectedRoute.jsx
│   ├── shared/
│   │   └── DatePicker.jsx
│   └── ui/
│       ├── badge.jsx
│       ├── button.jsx
│       ├── calendar.jsx
│       ├── card.jsx
│       ├── dialog.jsx
│       ├── empty.jsx
│       ├── field.jsx
│       ├── input.jsx
│       ├── item.jsx
│       ├── label.jsx
│       ├── popover.jsx
│       ├── select.jsx
│       ├── separator.jsx
│       ├── skeleton.jsx
│       ├── spinner.jsx
│       ├── table.jsx
│       ├── tabs.jsx
│       ├── textarea.jsx
│       └── tooltip.jsx
├── hooks/
│   ├── useAuth.js
│   ├── useCourses.js
│   ├── useMessages.js
│   ├── usePermissions.js
│   ├── useProjects.js
│   ├── useUniversities.js
│   └── useUsers.js
├── requests/
│   ├── auth.js
│   ├── courses.js
│   ├── messages.js
│   ├── projects.js
│   ├── universities.js
│   └── users.js
├── utils/
│   └── formatDate.js
├── components.json
├── jsconfig.json
├── next.config.mjs
├── package.json
└── postcss.config.mjs


--- FILE CONTENTS ---
============================================================
FILE: app/(auth)/forgot-password/_components/validation/schema.js
============================================================
import * as Yup from "yup";

export const schema = Yup.object({
  email: Yup.string()
    .email("Invalid email address")
    .required("Email is required"),
});


============================================================
FILE: app/(auth)/forgot-password/_components/ForgotPasswordForm.jsx
============================================================
"use client";

import { useFormik } from "formik";
import { schema } from "./validation/schema";
import { Button } from "@/components/ui/button";
import { Field, FieldLabel, FieldError } from "@/components/ui/field";
import { Input } from "@/components/ui/input";
import { useForgotPassword } from "@/hooks/useAuth";

export default function ForgotPasswordForm() {
  const { mutateAsync, isPending } = useForgotPassword();
  const { handleSubmit, getFieldProps, errors, touched, isValid } = useFormik({
    initialValues: { email: "" },
    validationSchema: schema,
    onSubmit: async (values) => {
      await mutateAsync(values.email);
    },
  });
  return (
    <form onSubmit={handleSubmit} autoComplete="off" className="space-y-4">
      <Field data-invalid={!!(touched.password && errors.password)}>
        <FieldLabel htmlFor="email">Email</FieldLabel>
        <Input
          id="email"
          type="email"
          placeholder="your.email@example.com"
          disabled={isPending}
          aria-invalid={!!(touched.email && errors.email)}
          {...getFieldProps("email")}
          className={errors.email && touched.email ? "border-red-500" : ""}
        />
        {errors.email && touched.email && (
          <FieldError>{errors.email}</FieldError>
        )}
      </Field>
      <Button
        type="submit"
        disabled={isPending || !isValid}
        className="w-full max-w-md cursor-pointer"
      >
        {isPending ? "Sending..." : "Send Reset Link"}
      </Button>
    </form>
  );
}


============================================================
FILE: app/(auth)/forgot-password/layout.js
============================================================
import Link from "next/link";

export default function ForgotPasswordLayout({ children }) {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gray-50">
      <div className="w-full max-w-lg space-y-4 p-8 bg-white rounded-lg shadow">
        <div className="flex justify-between items-center">
          <Link href="/signin" className="text-blue-500 hover:underline block">
            Sign in
          </Link>
          <Link href="/" className="text-blue-500 hover:underline block">
            Back to home
          </Link>
        </div>
        <div>
          <h2 className="text-3xl font-bold">Forgot Password</h2>
          <p className="mt-2 text-sm text-gray-600">
            Enter your email address and we'll send you a password reset link.
          </p>
        </div>
        {children}
      </div>
    </div>
  );
}


============================================================
FILE: app/(auth)/forgot-password/page.js
============================================================
import ForgotPasswordForm from "./_components/ForgotPasswordForm";

export default function ForgotPasswordPage() {
  return <ForgotPasswordForm />;
}


============================================================
FILE: app/(auth)/reset-password/_components/validation/schema.js
============================================================
import * as Yup from "yup";

export const schema = Yup.object({
  password: Yup.string()
    .min(8, "Must be at least 8 characters")
    .required("Password is required"),
  confirmPassword: Yup.string()
    .oneOf([Yup.ref("password")], "Passwords must match")
    .required("confirm password is required"),
});


============================================================
FILE: app/(auth)/reset-password/_components/ResetPasswordForm.jsx
============================================================
"use client";

import { useSearchParams } from "next/navigation";
import { useFormik } from "formik";
import Link from "next/link";
import { schema } from "./validation/schema";
import { Button } from "@/components/ui/button";
import { Field, FieldLabel, FieldError } from "@/components/ui/field";
import { Input } from "@/components/ui/input";
import { useState } from "react";
import { Eye, EyeOff } from "lucide-react";
import { useResetPassword } from "@/hooks/useAuth";

export default function ResetPasswordForm() {
  const searchParams = useSearchParams();
  const token = searchParams.get("token");
  const [showPassword, setShowPassword] = useState({
    new: false,
    confirm: false,
  });
  const { mutateAsync, isPending } = useResetPassword();
  const { handleSubmit, getFieldProps, errors, touched, isValid } = useFormik({
    initialValues: { password: "", confirmPassword: "" },
    validationSchema: schema,
    onSubmit: async (values) => {
      if (!token) return;
      const { confirmPassword, password } = values;
      await mutateAsync({ password, token });
    },
  });
  const togglePassword = (key) =>
    setShowPassword((prev) => ({ ...prev, [key]: !prev[key] }));
  if (!token) {
    return (
      <div className="text-center text-sm space-y-2">
        <div className="bg-red-50 text-red-600 p-3 rounded mb-4">
          Invalid or expired reset link. Please request a new one.
        </div>
        <Button>
          <Link href="/forgot-password">Request new reset link</Link>
        </Button>
      </div>
    );
  }
  return (
    <form onSubmit={handleSubmit} autoComplete="off" className="space-y-4">
      <Field data-invalid={!!(touched.password && errors.password)}>
        <FieldLabel htmlFor="password">New password</FieldLabel>
        <div className="relative">
          <Input
            id="password"
            type={showPassword.new ? "text" : "password"}
            placeholder="new password"
            disabled={isPending}
            aria-invalid={!!(touched.password && errors.password)}
            {...getFieldProps("password")}
          />
          <button
            type="button"
            onClick={() => togglePassword("new")}
            className="absolute right-0 inset-y-0 px-3 flex items-center text-gray-500 rounded-md cursor-pointer"
          >
            {showPassword.new ? (
              <EyeOff className="w-4 h-4" />
            ) : (
              <Eye className="w-4 h-4" />
            )}
          </button>
        </div>
        {errors.password && touched.password && (
          <FieldError>{errors.password}</FieldError>
        )}
      </Field>
      <Field
        data-invalid={!!(touched.confirmPassword && errors.confirmPassword)}
      >
        <FieldLabel htmlFor="confirmPassword">Confirm Password</FieldLabel>
        <div className="relative">
          <Input
            id="confirmPassword"
            type={showPassword.confirm ? "text" : "password"}
            placeholder="confirm new password"
            disabled={isPending}
            aria-invalid={!!(touched.confirmPassword && errors.confirmPassword)}
            {...getFieldProps("confirmPassword")}
          />
          <button
            type="button"
            onClick={() => togglePassword("confirm")}
            className="absolute right-0 inset-y-0 px-3 flex items-center text-gray-500 rounded-md cursor-pointer"
          >
            {showPassword.confirm ? (
              <EyeOff className="w-4 h-4" />
            ) : (
              <Eye className="w-4 h-4" />
            )}
          </button>
        </div>
        {errors.confirmPassword && touched.confirmPassword && (
          <FieldError>{errors.confirmPassword}</FieldError>
        )}
      </Field>
      <Button
        type="submit"
        disabled={isPending || !isValid}
        className="w-full max-w-md cursor-pointer"
      >
        {isPending ? "Resetting..." : "Reset Password"}
      </Button>
    </form>
  );
}


============================================================
FILE: app/(auth)/reset-password/layout.js
============================================================
import Link from "next/link";

export default function ResetPasswordLayout({ children }) {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gray-50">
      <div className="w-full max-w-lg space-y-4 p-8 bg-white rounded-lg shadow">
        <div className="flex justify-between items-center">
          <Link href="/signin" className="text-blue-500 hover:underline block">
            Sign in
          </Link>
          <Link href="/" className="text-blue-500 hover:underline block">
            Back to home
          </Link>
        </div>
        <div>
          <h2 className="text-3xl font-bold">Reset Password</h2>
          <p className="mt-2 text-sm text-gray-600">
            Enter your new password below.
          </p>
        </div>
        {children}
      </div>
    </div>
  );
}


============================================================
FILE: app/(auth)/reset-password/page.js
============================================================
import ResetPasswordForm from "./_components/ResetPasswordForm";

export default function ResetPasswordPage() {
  return <ResetPasswordForm />;
}


============================================================
FILE: app/(auth)/signin/_components/validation/schema.js
============================================================
import * as Yup from "yup";

export const schema = Yup.object({
  email: Yup.string()
    .email("Invalid email address")
    .required("Email is required"),
  password: Yup.string().required("Password is required"),
});


============================================================
FILE: app/(auth)/signin/_components/SignInForm.jsx
============================================================
"use client";

import { Field, FieldLabel, FieldError } from "@/components/ui/field";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { schema } from "./validation/schema";
import { useFormik } from "formik";
import Link from "next/link";
import { useState } from "react";
import { Eye, EyeOff } from "lucide-react";
import { useSignIn } from "@/hooks/useAuth";

export default function SignInForm() {
  const [showPassword, setShowPassword] = useState(false);
  const { mutate, isPending } = useSignIn();
  const { handleSubmit, getFieldProps, errors, touched, isValid } = useFormik({
    initialValues: { email: "", password: "" },
    validationSchema: schema,
    onSubmit: (values) => mutate(values),
  });
  return (
    <form onSubmit={handleSubmit} autoComplete="off" className="space-y-6">
      <Field data-invalid={!!(touched.email && errors.email)}>
        <FieldLabel htmlFor="email">Email</FieldLabel>
        <Input
          id="email"
          type="email"
          placeholder="email address"
          disabled={isPending}
          aria-invalid={!!(touched.email && errors.email)}
          {...getFieldProps("email")}
        />
        {touched.email && errors.email && (
          <FieldError>{errors.email}</FieldError>
        )}
      </Field>
      <Field data-invalid={!!(touched.password && errors.password)}>
        <div className="flex justify-between items-center">
          <FieldLabel htmlFor="password">Password</FieldLabel>
          <Link
            href="/forgot-password"
            className="text-sm text-blue-600 hover:underline"
          >
            Forgot password?
          </Link>
        </div>
        <div className="relative">
          <Input
            id="password"
            type={showPassword ? "text" : "password"}
            placeholder="password"
            disabled={isPending}
            aria-invalid={!!(touched.password && errors.password)}
            {...getFieldProps("password")}
          />
          <button
            type="button"
            onClick={() => setShowPassword(!showPassword)}
            className="absolute right-0 inset-y-0 px-3 flex items-center text-gray-500 rounded-md cursor-pointer"
          >
            {showPassword ? (
              <EyeOff className="w-4 h-4" />
            ) : (
              <Eye className="w-4 h-4" />
            )}
          </button>
        </div>
        {touched.password && errors.password && (
          <FieldError>{errors.password}</FieldError>
        )}
      </Field>
      <Button
        type="submit"
        disabled={isPending || !isValid}
        className="w-full max-w-md cursor-pointer"
      >
        {isPending ? "Signing in..." : "Sign In"}
      </Button>
    </form>
  );
}


============================================================
FILE: app/(auth)/signin/_components/SignInWrapper.jsx
============================================================
"use client";

import { Spinner } from "@/components/ui/spinner";
import { authClient } from "@/lib/auth-client";
import { useRouter } from "next/navigation";
import { useEffect } from "react";
import Link from "next/link";

export default function SignInWrapper({ children }) {
  const router = useRouter();
  const { data: session, isPending } = authClient.useSession();
  useEffect(() => {
    if (!isPending && session) {
      router.push("/dashboard");
    }
  }, [session, isPending, router]);
  if (isPending) {
    return <Spinner />;
  }
  if (session) return null;
  return (
    <div className="min-h-screen flex items-center justify-center bg-gray-50">
      <div className="w-full max-w-lg space-y-4 p-8 bg-white rounded-lg shadow">
        <p className="pt-4">
          <Link href="/" className="text-blue-500 hover:underline">
            Back to home
          </Link>
        </p>
        <div>
          <h2 className="text-4xl font-bold">Sign In</h2>
          <p className="mt-2 text-sm text-gray-600">
            Welcome back! Please sign in to your account.
          </p>
        </div>
        {children}
        <p className="text-sm">
          Don't have an account?{" "}
          <Link href="/signup" className="text-blue-600 hover:underline">
            Register
          </Link>
        </p>
      </div>
    </div>
  );
}


============================================================
FILE: app/(auth)/signin/layout.js
============================================================
import SignInWrapper from "./_components/SignInWrapper";

export const metadata = {
  title: "Better Auth App",
  description: "Full-stack authentication with Better Auth",
};

export default function SignInLayout({ children }) {
  return <SignInWrapper>{children}</SignInWrapper>;
}


============================================================
FILE: app/(auth)/signin/page.js
============================================================
import SignInForm from "./_components/SignInForm";

export default function SignInPage() {
  return <SignInForm />;
}


============================================================
FILE: app/(auth)/signup/_components/validation/schema.js
============================================================
import * as Yup from "yup";

export const schema = Yup.object({
  name: Yup.string()
    .min(2, "Name must be at least 2 characters")
    .required("Name is required"),
  email: Yup.string()
    .email("Invalid email address")
    .required("Email is required"),
  password: Yup.string()
    .min(8, "Password must be at least 8 characters")
    .required("Password is required"),
  confirmPassword: Yup.string()
    .oneOf([Yup.ref("password")], "Passwords must match")
    .required("Confirm password is required"),
});


============================================================
FILE: app/(auth)/signup/_components/SignUpForm.jsx
============================================================
"use client";

import { useFormik } from "formik";
import { schema } from "./validation/schema";
import { Button } from "@/components/ui/button";
import { Field, FieldLabel, FieldError } from "@/components/ui/field";
import { Input } from "@/components/ui/input";
import { useState } from "react";
import { Eye, EyeOff } from "lucide-react";
import { useSignUp } from "@/hooks/useAuth";

export default function SignUpForm() {
  const [showPassword, setShowPassword] = useState({
    password: false,
    confirm: false,
  });
  const { mutateAsync, isPending } = useSignUp();
  const { handleSubmit, getFieldProps, errors, touched, isValid } = useFormik({
    initialValues: {
      name: "",
      email: "",
      password: "",
      confirmPassword: "",
    },
    validationSchema: schema,
    onSubmit: async (values) => {
      const { confirmPassword, ...data } = values;
      await mutateAsync(data);
    },
  });
  const togglePassword = (key) =>
    setShowPassword((prev) => ({ ...prev, [key]: !prev[key] }));
  return (
    <form onSubmit={handleSubmit} autoComplete="off" className="space-y-4">
      <Field data-invalid={!!(touched.name && errors.name)}>
        <FieldLabel htmlFor="name">Full Name</FieldLabel>
        <Input
          id="name"
          type="text"
          placeholder="your full name"
          disabled={isPending}
          aria-invalid={!!(touched.name && errors.name)}
          {...getFieldProps("name")}
        />
        {touched.name && errors.name && <FieldError>{errors.name}</FieldError>}
      </Field>
      <Field data-invalid={!!(touched.email && errors.email)}>
        <FieldLabel htmlFor="email">Email</FieldLabel>
        <Input
          id="email"
          type="email"
          placeholder="email address"
          disabled={isPending}
          aria-invalid={!!(touched.email && errors.email)}
          {...getFieldProps("email")}
        />
        {touched.email && errors.email && (
          <FieldError>{errors.email}</FieldError>
        )}
      </Field>
      <Field data-invalid={!!(touched.password && errors.password)}>
        <FieldLabel htmlFor="password">Password</FieldLabel>
        <div className="relative">
          <Input
            id="password"
            type={showPassword.password ? "text" : "password"}
            placeholder="password"
            disabled={isPending}
            aria-invalid={!!(touched.password && errors.password)}
            {...getFieldProps("password")}
          />
          <button
            type="button"
            onClick={() => togglePassword("password")}
            className="absolute right-0 inset-y-0 px-3 flex items-center text-gray-500 rounded-md cursor-pointer"
          >
            {showPassword.password ? (
              <EyeOff className="w-4 h-4" />
            ) : (
              <Eye className="w-4 h-4" />
            )}
          </button>
        </div>
        {touched.password && errors.password && (
          <FieldError>{errors.password}</FieldError>
        )}
      </Field>
      <Field
        data-invalid={!!(touched.confirmPassword && errors.confirmPassword)}
      >
        <FieldLabel htmlFor="confirmPassword">Confirm password</FieldLabel>
        <div className="relative">
          <Input
            id="confirmPassword"
            type={showPassword.confirm ? "text" : "password"}
            placeholder="confirm password"
            disabled={isPending}
            aria-invalid={!!(touched.confirmPassword && errors.confirmPassword)}
            {...getFieldProps("confirmPassword")}
          />
          <button
            type="button"
            onClick={() => togglePassword("confirm")}
            className="absolute right-0 inset-y-0 px-3 flex items-center text-gray-500 rounded-md cursor-pointer"
          >
            {showPassword.confirm ? (
              <EyeOff className="w-4 h-4" />
            ) : (
              <Eye className="w-4 h-4" />
            )}
          </button>
        </div>
        {touched.confirmPassword && errors.confirmPassword && (
          <FieldError>{errors.confirmPassword}</FieldError>
        )}
      </Field>
      <Button
        type="submit"
        disabled={isPending || !isValid}
        className="w-full max-w-md cursor-pointer"
      >
        {isPending ? "Creating account..." : "Sign Up"}
      </Button>
    </form>
  );
}


============================================================
FILE: app/(auth)/signup/_components/SignUpWrapper.jsx
============================================================
"use client";

import { Spinner } from "@/components/ui/spinner";
import { authClient } from "@/lib/auth-client";
import { useEffect } from "react";
import Link from "next/link";
import { useRouter } from "next/navigation";

export default function SignUpWrapper({ children }) {
  const router = useRouter();
  const { data: session, isPending } = authClient.useSession();
  useEffect(() => {
    if (!isPending && session) {
      router.push("/dashboard");
    }
  }, [session, isPending, router]);
  if (isPending) {
    return <Spinner />;
  }
  if (session) return null;
  return (
    <main className="min-h-screen flex items-center justify-center bg-gray-50">
      <div className="w-full max-w-lg space-y-4 p-8 bg-white rounded-lg shadow">
        <p className="pb-2">
          <Link href="/" className="text-blue-500 hover:underline">
            Back to Home
          </Link>
        </p>
        <div>
          <h2 className="text-3xl font-bold">Create Account</h2>
          <p className="mt-2 text-sm text-gray-600">
            Join us today! Create your account to get started.
          </p>
        </div>
        {children}
        <p className="text-sm ">
          Already have an account?{" "}
          <Link href="/signin" className="text-blue-600 hover:underline">
            Sign in
          </Link>
        </p>
      </div>
    </main>
  );
}


============================================================
FILE: app/(auth)/signup/layout.js
============================================================
import SignUpWrapper from "./_components/SignUpWrapper";

export const metadata = {
  title: "Better Auth App",
  description: "Full-stack authentication with Better Auth",
};

export default function SignUpLayout({ children }) {
  return <SignUpWrapper>{children}</SignUpWrapper>;
}


============================================================
FILE: app/(auth)/signup/page.js
============================================================
import SignUpForm from "./_components/SignUpForm";

export default function SignUpPage() {
  return <SignUpForm />;
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/courses/CoursesDialog.jsx
============================================================
"use client";

import { Button } from "@/components/ui/button";
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
} from "@/components/ui/dialog";
import { useDeleteCourse } from "@/hooks/useCourses";

export default function CoursesDialog({ dialog, setDialog }) {
  const { mutate, isPending } = useDeleteCourse();
  const handleCancelDialog = () => {
    setDialog({ open: false, course: null });
  };
  const handleConfirmDialog = () => {
    if (dialog.course?._id) {
      mutate(dialog.course._id, {
        onSuccess: () => setDialog({ open: false, course: null }),
      });
    }
  };
  return (
    <Dialog
      open={dialog.open}
      onOpenChange={(open) => setDialog((prev) => ({ ...prev, open }))}
    >
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Delete Course</DialogTitle>
          <DialogDescription>
            Are you sure you want to permanently delete{" "}
            <span className="font-semibold">{dialog.course?.title}</span>? This
            action cannot be undone.
          </DialogDescription>
        </DialogHeader>
        <DialogFooter>
          <Button
            variant="outline"
            className="cursor-pointer"
            onClick={handleCancelDialog}
            disabled={isPending}
          >
            Cancel
          </Button>
          <Button
            variant="destructive"
            className="cursor-pointer"
            onClick={handleConfirmDialog}
            disabled={isPending}
          >
            {isPending ? "Deleting..." : "Confirm"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/courses/CoursesHeader.jsx
============================================================
import { Button } from "@/components/ui/button";
import Link from "next/link";

export default function CoursesHeader() {
  return (
    <div className="flex justify-between items-center mb-6">
      <h2 className="text-xl font-semibold">Courses</h2>
      <Button asChild>
        <Link href="courses/create">Add Course</Link>
      </Button>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/courses/CoursesTable.jsx
============================================================
"use client";

import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { useDeleteCourse } from "@/hooks/useCourses";
import { usePermissions } from "@/hooks/usePermissions";
import { Pencil, ScanText, Trash2 } from "lucide-react";
import Link from "next/link";

export default function CoursesTable({ courses, setDialog }) {
  const { permissions } = usePermissions();
  const { isPending } = useDeleteCourse();
  const handleOpenDialog = (course) => {
    setDialog({ open: true, course });
  };
  if (courses.length === 0) {
    return (
      <Card className="w-full max-w-3xl mx-auto">
        <CardHeader className="text-center gap-6">
          <CardTitle className="text-2xl">No Courses Found</CardTitle>
          <CardDescription>
            Click on "Add Course" to create a new one.
          </CardDescription>
        </CardHeader>
      </Card>
    );
  }
  return (
    <Table>
      <TableHeader>
        <TableRow className="bg-slate-100">
          {[
            "University Id",
            "Title",
            "Provider",
            "Skills",
            "Credentials",
            "Actions",
          ].map((col) => (
            <TableHead key={col} className="font-bold pointer-events-none">
              {col}
            </TableHead>
          ))}
        </TableRow>
      </TableHeader>
      <TableBody>
        {courses.map(({ _id, title, by, skills, credential }) => (
          <TableRow key={_id}>
            <TableCell>{_id}</TableCell>
            <TableCell>{title}</TableCell>
            <TableCell>{by}</TableCell>
            <TableCell className="max-w-[300px]">
              <div className="flex flex-wrap gap-1">
                {skills.map((skill) => (
                  <Badge key={skill} variant="secondary">
                    {skill}
                  </Badge>
                ))}
              </div>
            </TableCell>
            <TableCell>
              <a
                href={credential}
                target="_blank"
                rel="noopener noreferrer"
                className="text-blue-600 hover:underline text-sm"
              >
                View credential
              </a>
            </TableCell>
            <TableCell className="space-x-2">
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button variant="outline" size="icon" asChild>
                    <Link
                      href={`courses/${_id}`}
                      className="text-gray-600 hover:text-gray-800"
                    >
                      <ScanText />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>View the course ({title})</p>
                </TooltipContent>
              </Tooltip>
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button variant="outline" size="icon" asChild>
                    <Link
                      href={`courses/${_id}/edit`}
                      className="text-blue-500 hover:text-blue-700"
                    >
                      <Pencil />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Edit the course ({title})</p>
                </TooltipContent>
              </Tooltip>
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="outline"
                    size="icon"
                    className="cursor-pointer text-red-500 hover:text-red-700"
                    onClick={() => handleOpenDialog({ _id, title })}
                    disabled={!permissions.canDeleteCourse || isPending}
                  >
                    <Trash2 />
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Delete the course ({title})</p>
                </TooltipContent>
              </Tooltip>
            </TableCell>
          </TableRow>
        ))}
      </TableBody>
    </Table>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/courses/index.js
============================================================
import CoursesHeader from "./CoursesHeader";
import CoursesDialog from "./CoursesDialog";
import CoursesTable from "./CoursesTable";
import NoCourse from "./NoCourse";

export { CoursesHeader, CoursesTable, CoursesDialog, NoCourse };


============================================================
FILE: app/(dashboard)/admin/courses/_components/courses/NoCourse.jsx
============================================================
import {
  Card,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";

export default function NoCourse({ msg = "" }) {
  return (
    <Card className="w-full max-w-3xl mx-auto">
      <CardHeader className="text-center gap-6">
        <CardTitle className="text-2xl">Course not found</CardTitle>
        <CardDescription>
          {msg || "The requested course could not be found."}
        </CardDescription>
      </CardHeader>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/skeleton/CourseFormSkeleton.jsx
============================================================
import { Skeleton } from "@/components/ui/skeleton";

export default function CourseFormSkeleton() {
  return (
    <div className="p-6 max-w-3xl mx-auto rounded-xl border bg-white shadow-sm space-y-4 animate-pulse">
      <Skeleton className="h-8 w-1/3 rounded bg-neutral-200" />
      {[...Array(7)].map((_, i) => (
        <div key={i} className="space-y-2">
          <Skeleton className="h-6 w-1/4 rounded bg-neutral-200" />
          <Skeleton className="h-10 w-full rounded" />
        </div>
      ))}
      <Skeleton className="h-px my-3 w-full" />
      <div dir="rtl" className="border-t pt-6 space-y-4">
        <Skeleton className="h-8 w-1/3 self-end rounded bg-neutral-200" />
        {[...Array(3)].map((_, i) => (
          <div key={i} className="space-y-2">
            <Skeleton className="h-6 w-1/4 rounded bg-neutral-200" />
            <Skeleton className="h-10 w-full rounded" />
          </div>
        ))}
      </div>
      <div className="w-full max-w-md mx-auto grid grid-cols-2 gap-3 pt-4">
        <Skeleton className="h-10 rounded-md bg-neutral-200" />
        <Skeleton className="h-10 rounded-md" />
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/skeleton/CourseSkeleton.jsx
============================================================
import { Card, CardHeader, CardContent } from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import { Skeleton } from "@/components/ui/skeleton";

export default function CourseSkeleton() {
  return (
    <Card className="w-full max-w-3xl mx-auto">
      <CardHeader className="flex gap-4 items-center">
        <div className="w-16 h-16 p-0.5 rounded-full overflow-hidden border shadow flex items-center justify-center">
          <Skeleton className="w-full h-full rounded-full bg-gray-200" />
        </div>
        <div className="space-y-2 flex-1">
          <Skeleton className="h-6 w-48 bg-gray-200" />
          <Skeleton className="h-4 w-32" />
        </div>
      </CardHeader>
      <CardContent className="space-y-6 text-muted-foreground">
        <div className="leading-relaxed space-y-3">
          <Skeleton className="h-4 w-full" />
          <Skeleton className="h-4 w-5/6" />
          <Skeleton className="h-4 w-4/6" />
          <Skeleton className="h-4 w-1/2" />
          <Skeleton className="h-5 w-32 mt-3 bg-gray-200" />
        </div>
        <Separator className="my-6" />
        <Skeleton className="h-5 w-1/4 bg-gray-200" />
        <div className="space-y-3" dir="rtl">
          <Skeleton className="h-4 w-full" />
          <Skeleton className="h-4 w-5/6" />
          <Skeleton className="h-4 w-2/3" />
        </div>
      </CardContent>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/skeleton/CoursesSkeleton.jsx
============================================================
import { Skeleton } from "@/components/ui/skeleton";

export default function CoursesSkeleton() {
  return (
    <>
      <div className="flex justify-between items-center mb-6">
        <Skeleton className="h-7 w-24 rounded-md" />
        <Skeleton className="h-9 w-24 rounded-md bg-neutral-200" />
      </div>
      <div className="grid gap-4">
        <div className="flex justify-between items-center rounded-lg">
          {Array.from({ length: 6 }).map((_, i) => (
            <Skeleton
              key={i}
              className="h-[30px] w-[120px] bg-neutral-200 rounded-full"
            />
          ))}
        </div>
        {Array.from({ length: 3 }).map((_, rowIndex) => (
          <div
            key={rowIndex}
            className="flex justify-between items-center gap-4 border-b py-2"
          >
            {Array.from({ length: 6 }).map((_, cellIndex) => (
              <Skeleton
                key={cellIndex}
                className="h-[25px] w-[120px] rounded-full"
              />
            ))}
          </div>
        ))}
      </div>
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/skeleton/index.js
============================================================
import CoursesSkeleton from "./CoursesSkeleton";
import CourseSkeleton from "./CourseSkeleton";
import CourseFormSkeleton from "./CourseFormSkeleton";

export { CoursesSkeleton, CourseSkeleton, CourseFormSkeleton };


============================================================
FILE: app/(dashboard)/admin/courses/_components/validation/schema.js
============================================================
import * as Yup from "yup";

export const schema = Yup.object().shape({
  logo: Yup.string()
    .url("Logo must be a valid URI")
    .required("Logo is required"),
  title: Yup.string()
    .min(2, "Title length must be at least 2 characters long")
    .max(200, "Title length must be less than or equal to 200 characters long")
    .required("Title is required"),
  by: Yup.string()
    .min(2, "Provider length must be at least 2 characters long")
    .max(
      200,
      "Provider length must be less than or equal to 200 characters long"
    )
    .required("Provider is required"),
  skills: Yup.array()
    .of(
      Yup.string()
        .min(1, "Each skill must have at least 1 character")
        .required("Skill cannot be empty")
    )
    .min(1, "Skills must contain at least 1 item")
    .required("Skills are required"),
  earnedAt: Yup.date()
    .typeError("Earned at must be a valid date")
    .required("Earned at is required"),
  grade: Yup.string()
    .min(1, "Grade length must be at least 1 character long")
    .max(100, "Grade length must be less than or equal to 100 characters long")
    .required("Grade is required"),
  credential: Yup.string()
    .url("Credential link must be a valid URI")
    .required("Credential link is required"),
  translations: Yup.object()
    .shape({
      ar: Yup.object()
        .shape({
          title: Yup.string()
            .min(2, "عنوان الدورة باللغة العربية يجب أن لا يقل عن حرفين")
            .max(200, "عنوان الدورة باللغة العربية يجب أن لا يتجاوز 200 حرف")
            .optional()
            .nullable(),
          by: Yup.string()
            .min(2, "اسم الجهة المانحة بالعربية يجب أن لا يقل عن حرفين")
            .max(200, "اسم الجهة المانحة بالعربية يجب أن لا يتجاوز 200 حرف")
            .optional()
            .nullable(),
          skills: Yup.array()
            .of(Yup.string().optional())
            .optional()
            .nullable()
            .typeError("المهارات باللغة العربية يجب أن تكون قائمة من النصوص"),
        })
        .optional(),
    })
    .optional(),
});


============================================================
FILE: app/(dashboard)/admin/courses/_components/Course.jsx
============================================================
"use client";

import Image from "next/image";
import Link from "next/link";
import {
  Card,
  CardContent,
  CardHeader,
  CardTitle,
  CardDescription,
} from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import { formatDate } from "@/utils/formatDate";
import { NoCourse } from "./courses";
import { CourseSkeleton } from "./skeleton";
import { useCourse } from "@/hooks/useCourses";
import { Button } from "@/components/ui/button";

export default function Course({ courseId }) {
  const { data: course, isLoading } = useCourse(courseId);
  if (isLoading) return <CourseSkeleton />;
  if (!course) return <NoCourse />;
  const {
    logo,
    title,
    by,
    skills,
    earnedAt,
    grade,
    credential,
    translations: {
      ar: { title: arTitle, by: arBy, skills: arSkills },
    },
  } = course;
  return (
    <Card className="w-full max-w-3xl mx-auto">
      <CardHeader className="flex gap-4">
        <div className="w-16 h-16 relative rounded-full overflow-hidden border shadow">
          <Image
            src={logo}
            alt={`${title} logo`}
            fill
            unoptimized
            className="object-contain p-0.5 rounded-full"
          />
        </div>
        <div>
          <CardTitle className="text-3xl font-bold">{title}</CardTitle>
          <CardDescription className="text-base text-muted-foreground">
            {by}
          </CardDescription>
        </div>
      </CardHeader>
      <CardContent className="space-y-6 text-muted-foreground">
        <div className="leading-relaxed space-y-2">
          {grade ? (
            <>
              <p>
                This learner has successfully completed this course{" "}
                <span className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                  {by}
                </span>
                {earnedAt && (
                  <>
                    {" "}
                    on{" "}
                    <time className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                      {formatDate(earnedAt)}
                    </time>
                    .
                  </>
                )}
              </p>
              <p>
                They achieved a grade of{" "}
                <span className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                  {grade}
                </span>
                .
              </p>
              {skills?.length > 0 && (
                <p>
                  During the course, they developed skills in{" "}
                  <span className="font-medium text-foreground">
                    {skills.join(", ")}
                  </span>
                  .
                </p>
              )}
            </>
          ) : (
            <p>This learner is currently enrolled in this course at {by}.</p>
          )}

          {credential && (
            <Button
              variant="link"
              className="px-0 hover:text-blue-600 cursor-pointer"
              asChild
            >
              <a href={credential} target="_blank" rel="noopener noreferrer">
                View Credential
              </a>
            </Button>
          )}
        </div>
        {(arTitle || arBy || arSkills.length > 0) && (
          <>
            <Separator className="my-6" />
            <h3 className="text-xl text-foreground font-semibold mb-4">
              Arabic Translations
            </h3>
            <div dir="rtl" className="space-y-3 leading-relaxed text-right">
              {arTitle && (
                <h4 className="text-2xl font-bold text-foreground mt-4">
                  {arTitle}
                </h4>
              )}
              {grade ? (
                <>
                  <p>
                    أكمل هذا المتعلم بنجاح دورة{" "}
                    <span className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                      {arBy || by}
                    </span>
                    {earnedAt && (
                      <>
                        {" "}
                        بتاريخ{" "}
                        <date className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                          {formatDate(earnedAt)}
                        </date>
                        .
                      </>
                    )}
                  </p>
                  <p>
                    وحصل على درجة{" "}
                    <span className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                      {grade}
                    </span>
                    .
                  </p>
                  {arSkills.length > 0 && (
                    <p>
                      وخلال هذه الدورة، طوّر مهارات في{" "}
                      <span className="font-medium text-foreground">
                        {arSkills.join("، ")}
                      </span>
                      .
                    </p>
                  )}
                </>
              ) : (
                <p>هذا المتعلم مسجّل حالياً في دورة {arBy || by}.</p>
              )}
            </div>
          </>
        )}
      </CardContent>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/CourseForm.jsx
============================================================
"use client";

import { useEffect, useState } from "react";
import { useRouter } from "next/navigation";
import { useFormik } from "formik";
import Link from "next/link";
import { schema } from "./validation/schema";
import { CourseFormSkeleton } from "./skeleton";
import { NoCourse } from "./courses";
import { useCourse, useUpsertCourse } from "@/hooks/useCourses";
import { DateInput } from "@/components/shared/DatePicker";
import {
  Field,
  FieldError,
  FieldGroup,
  FieldLabel,
  FieldLegend,
  FieldSet,
} from "@/components/ui/field";
import { Input } from "@/components/ui/input";
import { X } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";

const initialCourse = {
  logo: "",
  title: "",
  by: "",
  skills: [],
  earnedAt: "",
  grade: "",
  credential: "",
  translations: {
    ar: {
      title: "",
      by: "",
      skills: [],
    },
  },
};
export default function CourseForm({ mode, courseId }) {
  const router = useRouter();
  const [skillInput, setSkillInput] = useState("");
  const [arSkillInput, setArSkillInput] = useState("");
  const [initialValues, setInitialValues] = useState(initialCourse);
  const { data: course, isLoading, isError, error } = useCourse(courseId);
  const { mutate, isPending } = useUpsertCourse(mode);
  useEffect(() => {
    if (mode === "edit" && course) {
      setInitialValues(course);
    } else if (mode === "create") {
      setInitialValues(initialCourse);
    }
  }, [course, mode]);
  const {
    handleSubmit,
    getFieldProps,
    setFieldValue,
    handleBlur,
    values,
    touched,
    errors,
    isValid,
    dirty,
  } = useFormik({
    enableReinitialize: true,
    initialValues,
    validationSchema: schema,
    onSubmit: (values) => {
      if (mode === "edit") {
        const { _id, updatedAt, createdAt, __v, ...data } = values;
        mutate(
          { id: courseId, data },
          { onSuccess: () => router.push("/admin/courses") }
        );
      } else {
        mutate(values, { onSuccess: () => router.push("/admin/courses") });
      }
    },
  });
  const handleSkillsKeyDown = (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      const skill = skillInput.trim();
      if (skill && !values.skills.includes(skill)) {
        setFieldValue("skills", [...values.skills, skill]);
        setSkillInput("");
      }
    }
  };
  const removeSkill = (indexToRemove) => {
    const newSkills = values.skills.filter(
      (_, index) => index !== indexToRemove
    );
    setFieldValue("skills", newSkills);
  };
  const handleArSkillsKeyDown = (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      const skill = arSkillInput.trim();
      if (skill && !values.translations.ar.skills.includes(skill)) {
        setFieldValue("translations.ar.skills", [
          ...values.translations.ar.skills,
          skill,
        ]);
        setArSkillInput("");
      }
    }
  };
  const removeArSkill = (indexToRemove) => {
    const newSkills = values.translations.ar.skills.filter(
      (_, index) => index !== indexToRemove
    );
    setFieldValue("translations.ar.skills", newSkills);
  };
  if (isLoading) return <CourseFormSkeleton />;
  if (isError) return <NoCourse msg={error.message} />;
  return (
    <form
      onSubmit={handleSubmit}
      noValidate
      className="p-6 space-y-6 outline shadow-md rounded-lg bg-white"
    >
      <FieldSet>
        <FieldGroup>
          <FieldLegend>
            {mode === "edit" ? "Update" : "Create a New"} Course
          </FieldLegend>
          <Field data-invalid={!!(errors.logo && touched.logo)}>
            <FieldLabel htmlFor="logo">
              Logo URL <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="url"
              id="logo"
              placeholder="type logo URL here"
              aria-invalid={!!(errors.logo && touched.logo)}
              {...getFieldProps("logo")}
            />
            {errors.logo && touched.logo && (
              <FieldError>{errors.logo}</FieldError>
            )}
          </Field>
          <Field data-invalid={!!(errors.title && touched.title)}>
            <FieldLabel htmlFor="title">
              Title <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="text"
              id="title"
              placeholder="type title here"
              aria-invalid={!!(errors.title && touched.title)}
              {...getFieldProps("title")}
            />
            {errors.title && touched.title && (
              <FieldError>{errors.title}</FieldError>
            )}
          </Field>
          <Field data-invalid={!!(errors.by && touched.by)}>
            <FieldLabel htmlFor="by">
              Provider <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="text"
              id="by"
              placeholder="type provider here"
              aria-invalid={!!(errors.by && touched.by)}
              {...getFieldProps("by")}
            />
            {errors.by && touched.by && <FieldError>{errors.by}</FieldError>}
          </Field>
          <Field data-invalid={!!(errors.skills && touched.skills)}>
            <FieldLabel htmlFor="skills">
              Skills <span className="text-red-500"> *</span>
            </FieldLabel>
            <div className="flex gap-1.5 flex-wrap">
              {values.skills?.map((skill, index) => (
                <Badge key={skill} className="ps-3 pe-1 py-1 gap-1">
                  <span>{skill}</span>
                  <Button
                    type="button"
                    onClick={() => removeSkill(index)}
                    disabled={
                      values.status === "in-progress" || values.status === ""
                    }
                    className="w-6 h-6 rounded-full hover:text-neutral-900 hover:bg-neutral-100 cursor-pointer"
                    aria-label={`Remove ${skill}`}
                  >
                    <X className="w-1 h-1" />
                  </Button>
                </Badge>
              ))}
              <Input
                type="text"
                id="skills"
                name="skills"
                value={skillInput}
                className="flex-1 min-w-[200px]"
                onBlur={handleBlur}
                onChange={(e) => setSkillInput(e.target.value)}
                onKeyDown={(e) => handleSkillsKeyDown(e)}
                aria-invalid={!!(errors.skills && touched.skills)}
                placeholder="type a tool and press Enter"
              />
            </div>
            {touched.skills && errors.skills && (
              <FieldError>{errors.skills}</FieldError>
            )}
          </Field>
          <DateInput
            name="earnedAt"
            label="Earned At"
            setFieldValue={setFieldValue}
            values={values}
            touched={touched}
            errors={errors}
          />
          <Field data-invalid={!!(errors.grade && touched.grade)}>
            <FieldLabel htmlFor="grade">
              Grade
              <span className="text-red-500"> *</span>
            </FieldLabel>
            <Input
              type="text"
              id="grade"
              placeholder="type grade here"
              aria-invalid={!!(errors.grade && touched.grade)}
              {...getFieldProps("grade")}
            />
            {errors.grade && touched.grade && (
              <FieldError>{errors.grade}</FieldError>
            )}
          </Field>
          <Field data-invalid={!!(errors.credential && touched.credential)}>
            <FieldLabel htmlFor="credential">
              Credential URL <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="url"
              id="credential"
              placeholder="type credential URL here"
              aria-invalid={!!(errors.credential && touched.credential)}
              {...getFieldProps("credential")}
            />
            {errors.credential && touched.credential && (
              <FieldError>{errors.credential}</FieldError>
            )}
          </Field>
        </FieldGroup>
      </FieldSet>
      <FieldSet>
        <FieldGroup>
          <FieldLegend className="mt-4" dir="rtl">
            الترجمة العربية
          </FieldLegend>
          <Field
            dir="rtl"
            data-invalid={
              !!(
                errors.translations?.ar?.title &&
                touched.translations?.ar?.title
              )
            }
          >
            <FieldLabel htmlFor="arabicTitle">العنوان</FieldLabel>
            <Input
              type="text"
              id="arabicTitle"
              placeholder="ادخل العنوان هنا"
              {...getFieldProps("translations.ar.title")}
            />
            {errors.translations?.ar?.title &&
              touched.translations?.ar?.title && (
                <FieldError>{errors.translations.ar.title}</FieldError>
              )}
          </Field>
          <Field
            dir="rtl"
            data-invalid={
              !!(errors.translations?.ar?.by && touched.translations?.ar?.by)
            }
          >
            <FieldLabel htmlFor="arabicBy">المعهد/المنصة</FieldLabel>
            <Input
              type="text"
              id="arabicBy"
              placeholder="ادخل اسم المعهد/المنصة هنا"
              {...getFieldProps("translations.ar.by")}
            />
            {errors.translations?.ar?.by && touched.translations?.ar?.by && (
              <FieldError>{errors.translations.ar.by}</FieldError>
            )}
          </Field>
          <Field
            dir="rtl"
            data-invalid={
              !!(
                errors.translations?.ar?.skills &&
                touched.translations?.ar?.skills
              )
            }
          >
            <FieldLabel htmlFor="skills">المهارات</FieldLabel>
            <div className="flex gap-1.5 flex-wrap">
              {values.translations?.ar?.skills?.map((skill, index) => (
                <Badge key={skill} className="pe-3 ps-1 py-1 gap-1">
                  <span>{skill}</span>
                  <Button
                    type="button"
                    onClick={() => removeArSkill(index)}
                    className="w-6 h-6 rounded-full hover:text-neutral-900 hover:bg-neutral-100 cursor-pointer"
                    aria-label={`Remove ${skill}`}
                  >
                    <X className="w-1 h-1" />
                  </Button>
                </Badge>
              ))}
              <Input
                type="text"
                id="skills"
                name="skills"
                value={arSkillInput}
                className="flex-1 min-w-[200px]"
                onBlur={handleBlur}
                onChange={(e) => setArSkillInput(e.target.value)}
                onKeyDown={(e) => handleArSkillsKeyDown(e)}
                aria-invalid={
                  !!(
                    errors.translations?.ar?.skills &&
                    touched.translations?.ar?.skills
                  )
                }
                placeholder="ادخل المهارة واضغط Enter"
              />
            </div>
            {touched.translations?.ar?.skills &&
              errors.translations?.ar?.skills && (
                <FieldError>{errors.translations?.ar?.skills}</FieldError>
              )}
          </Field>
        </FieldGroup>
      </FieldSet>
      <div className="mt-6 flex justify-center gap-3">
        <Button
          type="submit"
          disabled={isPending || !isValid || (mode === "edit" && !dirty)}
          className="w-full max-w-sm cursor-pointer"
        >
          {isPending
            ? mode === "edit"
              ? "Updating..."
              : "Creating..."
            : mode === "edit"
            ? "Update Course"
            : "Create Course"}
        </Button>
        <Button variant="outline" asChild>
          <Link href="/admin/courses">Cancel</Link>
        </Button>
      </div>
    </form>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/Courses.jsx
============================================================
"use client";

import { useState } from "react";
import { CoursesHeader, CoursesTable, CoursesDialog } from "./courses";
import { CoursesSkeleton } from "./skeleton";
import { useCourses } from "@/hooks/useCourses";

export default function Courses() {
  const { data: courses = [], isLoading } = useCourses();
  const [dialog, setDialog] = useState({ open: false, course: null });
  if (isLoading) return <CoursesSkeleton />;
  return (
    <>
      <CoursesHeader />
      <CoursesTable courses={courses} setDialog={setDialog} />
      <CoursesDialog dialog={dialog} setDialog={setDialog} />
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/CoursesWrapper.jsx
============================================================
import { AdminRoute } from "@/components/auth/AdminRoute";
import { Button } from "@/components/ui/button";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { ChevronLeft } from "lucide-react";
import Link from "next/link";

export default function CoursesWrapper({ children }) {
  return (
    <AdminRoute>
      <div className="min-h-screen bg-neutral-50">
        <main className="max-w-7xl mx-auto px-4 py-8 space-y-8">
          <div className="bg-white rounded-lg shadow-md p-6">
            <div className="max-w-7xl mx-auto py-4 flex gap-2 items-center">
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="ghost"
                    size="icon"
                    className="cursor-pointer"
                    asChild
                  >
                    <Link href="/dashboard">
                      <ChevronLeft />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Back to Dashboard</p>
                </TooltipContent>
              </Tooltip>
              <h1 className="text-2xl font-bold">Course Management</h1>
            </div>
            {children}
          </div>
        </main>
      </div>
    </AdminRoute>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/_components/index.js
============================================================
import Course from "./Course";
import Courses from "./Courses";
import CourseForm from "./CourseForm";
import CoursesWrapper from "./CoursesWrapper";

export { Course, Courses, CourseForm, CoursesWrapper };


============================================================
FILE: app/(dashboard)/admin/courses/[id]/edit/page.js
============================================================
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { CourseForm } from "../../_components";
import { Button } from "@/components/ui/button";
import { ChevronLeft } from "lucide-react";
import Link from "next/link";

export default async function EditCoursePage({ params }) {
  const { id } = await params;
  return (
    <>
      <div className="flex gap-2 items-center mb-6">
        <Tooltip>
          <TooltipTrigger asChild>
            <Button
              variant="ghost"
              size="icon"
              className="cursor-pointer"
              asChild
            >
              <Link href="/admin/courses">
                <ChevronLeft />
              </Link>
            </Button>
          </TooltipTrigger>
          <TooltipContent>
            <p>Back to Courses</p>
          </TooltipContent>
        </Tooltip>
        <h2 className="text-xl font-bold">Edit Course</h2>
      </div>
      <div className="p-5 flex justify-center items-center">
        <div className="max-w-3xl w-full">
          <CourseForm mode="edit" courseId={id} />
        </div>
      </div>
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/[id]/page.js
============================================================
import {
  dehydrate,
  HydrationBoundary,
  QueryClient,
} from "@tanstack/react-query";
import { getCourse } from "@/requests/courses";
import { Course } from "../_components";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { Button } from "@/components/ui/button";
import { ChevronLeft } from "lucide-react";
import Link from "next/link";

export default async function CoursePage({ params }) {
  const queryClient = new QueryClient();
  const { id } = await params;
  await queryClient.prefetchQuery({
    queryKey: ["courses", id],
    queryFn: () => getCourse(id),
  });
  return (
    <HydrationBoundary state={dehydrate(queryClient)}>
      <div className="flex gap-2 items-center mb-4">
        <Tooltip>
          <TooltipTrigger asChild>
            <Button
              variant="ghost"
              size="icon"
              className="cursor-pointer"
              asChild
            >
              <Link href=".">
                <ChevronLeft />
              </Link>
            </Button>
          </TooltipTrigger>
          <TooltipContent>
            <p>Back to Courses</p>
          </TooltipContent>
        </Tooltip>
        <h2 className="text-xl font-bold">Course details</h2>
      </div>
      <Course courseId={id} />
    </HydrationBoundary>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/create/page.js
============================================================
import { CourseForm } from "../_components";

export default function CreateCoursePage() {
  return (
    <div className="p-5 flex justify-center items-center">
      <div className="max-w-3xl w-full">
        <CourseForm mode="create" />
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/courses/layout.js
============================================================
import { CoursesWrapper } from "./_components";

export default function CoursesLayout({ children }) {
  return <CoursesWrapper>{children}</CoursesWrapper>;
}


============================================================
FILE: app/(dashboard)/admin/courses/page.js
============================================================
import {
  dehydrate,
  HydrationBoundary,
  QueryClient,
} from "@tanstack/react-query";
import { Courses } from "./_components";
import { getCourses } from "@/requests/courses";

export default async function CoursesPage() {
  const queryClient = new QueryClient();
  await queryClient.prefetchQuery({
    queryKey: ["courses"],
    queryFn: getCourses,
  });
  return (
    <HydrationBoundary state={dehydrate(queryClient)}>
      <Courses />
    </HydrationBoundary>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/_components/messages/index.js
============================================================
import MessagesHeader from "./MessagesHeader";
import MessagesTable from "./MessagesTable";
import MessagesDialog from "./MessagesDialog";

export { MessagesHeader, MessagesTable, MessagesDialog };


============================================================
FILE: app/(dashboard)/admin/messages/_components/messages/MessagesDialog.jsx
============================================================
"use client";

import { Button } from "@/components/ui/button";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { useDeleteMessage } from "@/hooks/useMessages";

export default function MessagesDialog({ dialog, setDialog }) {
  const { mutate, isPending } = useDeleteMessage();
  const handleCancelDialog = () => {
    setDialog({ open: false, message: null });
  };
  const handleConfirmDialog = () => {
    if (dialog.message?._id) {
      mutate(dialog.message._id, {
        onSuccess: () => setDialog({ open: false, message: null }),
      });
    }
  };
  return (
    <Dialog
      open={dialog.open}
      onOpenChange={(open) => setDialog((prev) => ({ ...prev, open }))}
    >
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Delete Message</DialogTitle>
          <DialogDescription>
            Are you sure you want to permanently delete the message that sent by
            <span className="font-semibold"> {dialog.message?.name}</span>? This
            action cannot be undone.
          </DialogDescription>
        </DialogHeader>
        <DialogFooter>
          <Button
            variant="outline"
            className="cursor-pointer"
            onClick={handleCancelDialog}
            disabled={isPending}
          >
            Cancel
          </Button>
          <Button
            variant="destructive"
            className="cursor-pointer"
            onClick={handleConfirmDialog}
            disabled={isPending}
          >
            {isPending ? "Deleting..." : "Confirm"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/_components/messages/MessagesHeader.jsx
============================================================
import { Button } from "@/components/ui/button";
import Link from "next/link";

export default function MessagesHeader() {
  return (
    <div className="flex justify-between items-center mb-6">
      <h2 className="text-xl font-semibold">Messages</h2>
      <Button asChild>
        <Link href="messages/create">Add Message</Link>
      </Button>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/_components/messages/MessagesTable.jsx
============================================================
"use client";

import { Button } from "@/components/ui/button";
import {
  Card,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { useDeleteMessage } from "@/hooks/useMessages";
import { usePermissions } from "@/hooks/usePermissions";
import { formatDate } from "@/utils/formatDate";
import { ScanText, Trash2 } from "lucide-react";
import Link from "next/link";

export default function MessagesTable({ messages, setDialog }) {
  const { permissions } = usePermissions();
  const { isPending } = useDeleteMessage();
  const handleOpenDialog = (message) => {
    setDialog({ open: true, message });
  };
  if (messages.length === 0) {
    return (
      <Card className="w-full max-w-3xl mx-auto">
        <CardHeader className="text-center gap-6">
          <CardTitle className="text-2xl">No Messages Found</CardTitle>
          <CardDescription>
            Click on "Add Message" to create a new one.
          </CardDescription>
        </CardHeader>
      </Card>
    );
  }
  return (
    <Table>
      <TableHeader>
        <TableRow className="bg-slate-100">
          {["Message Id", "Name", "Email", "Message", "Sent At", "Actions"].map(
            (col) => (
              <TableHead key={col} className="font-bold pointer-events-none">
                {col}
              </TableHead>
            )
          )}
        </TableRow>
      </TableHeader>
      <TableBody>
        {messages.map(({ _id, name, email, message, createdAt }) => (
          <TableRow key={_id}>
            <TableCell>{_id}</TableCell>
            <TableCell>{name}</TableCell>
            <TableCell>{email}</TableCell>
            <TableCell className="max-w-[300px] truncate">{message}</TableCell>
            <TableCell>{formatDate(createdAt)}</TableCell>
            <TableCell className="space-x-2">
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button variant="outline" size="icon" asChild>
                    <Link
                      href={`messages/${_id}`}
                      className="text-gray-600 hover:text-gray-800"
                    >
                      <ScanText />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>View the message by ({name})</p>
                </TooltipContent>
              </Tooltip>
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="outline"
                    size="icon"
                    className="cursor-pointer text-red-500 hover:text-red-700"
                    onClick={() => handleOpenDialog({ _id, name })}
                    disabled={!permissions.canDeleteMessage || isPending}
                  >
                    <Trash2 />
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Delete the message by ({name})</p>
                </TooltipContent>
              </Tooltip>
            </TableCell>
          </TableRow>
        ))}
      </TableBody>
    </Table>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/_components/messages/NoMessage.jsx
============================================================
import {
  Card,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";

export default function NoMessage({ msg = "" }) {
  return (
    <Card className="w-full max-w-3xl mx-auto">
      <CardHeader className="text-center gap-6">
        <CardTitle className="text-2xl">Message not found</CardTitle>
        <CardDescription>
          {msg || "The requested message could not be found."}
        </CardDescription>
      </CardHeader>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/_components/skeleton/index.js
============================================================
import MessagesSkeleton from "./MessagesSkeleton";
import MessageSkeleton from "./MessageSkeleton";

export { MessagesSkeleton, MessageSkeleton };


============================================================
FILE: app/(dashboard)/admin/messages/_components/skeleton/MessageSkeleton.jsx
============================================================
import { Skeleton } from "@/components/ui/skeleton";
import {
  Card,
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
  CardFooter,
} from "@/components/ui/card";

export default function MessageSkeleton() {
  return (
    <Card className="max-w-2xl mx-auto animate-pulse">
      <CardHeader>
        <CardTitle>
          <Skeleton className="h-7 w-1/2 rounded bg-neutral-200" />
        </CardTitle>
        <CardDescription>
          <Skeleton className="h-4 w-3/4 rounded" />
        </CardDescription>
      </CardHeader>
      <CardContent className="space-y-6">
        {[...Array(4)].map((_, i) => {
          if (i === 2) {
            return (
              <div key={i} className="space-y-2">
                <Skeleton className="h-4 w-1/4 rounded bg-neutral-200" />
                <Skeleton className="h-6 w-full rounded" />
                <Skeleton className="h-6 w-2/3 rounded" />
                <Skeleton className="h-6 w-1/2 rounded" />
                <Skeleton className="h-6 w-2/5 rounded" />
              </div>
            );
          }
          return (
            <div key={i} className="space-y-2">
              <Skeleton className="h-4 w-1/4 rounded bg-neutral-200" />
              <Skeleton className="h-6 w-full rounded" />
            </div>
          );
        })}
      </CardContent>
      <CardFooter className="flex gap-3">
        <Skeleton className="h-10 w-32 rounded-md bg-neutral-200" />
        <Skeleton className="h-10 w-24 rounded-md" />
      </CardFooter>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/_components/skeleton/MessagesSkeleton.jsx
============================================================
import { Skeleton } from "@/components/ui/skeleton";

export default function MessagesSkeleton() {
  return (
    <>
      <div className="flex justify-between items-center mb-6">
        <Skeleton className="h-7 w-24 rounded-md" />
        <Skeleton className="h-9 w-24 rounded-md bg-neutral-200" />
      </div>
      <div className="grid gap-4">
        <div className="flex justify-between items-center rounded-lg">
          {Array.from({ length: 6 }).map((_, i) => (
            <Skeleton
              key={i}
              className="h-[30px] w-[120px] bg-neutral-200 rounded-full"
            />
          ))}
        </div>
        {Array.from({ length: 3 }).map((_, rowIndex) => (
          <div
            key={rowIndex}
            className="flex justify-between items-center gap-4 border-b py-2"
          >
            {Array.from({ length: 6 }).map((_, cellIndex) => (
              <Skeleton
                key={cellIndex}
                className="h-[25px] w-[120px] rounded-full"
              />
            ))}
          </div>
        ))}
      </div>
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/_components/validation/schema.js
============================================================
import * as Yup from "yup";

export const schema = Yup.object({
  name: Yup.string()
    .min(2, "Name must be at least 2 characters")
    .max(50, "Name must not exceed 50 characters")
    .required("Name is required"),
  email: Yup.string()
    .email("Invalid email address")
    .required("Email is required"),
  message: Yup.string()
    .min(5, "Message must be at least 5 characters")
    .max(1000, "Message must not exceed 1000 characters")
    .required("Message is required"),
});


============================================================
FILE: app/(dashboard)/admin/messages/_components/index.js
============================================================
import Messages from "./Messages";
import Message from "./Message";
import MessageForm from "./MessageForm";
import MessagesWrapper from "./MessagesWrapper";

export { Messages, Message, MessageForm, MessagesWrapper };


============================================================
FILE: app/(dashboard)/admin/messages/_components/Message.jsx
============================================================
"use client";

import Link from "next/link";
import { formatDate } from "@/utils/formatDate";
import { useMessage } from "@/hooks/useMessages";
import {
  Card,
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
  CardFooter,
} from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { MessageSkeleton } from "./skeleton";
import NoMessage from "./messages/NoMessage";

export default function Message({ messageId }) {
  const { data: message, isLoading } = useMessage(messageId);
  if (isLoading) return <MessageSkeleton />;
  if (!message) return <NoMessage />;
  const { name, email, message: msg, createdAt } = message;
  return (
    <Card className="max-w-2xl mx-auto">
      <CardHeader>
        <CardTitle className="text-2xl font-semibold">
          Message Overview
        </CardTitle>
        <CardDescription>View and reply to the message below.</CardDescription>
      </CardHeader>
      <CardContent className="space-y-6">
        <div>
          <p className="text-sm font-medium text-muted-foreground mb-1">From</p>
          <p className="text-base font-medium">{name}</p>
        </div>
        <div>
          <p className="text-sm font-medium text-muted-foreground mb-1">
            Email
          </p>
          <a href={`mailto:${email}`} className="text-blue-600 hover:underline">
            {email}
          </a>
        </div>
        <div>
          <p className="text-sm font-medium text-muted-foreground mb-1">
            Message
          </p>
          <p className="text-gray-900 whitespace-pre-wrap leading-relaxed">
            {msg}
          </p>
        </div>
        <div>
          <p className="text-sm font-medium text-muted-foreground mb-1">
            Received on
          </p>
          <p className="text-gray-700">{formatDate(createdAt, true)}</p>
        </div>
      </CardContent>
      <CardFooter className="flex gap-3">
        <Button className="cursor-pointer" asChild>
          <a
            href={`mailto:${email}?subject=Re: Your Message&body=Hi ${name},%0D%0A%0D%0A`}
          >
            Reply via Email
          </a>
        </Button>
        <Button variant="outline" asChild>
          <Link href=".">Back</Link>
        </Button>
      </CardFooter>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/_components/MessageForm.jsx
============================================================
"use client";

import { useFormik } from "formik";
import { useRouter } from "next/navigation";
import Link from "next/link";
import { useCreateMessage } from "@/hooks/useMessages";
import { schema } from "./validation/schema";
import {
  Field,
  FieldContent,
  FieldDescription,
  FieldError,
  FieldLabel,
} from "@/components/ui/field";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Button } from "@/components/ui/button";

export default function MessageForm() {
  const router = useRouter();
  const { mutate, isPending } = useCreateMessage();
  const { handleSubmit, getFieldProps, values, touched, errors, isValid } =
    useFormik({
      initialValues: {
        name: "",
        email: "",
        message: "",
      },
      validationSchema: schema,
      onSubmit: (values) => {
        mutate(values, { onSuccess: () => router.push("/admin/messages") });
      },
    });
  return (
    <form
      onSubmit={handleSubmit}
      noValidate
      className="p-6 space-y-6 outline shadow-md rounded-lg bg-white"
    >
      <Field data-invalid={!!(errors.name && touched.name)}>
        <FieldLabel htmlFor="name">
          Name <span className="text-red-500">*</span>
        </FieldLabel>
        <Input
          type="text"
          id="name"
          placeholder="type name here"
          aria-invalid={!!(errors.name && touched.name)}
          {...getFieldProps("name")}
        />
        {errors.name && touched.name && <FieldError>{errors.name}</FieldError>}
      </Field>
      <Field data-invalid={!!(touched.email && errors.email)}>
        <FieldLabel htmlFor="email">
          Email <span className="text-red-500">*</span>
        </FieldLabel>
        <Input
          id="email"
          type="email"
          placeholder="email address"
          {...getFieldProps("email")}
          aria-invalid={!!(touched.email && errors.email)}
        />
        {touched.email && errors.email && (
          <FieldError>{errors.email}</FieldError>
        )}
      </Field>
      <Field data-invalid={!!(errors.message && touched.message)}>
        <FieldLabel htmlFor="message">
          Message <span className="text-red-500">*</span>
        </FieldLabel>
        <Textarea
          id="message"
          placeholder="type message here"
          className="min-h-30 resize-none"
          aria-invalid={!!(errors.message && touched.message)}
          {...getFieldProps("message")}
        />
        <FieldContent className="flex-row justify-between">
          {touched.message && errors.message && (
            <FieldError>{errors.message}</FieldError>
          )}
          <FieldDescription className="ml-auto">
            {values.message.length} / 1000 characters
          </FieldDescription>
        </FieldContent>
      </Field>
      <div className="mt-6 flex justify-center gap-3">
        <Button
          type="submit"
          disabled={isPending || !isValid}
          className="w-full max-w-sm cursor-pointer"
        >
          {isPending ? "Sending..." : "Send Message"}
        </Button>
        <Button variant="outline" asChild>
          <Link href="/admin/messages">Cancel</Link>
        </Button>
      </div>
    </form>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/_components/Messages.jsx
============================================================
"use client";

import { useState } from "react";
import { MessagesHeader, MessagesTable, MessagesDialog } from "./messages";
import { MessagesSkeleton } from "./skeleton";
import { useMessages } from "@/hooks/useMessages";

export default function Messages() {
  const { data: messages = [], isLoading } = useMessages();
  const [dialog, setDialog] = useState({ open: false, message: null });
  if (isLoading) return <MessagesSkeleton />;
  return (
    <>
      <MessagesHeader />
      <MessagesTable messages={messages} setDialog={setDialog} />
      <MessagesDialog dialog={dialog} setDialog={setDialog} />
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/_components/MessagesWrapper.jsx
============================================================
import { AdminRoute } from "@/components/auth/AdminRoute";
import { Button } from "@/components/ui/button";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { ChevronLeft } from "lucide-react";
import Link from "next/link";

export default function MessagesWrapper({ children }) {
  return (
    <AdminRoute>
      <div className="min-h-screen bg-neutral-50">
        <main className="max-w-7xl mx-auto px-4 py-8 space-y-8">
          <div className="bg-white rounded-lg shadow-md p-6">
            <div className="max-w-7xl mx-auto py-4 flex gap-2 items-center">
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="ghost"
                    size="icon"
                    className="cursor-pointer"
                    asChild
                  >
                    <Link href="/dashboard">
                      <ChevronLeft />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Back to Dashboard</p>
                </TooltipContent>
              </Tooltip>
              <h1 className="text-2xl font-bold">Message Management</h1>
            </div>
            {children}
          </div>
        </main>
      </div>
    </AdminRoute>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/[id]/page.js
============================================================
import {
  dehydrate,
  HydrationBoundary,
  QueryClient,
} from "@tanstack/react-query";
import { getMessage } from "@/requests/messages";
import { Message } from "../_components";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { Button } from "@/components/ui/button";
import { ChevronLeft } from "lucide-react";
import Link from "next/link";

export default async function MessagePage({ params }) {
  const queryClient = new QueryClient();
  const { id } = await params;
  await queryClient.prefetchQuery({
    queryKey: ["messages", id],
    queryFn: () => getMessage(id),
  });
  return (
    <HydrationBoundary state={dehydrate(queryClient)}>
      <div className="flex gap-2 items-center mb-4">
        <Tooltip>
          <TooltipTrigger asChild>
            <Button
              variant="ghost"
              size="icon"
              className="cursor-pointer"
              asChild
            >
              <Link href=".">
                <ChevronLeft />
              </Link>
            </Button>
          </TooltipTrigger>
          <TooltipContent>
            <p>Back to Messages</p>
          </TooltipContent>
        </Tooltip>
        <h2 className="text-xl font-bold">Message details</h2>
      </div>
      <Message messageId={id} />
    </HydrationBoundary>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/create/page.js
============================================================
import { MessageForm } from "../_components";

export default function CreateProjectPage() {
  return (
    <div className="p-5 flex justify-center items-center">
      <div className="max-w-3xl w-full">
        <MessageForm />
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/messages/layout.js
============================================================
import { MessagesWrapper } from "./_components";

export default function MessagesLayout({ children }) {
  return <MessagesWrapper>{children}</MessagesWrapper>;
}


============================================================
FILE: app/(dashboard)/admin/messages/page.js
============================================================
import {
  dehydrate,
  HydrationBoundary,
  QueryClient,
} from "@tanstack/react-query";
import { Messages } from "./_components";
import { getMessages } from "@/requests/messages";

export default async function MessagesPage() {
  const queryClient = new QueryClient();
  await queryClient.prefetchQuery({
    queryKey: ["messages"],
    queryFn: getMessages,
  });
  return (
    <HydrationBoundary state={dehydrate(queryClient)}>
      <Messages />
    </HydrationBoundary>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/projects/index.js
============================================================
import ProjectsHeader from "./ProjectsHeader";
import ProjectsDialog from "./ProjectsDialog";
import ProjectsTable from "./ProjectsTable";
import NoProject from "./NoProject";

export { NoProject, ProjectsHeader, ProjectsDialog, ProjectsTable };


============================================================
FILE: app/(dashboard)/admin/projects/_components/projects/NoProject.jsx
============================================================
import {
  Card,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";

export default function NoProject({ msg = "" }) {
  return (
    <Card className="w-full max-w-3xl mx-auto">
      <CardHeader className="text-center gap-6">
        <CardTitle className="text-2xl">Project not found</CardTitle>
        <CardDescription>
          {msg || "The requested project could not be found."}
        </CardDescription>
      </CardHeader>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/projects/ProjectsDialog.jsx
============================================================
"use client";

import { Button } from "@/components/ui/button";
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
} from "@/components/ui/dialog";
import { useDeleteProject } from "@/hooks/useProjects";

export default function ProjectsDialog({ dialog, setDialog }) {
  const { mutate, isPending } = useDeleteProject();
  const handleCancelDialog = () => {
    setDialog({ open: false, project: null });
  };
  const handleConfirmDialog = () => {
    if (dialog.project?._id) {
      mutate(dialog.project._id, {
        onSuccess: () => setDialog({ open: false, project: null }),
      });
    }
  };
  return (
    <Dialog
      open={dialog.open}
      onOpenChange={(open) => setDialog((prev) => ({ ...prev, open }))}
    >
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Delete Project</DialogTitle>
          <DialogDescription>
            Are you sure you want to permanently delete{" "}
            <span className="font-semibold">{dialog.project?.title}</span>? This
            action cannot be undone.
          </DialogDescription>
        </DialogHeader>
        <DialogFooter>
          <Button
            variant="outline"
            className="cursor-pointer"
            onClick={handleCancelDialog}
            disabled={isPending}
          >
            Cancel
          </Button>
          <Button
            variant="destructive"
            className="cursor-pointer"
            onClick={handleConfirmDialog}
            disabled={isPending}
          >
            {isPending ? "Deleting..." : "Confirm"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/projects/ProjectsHeader.jsx
============================================================
import { Button } from "@/components/ui/button";
import Link from "next/link";

export default function ProjectsHeader() {
  return (
    <div className="flex justify-between items-center mb-6">
      <h2 className="text-xl font-semibold">Projects</h2>
      <Button asChild>
        <Link href="projects/create">Add Project</Link>
      </Button>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/projects/ProjectsTable.jsx
============================================================
"use client";

import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import {
  Tooltip,
  TooltipTrigger,
  TooltipContent,
} from "@/components/ui/tooltip";
import { Pencil, ScanText, Trash2 } from "lucide-react";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import Link from "next/link";
import { usePermissions } from "@/hooks/usePermissions";
import { useDeleteProject } from "@/hooks/useProjects";

export default function ProjectsTable({ projects, setDialog }) {
  const { permissions } = usePermissions();
  const { isPending } = useDeleteProject();
  const handleOpenDialog = (project) => {
    setDialog({ open: true, project });
  };
  if (projects.length === 0) {
    return (
      <Card className="w-full max-w-3xl mx-auto">
        <CardHeader className="text-center gap-6">
          <CardTitle className="text-2xl">No Projects Found</CardTitle>
          <CardDescription>
            Click on "Add Project" to create a new one.
          </CardDescription>
        </CardHeader>
      </Card>
    );
  }
  return (
    <Table>
      <TableHeader>
        <TableRow className="bg-slate-100">
          {["Project Id", "Title", "Summary", "Tools", "Links", "Actions"].map(
            (col) => (
              <TableHead key={col} className="font-bold pointer-events-none">
                {col}
              </TableHead>
            )
          )}
        </TableRow>
      </TableHeader>
      <TableBody>
        {projects.map(({ _id, title, summary, code, demo, tools }) => (
          <TableRow key={_id}>
            <TableCell>{_id}</TableCell>
            <TableCell>{title}</TableCell>
            <TableCell className="max-w-[300px] truncate">{summary}</TableCell>
            <TableCell className="max-w-[300px]">
              <div className="flex flex-wrap gap-1">
                {tools.map((tool) => (
                  <Badge key={tool} variant="secondary">
                    {tool}
                  </Badge>
                ))}
              </div>
            </TableCell>
            <TableCell>
              <a
                href={demo}
                target="_blank"
                rel="noopener noreferrer"
                className="text-blue-600 hover:underline text-sm"
              >
                Live demo
              </a>
              ,{" "}
              <a
                href={code}
                target="_blank"
                rel="noopener noreferrer"
                className="text-blue-600 hover:underline text-sm"
              >
                Source code
              </a>
            </TableCell>
            <TableCell className="space-x-2">
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button variant="outline" size="icon" asChild>
                    <Link
                      href={`projects/${_id}`}
                      className="text-gray-600 hover:text-gray-800"
                    >
                      <ScanText />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>View the project ({title})</p>
                </TooltipContent>
              </Tooltip>
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button variant="outline" size="icon" asChild>
                    <Link
                      href={`projects/${_id}/edit`}
                      className="text-blue-500 hover:text-blue-700"
                    >
                      <Pencil />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Edit the project ({title})</p>
                </TooltipContent>
              </Tooltip>
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="outline"
                    size="icon"
                    className="cursor-pointer text-red-500 hover:text-red-700"
                    onClick={() => handleOpenDialog({ _id, title })}
                    disabled={!permissions.canDeleteProject || isPending}
                  >
                    <Trash2 />
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Delete the project ({title})</p>
                </TooltipContent>
              </Tooltip>
            </TableCell>
          </TableRow>
        ))}
      </TableBody>
    </Table>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/skeleton/index.js
============================================================
import ProjectFormSkeleton from "./ProjectFormSkeleton";
import ProjectsSkeleton from "./ProjectsSkeleton";
import ProjectSkeleton from "./ProjectSkeleton";

export { ProjectsSkeleton, ProjectFormSkeleton, ProjectSkeleton };


============================================================
FILE: app/(dashboard)/admin/projects/_components/skeleton/ProjectFormSkeleton.jsx
============================================================
import { Skeleton } from "@/components/ui/skeleton";

export default function ProjectFormSkeleton() {
  return (
    <div className="p-6 max-w-3xl mx-auto rounded-xl border bg-white shadow-sm space-y-4 animate-pulse">
      <Skeleton className="h-8 w-1/3 rounded bg-neutral-200" />
      {[...Array(7)].map((_, i) => (
        <div key={i} className="space-y-2">
          <Skeleton className="h-6 w-1/4 rounded bg-neutral-200" />
          <Skeleton className="h-10 w-full rounded" />
        </div>
      ))}
      <div className="grid grid-cols-2 gap-2">
        <div className="space-y-2">
          <Skeleton className="h-8 w-1/4 rounded bg-gray-200" />
          <Skeleton className="h-8 w-full rounded" />
        </div>
        <div className="space-y-2">
          <Skeleton className="h-8 w-1/4 rounded bg-gray-200" />
          <Skeleton className="h-8 w-full rounded" />
        </div>
      </div>
      <Skeleton className="h-px my-3 w-full" />
      <div dir="rtl" className="border-t pt-6 space-y-4">
        <Skeleton className="h-8 w-1/3 self-end rounded bg-neutral-200" />
        {[...Array(3)].map((_, i) => (
          <div key={i} className="space-y-2">
            <Skeleton className="h-6 w-1/4 rounded bg-neutral-200" />
            <Skeleton className="h-10 w-full rounded" />
          </div>
        ))}
      </div>
      <div className="w-full max-w-md mx-auto grid grid-cols-2 gap-3 pt-4">
        <Skeleton className="h-10 rounded-md bg-neutral-200" />
        <Skeleton className="h-10 rounded-md" />
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/skeleton/ProjectSkeleton.jsx
============================================================
import { Skeleton } from "@/components/ui/skeleton";

export default function ProjectSkeleton() {
  return (
    <div className="w-full max-w-3xl mx-auto outline shadow-md rounded-lg p-6 space-y-6">
      <div className="rounded-lg overflow-hidden border">
        <Skeleton className="w-full h-[300px]" />
      </div>
      <div>
        <Skeleton className="h-8 w-2/3 mb-3" />
        <Skeleton className="h-4 w-full mb-1" />
        <Skeleton className="h-4 w-5/6" />
      </div>
      <div className="flex flex-wrap gap-2">
        {Array.from({ length: 5 }).map((_, i) => (
          <Skeleton key={i} className="h-6 w-16 rounded-full" />
        ))}
      </div>
      <div className="space-y-2">
        <Skeleton className="h-4 w-full" />
        <Skeleton className="h-4 w-11/12" />
        <Skeleton className="h-4 w-10/12" />
        <Skeleton className="h-4 w-9/12" />
      </div>
      <div className="flex gap-3">
        <Skeleton className="h-10 w-28 rounded-md" />
        <Skeleton className="h-10 w-28 rounded-md" />
      </div>
      <div className="space-y-4 mt-8">
        <Skeleton className="h-6 w-1/3 mb-2" />
        <div className="space-y-3" dir="rtl">
          <Skeleton className="h-7 w-1/2 self-end" />
          <Skeleton className="h-4 w-5/6 self-end" />
          <Skeleton className="h-4 w-3/4 self-end" />
        </div>
      </div>
      <div className="space-y-4 mt-8">
        <Skeleton className="h-6 w-1/3 mb-2" />
        <div className="flex flex-wrap justify-center items-start gap-4">
          <div className="flex-1 min-w-[200px] max-w-md">
            <Skeleton className="h-4 w-1/3 mx-auto mb-2" />
            <div className="rounded-lg overflow-hidden border">
              <Skeleton className="w-full h-[200px]" />
            </div>
          </div>
          <div className="flex-1 min-w-[150px] max-w-xs">
            <Skeleton className="h-4 w-1/3 mx-auto mb-2" />
            <div className="rounded-lg overflow-hidden border">
              <Skeleton className="w-full h-[300px]" />
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/skeleton/ProjectsSkeleton.jsx
============================================================
import { Skeleton } from "@/components/ui/skeleton";

export default function ProjectsSkeleton() {
  return (
    <>
      <div className="flex justify-between items-center mb-6">
        <Skeleton className="h-7 w-24 rounded-md" />
        <Skeleton className="h-9 w-24 rounded-md bg-neutral-200" />
      </div>
      <div className="grid gap-4">
        <div className="flex justify-between items-center rounded-lg">
          {Array.from({ length: 6 }).map((_, i) => (
            <Skeleton
              key={i}
              className="h-[30px] w-[120px] bg-neutral-200 rounded-full"
            />
          ))}
        </div>
        {Array.from({ length: 3 }).map((_, rowIndex) => (
          <div
            key={rowIndex}
            className="flex justify-between items-center gap-4 border-b py-2"
          >
            {Array.from({ length: 6 }).map((_, cellIndex) => (
              <Skeleton
                key={cellIndex}
                className="h-[25px] w-[120px] rounded-full"
              />
            ))}
          </div>
        ))}
      </div>
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/validation/schema.js
============================================================
import * as Yup from "yup";

export const schema = Yup.object({
  preview: Yup.string()
    .url("Invalid preview URL")
    .required("Preview URL is required"),
  title: Yup.string()
    .min(2, "At least 2 chars")
    .max(100, "At most 100 chars")
    .required("Title is required"),
  summary: Yup.string()
    .min(5, "At least 5 chars")
    .max(500, "At most 500 chars")
    .required("Summary is required"),
  tools: Yup.array()
    .of(Yup.string().min(1, "Tool cannot be empty"))
    .min(1, "At least one tool is required")
    .required("Tools are required"),
  demo: Yup.string().url("Invalid demo URL").required("Demo URL is required"),
  code: Yup.string().url("Invalid code URL").required("Code URL is required"),
  content: Yup.object({
    description: Yup.string()
      .min(5, "At least 5 chars")
      .max(1000, "At most 1000 chars")
      .required("Description is required"),
    responsive: Yup.object({
      mobile: Yup.string().url("Invalid mobile preview URL"),
      desktop: Yup.string().url("Invalid desktop preview URL"),
    }),
  }).required("Content is required"),
  translations: Yup.object({
    ar: Yup.object({
      title: Yup.string()
        .min(2, "العنوان يجب أن يحتوي على حرفين على الأقل")
        .max(100, "العنوان يجب ألا يتجاوز 100 حرف"),
      summary: Yup.string()
        .min(5, "الملخص يجب أن يحتوي على 5 أحرف على الأقل")
        .max(500, "الملخص يجب ألا يتجاوز 500 حرف"),
      content: Yup.object({
        description: Yup.string()
          .min(5, "الوصف يجب أن يحتوي على 5 أحرف على الأقل")
          .max(1000, "الوصف يجب ألا يتجاوز 1000 حرف"),
      }),
    }),
  }),
});


============================================================
FILE: app/(dashboard)/admin/projects/_components/index.js
============================================================
import ProjectsWrapper from "./ProjectsWrapper";
import ProjectForm from "./ProjectForm";
import Projects from "./Projects";
import Project from "./Project";

export { ProjectsWrapper, ProjectForm, Projects, Project };


============================================================
FILE: app/(dashboard)/admin/projects/_components/Project.jsx
============================================================
"use client";

import Image from "next/image";
import { useProject } from "@/hooks/useProjects";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Separator } from "@/components/ui/separator";
import { ProjectSkeleton } from "./skeleton";
import { NoProject } from "./projects";

export default function Project({ projectId }) {
  const { data: project, isLoading } = useProject(projectId);
  if (isLoading) return <ProjectSkeleton />;
  if (!project) return <NoProject />;
  const {
    preview,
    title,
    summary,
    tools,
    demo,
    code,
    content: {
      description,
      responsive: { mobile, desktop },
    },
    translations: {
      ar: {
        title: arTitle,
        summary: arSummary,
        content: { description: arDescription },
      },
    },
  } = project;
  return (
    <Card className="w-full max-w-3xl mx-auto">
      <CardHeader>
        <div className="mb-4 rounded-lg overflow-hidden border border-border">
          <Image
            src={preview}
            alt={`${title} preview`}
            width={1200}
            height={630}
            unoptimized
            className="w-full h-auto object-cover"
          />
        </div>
        <CardTitle className="text-3xl font-bold text-foreground">
          {title}
        </CardTitle>
        <CardDescription className="text-base mt-2 text-muted-foreground/90">
          {summary}
        </CardDescription>
      </CardHeader>

      <CardContent className="space-y-6">
        <p className="text-foreground/80 leading-relaxed">{description}</p>
        <div className="flex flex-wrap gap-2">
          {tools.map((tool, index) => (
            <Badge
              key={index}
              variant="secondary"
              className="text-foreground/90"
            >
              {tool}
            </Badge>
          ))}
        </div>
        <div className="flex flex-wrap gap-3">
          {demo && (
            <Button asChild>
              <a href={demo} target="_blank" rel="noopener noreferrer">
                Live Demo
              </a>
            </Button>
          )}
          {code && (
            <Button variant="outline" asChild>
              <a href={code} target="_blank" rel="noopener noreferrer">
                View Code
              </a>
            </Button>
          )}
        </div>
        {(arTitle || arSummary || arDescription) && (
          <>
            <Separator className="my-6" />
            <div>
              <h3 className="text-xl font-semibold mb-4 text-foreground/90">
                Arabic Translations
              </h3>
              <div dir="rtl" className="space-y-3">
                {arTitle && (
                  <h4 className="text-2xl font-bold text-foreground">
                    {arTitle}
                  </h4>
                )}
                {arSummary && <p className="text-foreground/80">{arSummary}</p>}
                {arDescription && (
                  <p className="text-foreground/80 leading-relaxed">
                    {arDescription}
                  </p>
                )}
              </div>
            </div>
          </>
        )}
        {(desktop || mobile) && (
          <>
            <Separator className="my-6" />
            <div>
              <h3 className="text-xl font-semibold mb-4 text-foreground/90">
                Responsive Design
              </h3>
              <div className="flex flex-wrap justify-center items-start gap-4">
                {desktop && (
                  <div className="flex-1 min-w-[200px] max-w-md">
                    <p className="text-sm text-muted-foreground/90 mb-2 text-center">
                      Desktop
                    </p>
                    <div className="rounded-lg overflow-hidden border border-border">
                      <Image
                        src={desktop}
                        alt={`${title} desktop preview`}
                        width={400}
                        height={300}
                        unoptimized
                        className="w-full h-auto object-cover"
                      />
                    </div>
                  </div>
                )}
                {mobile && (
                  <div className="flex-1 min-w-[150px] max-w-xs">
                    <p className="text-sm text-muted-foreground/90 mb-2 text-center">
                      Mobile
                    </p>
                    <div className="rounded-lg overflow-hidden border border-border">
                      <Image
                        src={mobile}
                        alt={`${title} mobile preview`}
                        width={200}
                        height={400}
                        unoptimized
                        className="w-full h-auto object-cover"
                      />
                    </div>
                  </div>
                )}
              </div>
            </div>
          </>
        )}
      </CardContent>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/ProjectForm.jsx
============================================================
"use client";

import { useFormik } from "formik";
import Link from "next/link";
import { useEffect, useState } from "react";
import {
  Field,
  FieldContent,
  FieldDescription,
  FieldError,
  FieldGroup,
  FieldLabel,
  FieldLegend,
  FieldSeparator,
  FieldSet,
} from "@/components/ui/field";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Badge } from "@/components/ui/badge";
import { X } from "lucide-react";
import { Button } from "@/components/ui/button";
import { useProject, useUpsertProject } from "@/hooks/useProjects";
import { schema } from "./validation/schema";
import { ProjectFormSkeleton } from "./skeleton";
import { NoProject } from "./projects";
import { useRouter } from "next/navigation";

const initialProject = {
  preview: "",
  title: "",
  summary: "",
  tools: [],
  demo: "",
  code: "",
  content: {
    description: "",
    responsive: {
      mobile: "",
      desktop: "",
    },
  },
  translations: {
    ar: {
      title: "",
      summary: "",
      content: {
        description: "",
      },
    },
  },
};

export default function ProjectForm({ mode, projectId }) {
  const router = useRouter();
  const [toolInput, setToolInput] = useState("");
  const [initialValues, setInitialValues] = useState(initialProject);
  const { data: project, isError, error, isLoading } = useProject(projectId);
  const { mutate, isPending } = useUpsertProject(mode);
  useEffect(() => {
    if (mode === "edit" && project) {
      setInitialValues(project);
    } else if (mode === "create") {
      setInitialValues(initialProject);
    }
  }, [project, mode]);
  const {
    handleSubmit,
    getFieldProps,
    setFieldValue,
    handleBlur,
    values,
    touched,
    errors,
    isValid,
    dirty,
  } = useFormik({
    enableReinitialize: true,
    initialValues,
    validationSchema: schema,
    onSubmit: (values) => {
      if (mode === "edit") {
        const { _id, updatedAt, createdAt, __v, ...data } = values;
        mutate(
          { id: projectId, data },
          { onSuccess: () => router.push("/admin/projects") }
        );
      } else {
        mutate(values, { onSuccess: () => router.push("/admin/projects") });
      }
    },
  });
  const handleToolsKeyDown = (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      const tool = toolInput.trim();
      if (tool && !values.tools.includes(tool)) {
        setFieldValue("tools", [...values.tools, tool]);
        setToolInput("");
      }
    }
  };
  const removeTool = (indexToRemove) => {
    const newTools = values.tools.filter((_, index) => index !== indexToRemove);
    setFieldValue("tools", newTools);
  };
  if (isLoading) return <ProjectFormSkeleton />;
  if (isError) return <NoProject msg={error.message} />;
  return (
    <form
      onSubmit={handleSubmit}
      noValidate
      className="p-6 space-y-6 outline shadow-md rounded-lg bg-white"
    >
      <FieldSet>
        <FieldGroup>
          <FieldLegend>
            {mode === "edit" ? "Update" : "Create a New"} Project
          </FieldLegend>
          <Field data-invalid={!!(errors.preview && touched.preview)}>
            <FieldLabel htmlFor="preview">
              Preview URL <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="url"
              id="preview"
              placeholder="type preview URL here"
              aria-invalid={!!(errors.preview && touched.preview)}
              {...getFieldProps("preview")}
            />
            {errors.preview && touched.preview && (
              <FieldError>{errors.preview}</FieldError>
            )}
          </Field>
          <Field data-invalid={!!(errors.title && touched.title)}>
            <FieldLabel htmlFor="title">
              Title <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="text"
              id="title"
              placeholder="type title here"
              aria-invalid={!!(errors.title && touched.title)}
              {...getFieldProps("title")}
            />
            {errors.title && touched.title && (
              <FieldError>{errors.title}</FieldError>
            )}
          </Field>
          <Field data-invalid={!!(errors.summary && touched.summary)}>
            <FieldLabel htmlFor="summary">
              Summary <span className="text-red-500">*</span>
            </FieldLabel>
            <Textarea
              id="summary"
              placeholder="type summary here"
              className="min-h-24 resize-none"
              aria-invalid={!!(errors.summary && touched.summary)}
              {...getFieldProps("summary")}
            />
            <FieldContent className="flex-row justify-between">
              {errors.summary && touched.summary && (
                <FieldError>{errors.summary}</FieldError>
              )}
              <FieldDescription className="ml-auto">
                {values.summary.length} / 500 characters
              </FieldDescription>
            </FieldContent>
          </Field>
          <Field data-invalid={!!(errors.tools && touched.tools)}>
            <FieldLabel htmlFor="tools">
              Tools <span className="text-red-500">*</span>
            </FieldLabel>
            <div className="flex gap-1.5 flex-wrap">
              {values.tools?.map((tool, index) => (
                <Badge key={tool} className="ps-3 pe-1 py-1 gap-1">
                  <span>{tool}</span>
                  <Button
                    type="button"
                    onClick={() => removeTool(index)}
                    className="w-6 h-6 rounded-full hover:text-neutral-900 hover:bg-neutral-100 cursor-pointer"
                    aria-label={`Remove ${tool}`}
                  >
                    <X className="w-1 h-1" />
                  </Button>
                </Badge>
              ))}
              <Input
                type="text"
                id="tools"
                name="tools"
                value={toolInput}
                className="flex-1 min-w-[200px]"
                onChange={(e) => setToolInput(e.target.value)}
                onBlur={handleBlur}
                onKeyDown={(e) => handleToolsKeyDown(e)}
                aria-invalid={!!(errors.tools && touched.tools)}
                placeholder="type a tool and press Enter"
              />
            </div>
            {touched.tools && errors.tools && (
              <FieldError>{errors.tools}</FieldError>
            )}
          </Field>
          <Field data-invalid={!!(errors.demo && touched.demo)}>
            <FieldLabel htmlFor="demo">
              Demo URL <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="url"
              id="demo"
              placeholder="type demo URL here"
              aria-invalid={!!(errors.demo && touched.demo)}
              {...getFieldProps("demo")}
            />
            {touched.demo && errors.demo && (
              <FieldError>{errors.demo}</FieldError>
            )}
          </Field>
          <Field data-invalid={!!(errors.code && touched.code)}>
            <FieldLabel htmlFor="code">
              Code URL <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="url"
              id="code"
              placeholder="type code URL here"
              aria-invalid={!!(errors.code && touched.code)}
              {...getFieldProps("code")}
            />
            {touched.code && errors.code && (
              <FieldError>{errors.code}</FieldError>
            )}
          </Field>
          <Field
            data-invalid={
              !!(errors.content?.description && touched.content?.description)
            }
          >
            <FieldLabel htmlFor="description">
              Description <span className="text-red-500">*</span>
            </FieldLabel>
            <Textarea
              id="description"
              placeholder="type description here"
              className="min-h-30 resize-none"
              aria-invalid={
                !!(errors.content?.description && touched.content?.description)
              }
              {...getFieldProps("content.description")}
            />
            <FieldContent className="flex-row justify-between">
              {touched.content?.description && errors.content?.description && (
                <FieldError>{errors.content.description}</FieldError>
              )}
              <FieldDescription className="ml-auto">
                {values.content?.description.length} / 1000 characters
              </FieldDescription>
            </FieldContent>
          </Field>
          <div className="grid grid-cols-2 gap-2">
            <Field
              data-invalid={
                !!(
                  errors.content?.responsive?.mobile &&
                  touched.content?.responsive?.mobile
                )
              }
            >
              <FieldLabel htmlFor="mobile">Mobile preview URL</FieldLabel>
              <Input
                type="url"
                id="mobile"
                placeholder="type mobile preview URL here"
                {...getFieldProps("content.responsive.mobile")}
              />
              {touched.content?.responsive?.mobile &&
                errors.content?.responsive?.mobile && (
                  <FieldError>{errors.content.responsive.mobile}</FieldError>
                )}
            </Field>
            <Field
              data-invalid={
                !!(
                  errors.content?.responsive?.desktop &&
                  touched.content?.responsive?.desktop
                )
              }
            >
              <FieldLabel htmlFor="desktop">Desktop preview URL</FieldLabel>
              <Input
                type="url"
                id="desktop"
                placeholder="type desktop preview URL here"
                {...getFieldProps("content.responsive.desktop")}
              />
              {touched.content?.responsive?.desktop &&
                errors.content?.responsive?.desktop && (
                  <FieldError>{errors.content.responsive.desktop}</FieldError>
                )}
            </Field>
          </div>
        </FieldGroup>
      </FieldSet>
      <FieldSeparator />
      <FieldSet>
        <FieldGroup>
          <FieldLegend className="mt-4" dir="rtl">
            الترجمة العربية
          </FieldLegend>
          <Field
            dir="rtl"
            data-invalid={
              !!(
                errors.translations?.ar?.title &&
                touched.translations?.ar?.title
              )
            }
          >
            <FieldLabel htmlFor="arabicTitle">العنوان</FieldLabel>
            <Input
              type="text"
              id="arabicTitle"
              placeholder="ادخل العنوان هنا"
              {...getFieldProps("translations.ar.title")}
            />
            {errors.translations?.ar?.title &&
              touched.translations?.ar?.title && (
                <FieldError>{errors.translations.ar.title}</FieldError>
              )}
          </Field>
          <Field
            dir="rtl"
            data-invalid={
              !!(
                errors.translations?.ar?.summary &&
                touched.translations?.ar?.summary
              )
            }
          >
            <FieldLabel htmlFor="arabicSummary">الملخص</FieldLabel>
            <Textarea
              id="arabicSummary"
              placeholder="ادخل النص هنا"
              className="min-h-24 resize-none"
              {...getFieldProps("translations.ar.summary")}
            />
            <FieldContent className="flex-row justify-between">
              {errors.translations?.ar?.summary &&
                touched.translations?.ar?.summary && (
                  <FieldError>{errors.translations?.ar?.summary}</FieldError>
                )}
              <FieldDescription className="mr-auto">
                {values.translations?.ar?.summary.length} / 500 حرف
              </FieldDescription>
            </FieldContent>
          </Field>
          <Field
            dir="rtl"
            data-invalid={
              !!(
                errors.translations?.ar?.content?.description &&
                touched.translations?.ar?.content?.description
              )
            }
          >
            <FieldLabel htmlFor="arabicDescription">الوصف</FieldLabel>
            <Textarea
              id="arabicDescription"
              placeholder="ادخل النص هنا"
              className="min-h-30 resize-none"
              {...getFieldProps("translations.ar.content.description")}
            />
            <FieldContent className="flex-row justify-between">
              {errors.translations?.ar?.content?.description &&
                touched.translations?.ar?.content?.description && (
                  <FieldError>
                    {errors.translations?.ar?.content?.description}
                  </FieldError>
                )}
              <FieldDescription className="mr-auto">
                {values.translations?.ar?.content?.description.length} / 500 حرف
              </FieldDescription>
            </FieldContent>
          </Field>
        </FieldGroup>
      </FieldSet>
      <div className="mt-6 flex justify-center gap-3">
        <Button
          type="submit"
          disabled={isPending || !isValid || (mode === "edit" && !dirty)}
          className="w-full max-w-sm cursor-pointer"
        >
          {isPending
            ? mode === "edit"
              ? "Updating..."
              : "Creating..."
            : mode === "edit"
            ? "Update Project"
            : "Create Project"}
        </Button>
        <Button variant="outline" asChild>
          <Link href="/admin/projects">Cancel</Link>
        </Button>
      </div>
    </form>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/Projects.jsx
============================================================
"use client";

import { useState } from "react";
import { useProjects } from "@/hooks/useProjects";
import { ProjectsSkeleton } from "./skeleton";
import { ProjectsHeader, ProjectsTable, ProjectsDialog } from "./projects";

export default function Projects() {
  const { data: projects = [], isLoading } = useProjects();
  const [dialog, setDialog] = useState({ open: false, project: null });
  if (isLoading) return <ProjectsSkeleton />;
  return (
    <>
      <ProjectsHeader />
      <ProjectsTable projects={projects} setDialog={setDialog} />
      <ProjectsDialog dialog={dialog} setDialog={setDialog} />
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/_components/ProjectsWrapper.jsx
============================================================
import { AdminRoute } from "@/components/auth/AdminRoute";
import { Button } from "@/components/ui/button";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { ChevronLeft } from "lucide-react";
import Link from "next/link";

export default function ProjectsWrapper({ children }) {
  return (
    <AdminRoute>
      <div className="min-h-screen bg-neutral-50">
        <main className="max-w-7xl mx-auto px-4 py-8 space-y-8">
          <div className="bg-white rounded-lg shadow-md p-6">
            <div className="max-w-7xl mx-auto py-4 flex gap-2 items-center">
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="ghost"
                    size="icon"
                    className="cursor-pointer"
                    asChild
                  >
                    <Link href="/dashboard">
                      <ChevronLeft />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Back to Dashboard</p>
                </TooltipContent>
              </Tooltip>
              <h1 className="text-2xl font-bold">Project Management</h1>
            </div>
            {children}
          </div>
        </main>
      </div>
    </AdminRoute>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/[id]/edit/page.js
============================================================
import { Button } from "@/components/ui/button";
import { ProjectForm } from "../../_components";
import Link from "next/link";
import { ChevronLeft } from "lucide-react";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";

export default async function EditProjectPage({ params }) {
  const { id } = await params;
  return (
    <>
      <div className="flex gap-2 items-center mb-6">
        <Tooltip>
          <TooltipTrigger asChild>
            <Button
              variant="ghost"
              size="icon"
              className="cursor-pointer"
              asChild
            >
              <Link href="/admin/projects">
                <ChevronLeft />
              </Link>
            </Button>
          </TooltipTrigger>
          <TooltipContent>
            <p>Back to Projects</p>
          </TooltipContent>
        </Tooltip>
        <h2 className="text-xl font-bold">Edit project</h2>
      </div>
      <div className="p-5 flex justify-center items-center">
        <div className="max-w-3xl w-full">
          <ProjectForm mode="edit" projectId={id} />
        </div>
      </div>
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/[id]/page.js
============================================================
import {
  dehydrate,
  HydrationBoundary,
  QueryClient,
} from "@tanstack/react-query";
import { Project } from "../_components";
import { getProject } from "@/requests/projects";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import Link from "next/link";
import { ChevronLeft } from "lucide-react";
import { Button } from "@/components/ui/button";

export default async function ProjectPage({ params }) {
  const { id } = await params;
  const queryClient = new QueryClient();
  await queryClient.prefetchQuery({
    queryKey: ["projects", id],
    queryFn: () => getProject(id),
  });
  return (
    <HydrationBoundary state={dehydrate(queryClient)}>
      <div className="flex gap-2 items-center mb-4">
        <Tooltip>
          <TooltipTrigger asChild>
            <Button
              variant="ghost"
              size="icon"
              className="cursor-pointer"
              asChild
            >
              <Link href=".">
                <ChevronLeft />
              </Link>
            </Button>
          </TooltipTrigger>
          <TooltipContent>
            <p>Back to Projects</p>
          </TooltipContent>
        </Tooltip>
        <h2 className="text-xl font-bold">Project details</h2>
      </div>
      <Project projectId={id} />
    </HydrationBoundary>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/create/page.js
============================================================
import { ProjectForm } from "../_components";

export default function CreateProjectPage() {
  return (
    <div className="p-5 flex justify-center items-center">
      <div className="max-w-3xl w-full">
        <ProjectForm mode="create" />
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/projects/layout.js
============================================================
import ProjectsWrapper from "./_components/ProjectsWrapper";

export default function ProjectsLayout({ children }) {
  return <ProjectsWrapper>{children}</ProjectsWrapper>;
}


============================================================
FILE: app/(dashboard)/admin/projects/page.js
============================================================
import {
  dehydrate,
  HydrationBoundary,
  QueryClient,
} from "@tanstack/react-query";
import { ProjectsSkeleton } from "./_components/skeleton";
import ProjectsTable from "./_components/Projects";
import { getProjects } from "@/requests/projects";
import { Suspense } from "react";

export default async function ProjectsPage() {
  const queryClient = new QueryClient();
  await queryClient.prefetchQuery({
    queryKey: ["projects"],
    queryFn: getProjects,
  });
  return (
    <HydrationBoundary state={dehydrate(queryClient)}>
      <Suspense fallback={<ProjectsSkeleton />}>
        <ProjectsTable />
      </Suspense>
    </HydrationBoundary>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/skeleton/index.js
============================================================
import UniversitySkeleton from "./UniversitySkeleton";
import UniversitiesSkeleton from "./UniversitiesSkeleton";
import UniversityFormSkeleton from "./UniversityFormSkeleton";

export { UniversitySkeleton, UniversitiesSkeleton, UniversityFormSkeleton };


============================================================
FILE: app/(dashboard)/admin/universities/_components/skeleton/UniversitiesSkeleton.jsx
============================================================
import { Skeleton } from "@/components/ui/skeleton";

export default function UniversitiesSkeleton() {
  return (
    <>
      <div className="flex justify-between items-center mb-6">
        <Skeleton className="h-7 w-24 rounded-md" />
        <Skeleton className="h-9 w-24 rounded-md bg-neutral-200" />
      </div>
      <div className="grid gap-4">
        <div className="flex justify-between items-center rounded-lg">
          {Array.from({ length: 5 }).map((_, i) => (
            <Skeleton
              key={i}
              className="h-[30px] w-[120px] bg-neutral-200 rounded-full"
            />
          ))}
        </div>
        {Array.from({ length: 3 }).map((_, rowIndex) => (
          <div
            key={rowIndex}
            className="flex justify-between items-center gap-4 border-b py-2"
          >
            {Array.from({ length: 5 }).map((_, cellIndex) => (
              <Skeleton
                key={cellIndex}
                className="h-[25px] w-[120px] rounded-full"
              />
            ))}
          </div>
        ))}
      </div>
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/skeleton/UniversityFormSkeleton.jsx
============================================================
import { Skeleton } from "@/components/ui/skeleton";

export default function UniversityFormSkeleton() {
  return (
    <div className="p-6 max-w-3xl mx-auto rounded-xl border bg-white shadow-sm space-y-4 animate-pulse">
      <Skeleton className="h-8 w-1/3 rounded bg-neutral-200" />
      {[...Array(7)].map((_, i) => {
        if (i === 4) {
          return (
            <div key={i} className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Skeleton className="h-8 w-1/4 rounded bg-neutral-200" />
                <Skeleton className="h-8 w-full rounded" />
              </div>
              <div className="space-y-2">
                <Skeleton className="h-8 w-1/4 rounded bg-neutral-200" />
                <Skeleton className="h-8 w-full rounded" />
              </div>
            </div>
          );
        }
        return (
          <div key={i} className="space-y-2">
            <Skeleton className="h-6 w-1/4 rounded bg-neutral-200" />
            <Skeleton className="h-10 w-full rounded" />
          </div>
        );
      })}
      <Skeleton className="h-px my-3 w-full" />
      <div dir="rtl" className="border-t pt-6 space-y-4">
        <Skeleton className="h-8 w-1/3 self-end rounded bg-neutral-200" />
        {[...Array(3)].map((_, i) => (
          <div key={i} className="space-y-2">
            <Skeleton className="h-6 w-1/4 rounded bg-neutral-200" />
            <Skeleton className="h-10 w-full rounded" />
          </div>
        ))}
      </div>
      <div className="w-full max-w-md mx-auto grid grid-cols-2 gap-3 pt-4">
        <Skeleton className="h-10 rounded-md bg-neutral-200" />
        <Skeleton className="h-10 rounded-md" />
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/skeleton/UniversitySkeleton.jsx
============================================================
import {
  Card,
  CardHeader,
  CardContent,
  CardTitle,
  CardDescription,
} from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import { Skeleton } from "@/components/ui/skeleton";

export default function UniversitySkeleton() {
  return (
    <Card className="w-full max-w-3xl mx-auto animate-in fade-in-50">
      <CardHeader className="flex gap-4 items-center">
        <div className="w-16 h-16 p-0.5 rounded-full overflow-hidden border shadow flex items-center justify-center">
          <Skeleton className="w-full h-full rounded-full bg-gray-200" />
        </div>
        <div className="flex-1 space-y-2">
          <CardTitle>
            <Skeleton className="h-6 w-40 bg-gray-200" />
          </CardTitle>
          <CardDescription>
            <Skeleton className="h-4 w-32" />
          </CardDescription>
        </div>
      </CardHeader>
      <CardContent className="space-y-6 text-muted-foreground">
        <div className="leading-relaxed space-y-3">
          <Skeleton className="h-4 w-3/4" />
          <Skeleton className="h-4 w-2/3" />
          <Skeleton className="h-4 w-1/2" />
        </div>
        <Separator className="my-6" />
        <div>
          <Skeleton className="h-5 w-1/4 mb-4 bg-gray-200" />
          <div dir="rtl" className="space-y-3 leading-relaxed">
            <Skeleton className="h-4 w-2/3 ml-auto" />
            <Skeleton className="h-4 w-1/2 ml-auto" />
            <Skeleton className="h-4 w-3/4 ml-auto" />
          </div>
        </div>
      </CardContent>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/universities/index.js
============================================================
import NoUniversity from "./NoUniversity";
import UniversitiesHeader from "./UniversitiesHeader";
import UniversitiesTable from "./UniversitiesTable";
import UniversitiesDialog from "./UniversitiesDialog";

export {
  NoUniversity,
  UniversitiesDialog,
  UniversitiesTable,
  UniversitiesHeader,
};


============================================================
FILE: app/(dashboard)/admin/universities/_components/universities/NoUniversity.jsx
============================================================
import {
  Card,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";

export default function NoUniversity({ msg = "" }) {
  return (
    <Card className="w-full max-w-3xl mx-auto">
      <CardHeader className="text-center gap-6">
        <CardTitle className="text-2xl">University not found</CardTitle>
        <CardDescription>
          {msg || "The requested university could not be found."}
        </CardDescription>
      </CardHeader>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/universities/UniversitiesDialog.jsx
============================================================
"use client";

import { Button } from "@/components/ui/button";
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
} from "@/components/ui/dialog";
import { useDeleteUniversity } from "@/hooks/useUniversities";

export default function UniversitiesDialog({ dialog, setDialog }) {
  const { mutate, isPending } = useDeleteUniversity();
  const handleCancelDialog = () => {
    setDialog({ open: false, university: null });
  };
  const handleConfirmDialog = () => {
    if (dialog.university?._id) {
      mutate(dialog.university._id, {
        onSuccess: () => setDialog({ open: false, university: null }),
      });
    }
  };
  return (
    <Dialog
      open={dialog.open}
      onOpenChange={(open) => setDialog((prev) => ({ ...prev, open }))}
    >
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Delete University</DialogTitle>
          <DialogDescription>
            Are you sure you want to permanently delete{" "}
            <span className="font-semibold">{dialog.university?.title}</span>?
            This action cannot be undone.
          </DialogDescription>
        </DialogHeader>
        <DialogFooter>
          <Button
            variant="outline"
            className="cursor-pointer"
            onClick={handleCancelDialog}
            disabled={isPending}
          >
            Cancel
          </Button>
          <Button
            variant="destructive"
            className="cursor-pointer"
            onClick={handleConfirmDialog}
            disabled={isPending}
          >
            {isPending ? "Deleting..." : "Confirm"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/universities/UniversitiesHeader.jsx
============================================================
import { Button } from "@/components/ui/button";
import Link from "next/link";

export default function UniversitiesHeader() {
  return (
    <div className="flex justify-between items-center mb-6">
      <h2 className="text-xl font-semibold">Universities</h2>
      <Button asChild>
        <Link href="universities/create">Add University</Link>
      </Button>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/universities/UniversitiesTable.jsx
============================================================
"use client";

import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { usePermissions } from "@/hooks/usePermissions";
import { useDeleteUniversity } from "@/hooks/useUniversities";
import { Pencil, ScanText, Trash2 } from "lucide-react";
import Link from "next/link";

export default function UniversitiesTable({ universities, setDialog }) {
  const { permissions } = usePermissions();
  const { isPending } = useDeleteUniversity();
  const handleOpenDialog = (university) => {
    setDialog({ open: true, university });
  };
  if (universities.length === 0) {
    return (
      <Card className="w-full max-w-3xl mx-auto">
        <CardHeader className="text-center gap-6">
          <CardTitle className="text-2xl">No Universities Found</CardTitle>
          <CardDescription>
            Click on "Add University" to create a new one.
          </CardDescription>
        </CardHeader>
      </Card>
    );
  }
  return (
    <Table>
      <TableHeader>
        <TableRow className="bg-slate-100">
          {["University Id", "Title", "Provider", "Status", "Actions"].map(
            (col) => (
              <TableHead key={col} className="font-bold pointer-events-none">
                {col}
              </TableHead>
            )
          )}
        </TableRow>
      </TableHeader>
      <TableBody>
        {universities.map(({ _id, title, by, status }) => (
          <TableRow key={_id}>
            <TableCell>{_id}</TableCell>
            <TableCell>{title}</TableCell>
            <TableCell>{by}</TableCell>
            <TableCell>
              <Badge
                variant="secondary"
                className={`${
                  status === "graduated"
                    ? "bg-green-100 text-green-700"
                    : "bg-yellow-100 text-yellow-800"
                }`}
              >
                {status === "graduated" ? "Graduated" : "In Progress"}
              </Badge>
            </TableCell>
            <TableCell className="space-x-2">
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button variant="outline" size="icon" asChild>
                    <Link
                      href={`universities/${_id}`}
                      className="text-gray-600 hover:text-gray-800"
                    >
                      <ScanText />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>View the university ({title})</p>
                </TooltipContent>
              </Tooltip>
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button variant="outline" size="icon" asChild>
                    <Link
                      href={`universities/${_id}/edit`}
                      className="text-blue-500 hover:text-blue-700"
                    >
                      <Pencil />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Edit the university ({title})</p>
                </TooltipContent>
              </Tooltip>
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="outline"
                    size="icon"
                    className="cursor-pointer text-red-500 hover:text-red-700"
                    onClick={() => handleOpenDialog({ _id, title })}
                    disabled={!permissions.canDeleteUniversity || isPending}
                  >
                    <Trash2 />
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Delete the university ({title})</p>
                </TooltipContent>
              </Tooltip>
            </TableCell>
          </TableRow>
        ))}
      </TableBody>
    </Table>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/validation/schema.js
============================================================
import * as Yup from "yup";

export const schema = Yup.object({
  logo: Yup.string()
    .url("Logo must be a valid URI")
    .required("Logo is required"),
  title: Yup.string()
    .min(2, "Title length must be at least 2 characters long")
    .max(100, "Title length must be less than or equal to 100 characters long")
    .required("Title is required"),
  by: Yup.string()
    .min(2, "Provider length must be at least 2 characters long")
    .max(
      100,
      "Provider length must be less than or equal to 100 characters long"
    )
    .required("Provider is required"),
  status: Yup.string()
    .oneOf(
      ["in-progress", "graduated"],
      "Status must be one of in-progress or graduated"
    )
    .required("Status is required"),
  startedAt: Yup.date().when("status", {
    is: "in-progress",
    then: (schema) => schema.required("Started at is required"),
    otherwise: (schema) =>
      schema
        .nullable()
        .transform((value, originalValue) =>
          originalValue === "" || originalValue === null ? null : value
        )
        .notRequired(),
  }),
  graduatedAt: Yup.date().when("status", {
    is: "graduated",
    then: (schema) => schema.required("Graduated at is required"),
    otherwise: (schema) =>
      schema
        .nullable()
        .transform((value, originalValue) =>
          originalValue === "" || originalValue === null ? null : value
        )
        .notRequired(),
  }),
  grade: Yup.string().when("status", {
    is: "graduated",
    then: (schema) => schema.required("Grade is required"),
    otherwise: (schema) => schema.notRequired().nullable(),
  }),
  skills: Yup.array()
    .of(Yup.string().min(1, "Skill cannot be empty"))
    .when("status", {
      is: "graduated",
      then: (schema) =>
        schema
          .min(1, "At least one skill is required for graduated status")
          .required("Skills are required"),
      otherwise: (schema) => schema.notRequired(),
    }),
  translations: Yup.object({
    ar: Yup.object({
      title: Yup.string()
        .min(2, "يجب أن يحتوي العنوان بالعربية على حرفين على الأقل")
        .max(100, "يجب ألا يتجاوز العنوان بالعربية 100 حرف")
        .nullable()
        .optional(),
      by: Yup.string()
        .min(2, "يجب أن يحتوي اسم الجهة بالعربية على حرفين على الأقل")
        .max(100, "يجب ألا يتجاوز اسم الجهة بالعربية 100 حرف")
        .nullable()
        .optional(),
      skills: Yup.array()
        .of(Yup.string().min(1, "يجب ألا تكون المهارة فارغة"))
        .optional(),
    }).optional(),
  }).optional(),
});


============================================================
FILE: app/(dashboard)/admin/universities/_components/index.js
============================================================
import Universities from "./Universities";
import University from "./University";
import UniversitiesWrapper from "./UniversitiesWrapper";
import UniversityForm from "./UniversityForm";

export { Universities, UniversitiesWrapper, University, UniversityForm };


============================================================
FILE: app/(dashboard)/admin/universities/_components/Universities.jsx
============================================================
"use client";

import { useUniversities } from "@/hooks/useUniversities";
import {
  UniversitiesHeader,
  UniversitiesTable,
  UniversitiesDialog,
} from "./universities";
import { useState } from "react";
import { UniversitiesSkeleton } from "./skeleton";

export default function Universities() {
  const { data: universities = [], isLoading } = useUniversities();
  const [dialog, setDialog] = useState({ open: false, university: null });
  if (isLoading) return <UniversitiesSkeleton />;
  return (
    <>
      <UniversitiesHeader />
      <UniversitiesTable universities={universities} setDialog={setDialog} />
      <UniversitiesDialog dialog={dialog} setDialog={setDialog} />
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/UniversitiesWrapper.jsx
============================================================
import { AdminRoute } from "@/components/auth/AdminRoute";
import { Button } from "@/components/ui/button";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { ChevronLeft } from "lucide-react";
import Link from "next/link";

export default function UniversitiesWrapper({ children }) {
  return (
    <AdminRoute>
      <div className="min-h-screen bg-neutral-50">
        <main className="max-w-7xl mx-auto px-4 py-8 space-y-8">
          <div className="bg-white rounded-lg shadow-md p-6">
            <div className="max-w-7xl mx-auto py-4 flex gap-2 items-center">
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="ghost"
                    size="icon"
                    className="cursor-pointer"
                    asChild
                  >
                    <Link href="/dashboard">
                      <ChevronLeft />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Back to Dashboard</p>
                </TooltipContent>
              </Tooltip>
              <h1 className="text-2xl font-bold">University Management</h1>
            </div>
            {children}
          </div>
        </main>
      </div>
    </AdminRoute>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/University.jsx
============================================================
"use client";

import Image from "next/image";
import { formatDate } from "@/utils/formatDate";
import {
  Card,
  CardContent,
  CardHeader,
  CardTitle,
  CardDescription,
} from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import { NoUniversity } from "./universities";
import { UniversitySkeleton } from "./skeleton";
import { useUniversity } from "@/hooks/useUniversities";

export default function University({ universityId }) {
  const { data: university, isLoading } = useUniversity(universityId);
  if (isLoading) return <UniversitySkeleton />;
  if (!university) return <NoUniversity />;
  const {
    by,
    grade,
    logo,
    skills,
    startedAt,
    graduatedAt,
    status,
    title,
    translations: {
      ar: { by: arBy, skills: arSkills, title: arTitle },
    },
  } = university;
  console.log(arBy, arTitle, arSkills);
  return (
    <Card className="w-full max-w-3xl mx-auto">
      <CardHeader className="flex gap-4">
        <div className="w-16 h-16 relative rounded-full overflow-hidden border shadow">
          <Image
            src={logo}
            alt={`${by} logo`}
            fill
            unoptimized
            className="object-contain p-0.5 rounded-full"
          />
        </div>
        <div>
          <CardTitle className="text-3xl font-bold">{title}</CardTitle>
          <CardDescription className="text-base text-muted-foreground">
            {by}
          </CardDescription>
        </div>
      </CardHeader>
      <CardContent className="space-y-6 text-muted-foreground">
        <div className="leading-relaxed space-y-2">
          {status === "graduated" ? (
            <>
              <p>
                This learner has successfully graduated from{" "}
                <span className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                  {by}
                </span>
                {graduatedAt && (
                  <>
                    {" "}
                    on{" "}
                    <time className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                      {formatDate(graduatedAt)}
                    </time>
                    .
                  </>
                )}
              </p>
              {grade && (
                <p>
                  They achieved a final grade of{" "}
                  <span className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                    {grade}
                  </span>
                  .
                </p>
              )}
              {skills?.length > 0 && (
                <p>
                  During their studies, they developed skills in{" "}
                  <span className="font-medium text-foreground">
                    {skills.join(", ")}
                  </span>
                  .
                </p>
              )}
            </>
          ) : (
            <>
              <p>
                This learner is currently studying at{" "}
                <span className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                  {by}
                </span>
                {startedAt && (
                  <>
                    {" "}
                    since{" "}
                    <time className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                      {formatDate(startedAt)}
                    </time>
                    .
                  </>
                )}
              </p>
              <p>They are still progressing toward their graduation.</p>
            </>
          )}
        </div>
        {(arBy || arSkills.length > 0 || arTitle) && (
          <>
            <Separator className="my-6" />
            <h3 className="text-xl text-foreground font-semibold mb-4">
              Arabic Translations
            </h3>
            <div>
              <div dir="rtl" className="space-y-3 leading-relaxed">
                {arTitle && (
                  <h4 className="text-2xl font-bold text-foreground mt-4">
                    {arTitle}
                  </h4>
                )}
                {status === "graduated" ? (
                  <>
                    <p>
                      تخرّج هذا الطالب من{" "}
                      <span className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                        {arBy || by}
                      </span>
                      {graduatedAt && ` في ${formatDate(graduatedAt)}.`}
                    </p>
                    {grade && (
                      <p>
                        وحصل على معدل{" "}
                        <span className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                          {grade}
                        </span>
                        .
                      </p>
                    )}
                    {arSkills.length > 0 && (
                      <p>
                        وخلال دراسته اكتسب مهارات في{" "}
                        <span className="font-medium text-foreground">
                          {arSkills.join("، ")}
                        </span>
                        .
                      </p>
                    )}
                  </>
                ) : (
                  <>
                    <p>
                      هذا الطالب يدرس حالياً في{" "}
                      <span className="font-medium text-foreground underline underline-offset-4 decoration-dotted">
                        {arBy}
                      </span>
                      {startedAt && ` منذ ${formatDate(startedAt)}.`}
                    </p>
                    <p>وما زال في طريقه نحو التخرّج.</p>
                  </>
                )}
              </div>
            </div>
          </>
        )}
      </CardContent>
    </Card>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/_components/UniversityForm.jsx
============================================================
"use client";

import { useEffect, useState } from "react";
import { useRouter } from "next/navigation";
import { useFormik } from "formik";
import Link from "next/link";
import { schema } from "./validation/schema";
import { useUniversity, useUpsertUniversity } from "@/hooks/useUniversities";
import {
  Field,
  FieldError,
  FieldGroup,
  FieldLabel,
  FieldLegend,
  FieldSet,
} from "@/components/ui/field";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { DateInput } from "@/components/shared/DatePicker";
import { X } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import UniversityFormSkeleton from "./skeleton/UniversityFormSkeleton";
import { NoUniversity } from "./universities";

export const initialUniversity = {
  logo: "",
  title: "",
  by: "",
  status: "in-progress",
  startedAt: "",
  graduatedAt: "",
  grade: "",
  skills: [],
  translations: {
    ar: {
      title: "",
      by: "",
      skills: [],
    },
  },
};

export default function UniversityForm({ mode, universityId }) {
  const router = useRouter();
  const [skillInput, setSkillInput] = useState("");
  const [arSkillInput, setArSkillInput] = useState("");
  const [initialValues, setInitialValues] = useState(initialUniversity);
  const {
    data: university,
    isLoading,
    isError,
    error,
  } = useUniversity(universityId);
  const { mutate, isPending } = useUpsertUniversity(mode);
  useEffect(() => {
    if (mode === "edit" && university) {
      setInitialValues(university);
    } else if (mode === "create") {
      setInitialValues(initialUniversity);
    }
  }, [university, mode]);
  const {
    handleSubmit,
    getFieldProps,
    setFieldValue,
    handleBlur,
    values,
    touched,
    errors,
    isValid,
    dirty,
  } = useFormik({
    enableReinitialize: true,
    initialValues,
    validationSchema: schema,
    onSubmit: (values) => {
      if (mode === "edit") {
        const { _id, updatedAt, createdAt, __v, ...rest } = values;
        let data =
          rest.status === "in-progress"
            ? { ...rest, graduatedAt: "", grade: "", skills: [] }
            : { ...rest, startedAt: "" };
        mutate(
          { id: universityId, data },
          { onSuccess: () => router.push("/admin/universities") }
        );
      } else {
        mutate(values, { onSuccess: () => router.push("/admin/universities") });
      }
    },
  });
  const handleSkillsKeyDown = (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      const skill = skillInput.trim();
      if (skill && !values.skills.includes(skill)) {
        setFieldValue("skills", [...values.skills, skill]);
        setSkillInput("");
      }
    }
  };
  const removeSkill = (indexToRemove) => {
    const newSkills = values.skills.filter(
      (_, index) => index !== indexToRemove
    );
    setFieldValue("skills", newSkills);
  };
  const handleArSkillsKeyDown = (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      const skill = arSkillInput.trim();
      if (skill && !values.translations.ar.skills.includes(skill)) {
        setFieldValue("translations.ar.skills", [
          ...values.translations.ar.skills,
          skill,
        ]);
        setArSkillInput("");
      }
    }
  };
  const removeArSkill = (indexToRemove) => {
    const newSkills = values.translations.ar.skills.filter(
      (_, index) => index !== indexToRemove
    );
    setFieldValue("translations.ar.skills", newSkills);
  };
  if (isLoading) return <UniversityFormSkeleton />;
  if (isError) return <NoUniversity msg={error.message} />;
  return (
    <form
      onSubmit={handleSubmit}
      noValidate
      className="p-6 space-y-6 outline shadow-md rounded-lg bg-white"
    >
      <FieldSet>
        <FieldGroup>
          <FieldLegend>
            {mode === "edit" ? "Update" : "Create a New"} University
          </FieldLegend>
          <Field data-invalid={!!(errors.logo && touched.logo)}>
            <FieldLabel htmlFor="logo">
              Logo URL <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="url"
              id="logo"
              placeholder="type logo URL here"
              aria-invalid={!!(errors.logo && touched.logo)}
              {...getFieldProps("logo")}
            />
            {errors.logo && touched.logo && (
              <FieldError>{errors.logo}</FieldError>
            )}
          </Field>
          <Field data-invalid={!!(errors.title && touched.title)}>
            <FieldLabel htmlFor="title">
              Title <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="text"
              id="title"
              placeholder="type title here"
              aria-invalid={!!(errors.title && touched.title)}
              {...getFieldProps("title")}
            />
            {errors.title && touched.title && (
              <FieldError>{errors.title}</FieldError>
            )}
          </Field>
          <Field data-invalid={!!(errors.by && touched.by)}>
            <FieldLabel htmlFor="by">
              Institution <span className="text-red-500">*</span>
            </FieldLabel>
            <Input
              type="text"
              id="by"
              placeholder="type institution here"
              aria-invalid={!!(errors.by && touched.by)}
              {...getFieldProps("by")}
            />
            {errors.by && touched.by && <FieldError>{errors.by}</FieldError>}
          </Field>
          <Field data-invalid={!!(touched.status && errors.status)}>
            <FieldLabel htmlFor="status">
              Status <span className="text-red-500">*</span>
            </FieldLabel>
            <Select
              value={values.status}
              onValueChange={(value) => {
                console.log(value);
                setFieldValue("status", value || university?.status);
              }}
            >
              <SelectTrigger
                id="status"
                className="cursor-pointer"
                aria-invalid={!!(touched.status && errors.status)}
              >
                <SelectValue placeholder="Choose current status" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="in-progress" className="cursor-pointer">
                  In Progress
                </SelectItem>
                <SelectItem value="graduated" className="cursor-pointer">
                  Graduated
                </SelectItem>
              </SelectContent>
            </Select>
            {errors.status && touched.status && (
              <FieldError>{errors.status}</FieldError>
            )}
          </Field>
          <div className="grid grid-cols-2 gap-4">
            <DateInput
              name="startedAt"
              label="Started At"
              disabled={values.status === "graduated" || values.status === ""}
              setFieldValue={setFieldValue}
              values={values}
              touched={touched}
              errors={errors}
            />
            <DateInput
              name="graduatedAt"
              label="Graduated At"
              disabled={values.status === "in-progress" || values.status === ""}
              setFieldValue={setFieldValue}
              values={values}
              touched={touched}
              errors={errors}
            />
          </div>
          <Field data-invalid={!!(errors.grade && touched.grade)}>
            <FieldLabel htmlFor="grade">
              Grade{" "}
              {values.status === "graduated" && (
                <span className="text-red-500"> *</span>
              )}
            </FieldLabel>
            <Input
              type="text"
              id="grade"
              placeholder="type grade here"
              className={
                values.status === "in-progress"
                  ? "bg-neutral-100 placeholder:font-medium placeholder:text-gray-900"
                  : null
              }
              disabled={values.status === "in-progress" || values.status === ""}
              aria-invalid={!!(errors.grade && touched.grade)}
              {...getFieldProps("grade")}
            />
            {errors.grade && touched.grade && (
              <FieldError>{errors.grade}</FieldError>
            )}
          </Field>
          <Field data-invalid={!!(errors.skills && touched.skills)}>
            <FieldLabel htmlFor="skills">
              Skills{" "}
              {values.status === "graduated" && (
                <span className="text-red-500"> *</span>
              )}
            </FieldLabel>
            <div className="flex gap-1.5 flex-wrap">
              {values.skills?.map((skill, index) => (
                <Badge key={skill} className="ps-3 pe-1 py-1 gap-1">
                  <span>{skill}</span>
                  <Button
                    type="button"
                    onClick={() => removeSkill(index)}
                    disabled={
                      values.status === "in-progress" || values.status === ""
                    }
                    className="w-6 h-6 rounded-full hover:text-neutral-900 hover:bg-neutral-100 cursor-pointer"
                    aria-label={`Remove ${skill}`}
                  >
                    <X className="w-1 h-1" />
                  </Button>
                </Badge>
              ))}
              <Input
                type="text"
                id="skills"
                name="skills"
                value={skillInput}
                disabled={
                  values.status === "in-progress" || values.status === ""
                }
                className={`flex-1 min-w-[200px] ${
                  values.status === "in-progress"
                    ? "bg-neutral-100 placeholder:font-medium placeholder:text-gray-900"
                    : null
                }`}
                onBlur={handleBlur}
                onChange={(e) => setSkillInput(e.target.value)}
                onKeyDown={(e) => handleSkillsKeyDown(e)}
                aria-invalid={!!(errors.skills && touched.skills)}
                placeholder="type a tool and press Enter"
              />
            </div>
            {touched.skills && errors.skills && (
              <FieldError>{errors.skills}</FieldError>
            )}
          </Field>
        </FieldGroup>
      </FieldSet>
      <FieldSet>
        <FieldGroup>
          <FieldLegend className="mt-4" dir="rtl">
            الترجمة العربية
          </FieldLegend>
          <Field
            dir="rtl"
            data-invalid={
              !!(
                errors.translations?.ar?.title &&
                touched.translations?.ar?.title
              )
            }
          >
            <FieldLabel htmlFor="arabicTitle">العنوان</FieldLabel>
            <Input
              type="text"
              id="arabicTitle"
              placeholder="ادخل العنوان هنا"
              {...getFieldProps("translations.ar.title")}
            />
            {errors.translations?.ar?.title &&
              touched.translations?.ar?.title && (
                <FieldError>{errors.translations.ar.title}</FieldError>
              )}
          </Field>
          <Field
            dir="rtl"
            data-invalid={
              !!(errors.translations?.ar?.by && touched.translations?.ar?.by)
            }
          >
            <FieldLabel htmlFor="arabicBy">المعهد/الجامعة</FieldLabel>
            <Input
              type="text"
              id="arabicBy"
              placeholder="ادخل اسم المعهد/الجامعة هنا"
              {...getFieldProps("translations.ar.by")}
            />
            {errors.translations?.ar?.by && touched.translations?.ar?.by && (
              <FieldError>{errors.translations.ar.by}</FieldError>
            )}
          </Field>
          <Field
            dir="rtl"
            data-invalid={
              !!(
                errors.translations?.ar?.skills &&
                touched.translations?.ar?.skills
              )
            }
          >
            <FieldLabel htmlFor="skills">المهارات</FieldLabel>
            <div className="flex gap-1.5 flex-wrap">
              {values.translations?.ar?.skills?.map((skill, index) => (
                <Badge key={skill} className="pe-3 ps-1 py-1 gap-1">
                  <span>{skill}</span>
                  <Button
                    type="button"
                    onClick={() => removeArSkill(index)}
                    className="w-6 h-6 rounded-full hover:text-neutral-900 hover:bg-neutral-100 cursor-pointer"
                    aria-label={`Remove ${skill}`}
                  >
                    <X className="w-1 h-1" />
                  </Button>
                </Badge>
              ))}
              <Input
                type="text"
                id="skills"
                name="skills"
                value={arSkillInput}
                disabled={
                  values.status === "in-progress" || values.status === ""
                }
                className={`flex-1 min-w-[200px] ${
                  values.status === "in-progress"
                    ? "bg-neutral-100 placeholder:font-medium placeholder:text-gray-900"
                    : null
                }`}
                onBlur={handleBlur}
                onChange={(e) => setArSkillInput(e.target.value)}
                onKeyDown={(e) => handleArSkillsKeyDown(e)}
                aria-invalid={
                  !!(
                    errors.translations?.ar?.skills &&
                    touched.translations?.ar?.skills
                  )
                }
                placeholder="ادخل المهارة واضغط Enter"
              />
            </div>
            {touched.translations?.ar?.skills &&
              errors.translations?.ar?.skills && (
                <FieldError>{errors.translations?.ar?.skills}</FieldError>
              )}
          </Field>
        </FieldGroup>
      </FieldSet>
      <div className="mt-6 flex justify-center gap-3">
        <Button
          type="submit"
          disabled={isPending || !isValid || (mode === "edit" && !dirty)}
          className="w-full max-w-sm cursor-pointer"
        >
          {isPending
            ? mode === "edit"
              ? "Updating..."
              : "Creating..."
            : mode === "edit"
            ? "Update University"
            : "Create University"}
        </Button>
        <Button variant="outline" asChild>
          <Link href="/admin/universities">Cancel</Link>
        </Button>
      </div>
    </form>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/[id]/edit/page.js
============================================================
import { Button } from "@/components/ui/button";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { UniversityForm } from "../../_components";
import { ChevronLeft } from "lucide-react";
import Link from "next/link";

export default async function EditUniversityPage({ params }) {
  const { id } = await params;
  return (
    <>
      <div className="flex gap-2 items-center mb-6">
        <Tooltip>
          <TooltipTrigger asChild>
            <Button
              variant="ghost"
              size="icon"
              className="cursor-pointer"
              asChild
            >
              <Link href="/admin/universities">
                <ChevronLeft />
              </Link>
            </Button>
          </TooltipTrigger>
          <TooltipContent>
            <p>Back to Universities</p>
          </TooltipContent>
        </Tooltip>
        <h2 className="text-xl font-bold">Edit University</h2>
      </div>
      <div className="p-5 flex justify-center items-center">
        <div className="max-w-3xl w-full">
          <UniversityForm mode="edit" universityId={id} />
        </div>
      </div>
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/[id]/page.js
============================================================
import {
  dehydrate,
  HydrationBoundary,
  QueryClient,
} from "@tanstack/react-query";
import { getUniversity } from "@/requests/universities";
import { University } from "../_components";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { Button } from "@/components/ui/button";
import { ChevronLeft } from "lucide-react";
import Link from "next/link";

export default async function UniversityPage({ params }) {
  const queryClient = new QueryClient();
  const { id } = await params;
  await queryClient.prefetchQuery({
    queryKey: ["universities", id],
    queryFn: () => getUniversity(id),
  });
  return (
    <HydrationBoundary state={dehydrate(queryClient)}>
      <div className="flex gap-2 items-center mb-4">
        <Tooltip>
          <TooltipTrigger asChild>
            <Button
              variant="ghost"
              size="icon"
              className="cursor-pointer"
              asChild
            >
              <Link href=".">
                <ChevronLeft />
              </Link>
            </Button>
          </TooltipTrigger>
          <TooltipContent>
            <p>Back to Universities</p>
          </TooltipContent>
        </Tooltip>
        <h2 className="text-xl font-bold">University details</h2>
      </div>
      <University universityId={id} />
    </HydrationBoundary>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/create/page.js
============================================================
import { UniversityForm } from "../_components";

export default function CreateUniversityPage() {
  return (
    <div className="p-5 flex justify-center items-center">
      <div className="max-w-3xl w-full">
        <UniversityForm mode="create" />
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/universities/layout.js
============================================================
import { UniversitiesWrapper } from "./_components";

export default function UniversitiesLayout({ children }) {
  return <UniversitiesWrapper>{children}</UniversitiesWrapper>;
}


============================================================
FILE: app/(dashboard)/admin/universities/page.js
============================================================
import {
  dehydrate,
  HydrationBoundary,
  QueryClient,
} from "@tanstack/react-query";
import { getUniversities } from "@/requests/universities";
import { Universities } from "./_components";

export default async function UniversitiesPage() {
  const queryClient = new QueryClient();
  await queryClient.prefetchQuery({
    queryKey: ["universities"],
    queryFn: getUniversities,
  });
  return (
    <HydrationBoundary state={dehydrate(queryClient)}>
      <Universities />
    </HydrationBoundary>
  );
}


============================================================
FILE: app/(dashboard)/admin/users/_components/skeletons/index.js
============================================================
import UsersSkeleton from "./UsersSkeleton";

export { UsersSkeleton };


============================================================
FILE: app/(dashboard)/admin/users/_components/skeletons/UsersSkeleton.jsx
============================================================
import { Skeleton } from "@/components/ui/skeleton";

export default function UsersSkeleton() {
  return (
    <>
      <div className="flex justify-between items-center mb-6">
        <Skeleton className="h-7 w-24 rounded-md" />
        <Skeleton className="h-9 w-24 rounded-md bg-neutral-200" />
      </div>
      <div className="mb-4">
        <Skeleton className="h-10 rounded-md" />
      </div>
      <div className="grid gap-4">
        <div className="flex justify-between items-center rounded-lg">
          {Array.from({ length: 6 }).map((_, i) => (
            <Skeleton
              key={i}
              className="h-[30px] w-[120px] bg-neutral-200 rounded-full"
            />
          ))}
        </div>
        {Array.from({ length: 3 }).map((_, rowIndex) => (
          <div
            key={rowIndex}
            className="flex justify-between items-center gap-4 border-b py-2"
          >
            {Array.from({ length: 6 }).map((_, cellIndex) => (
              <Skeleton
                key={cellIndex}
                className="h-[25px] w-[120px] rounded-full"
              />
            ))}
          </div>
        ))}
      </div>
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/users/_components/users/index.js
============================================================
import UsersHeader from "./UsersHeader";
import UsersTable from "./UsersTable";
import UsersDialog from "./UsersDialog";

export { UsersHeader, UsersTable, UsersDialog };


============================================================
FILE: app/(dashboard)/admin/users/_components/users/UsersDialog.jsx
============================================================
import { Button } from "@/components/ui/button";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Input } from "@/components/ui/input";
import { useBanUser, useRemoveUser } from "@/hooks/useUsers";

export default function UsersDialog({ dialog, setDialog }) {
  const banUserMutation = useBanUser();
  const removeUserMutation = useRemoveUser();
  const handleConfirmDialog = () => {
    const { type, user: targetUser, reason } = dialog;
    if (!targetUser) return;
    switch (type) {
      case "ban":
        banUserMutation.mutate(
          { userId: targetUser.id, banReason: reason },
          {
            onSuccess: () => setDialog({ ...dialog, open: false }),
          }
        );
        break;
      case "remove":
        removeUserMutation.mutate(targetUser.id, {
          onSuccess: () => setDialog({ ...dialog, open: false }),
        });
        break;
    }
  };
  const handleCancelDialog = () => {
    setDialog({ ...dialog, open: false, reason: "" });
  };
  return (
    <Dialog
      open={dialog.open}
      onOpenChange={(open) => setDialog({ ...dialog, open })}
    >
      <DialogContent>
        <DialogHeader>
          <DialogTitle>
            {dialog.type === "ban" && "Ban User"}
            {dialog.type === "remove" && "Remove User"}
          </DialogTitle>
          <DialogDescription>
            {dialog.type === "ban" &&
              `Provide a reason to ban ${dialog.user?.name}.`}
            {dialog.type === "remove" &&
              `Are you sure you want to permanently remove ${dialog.user?.name}?`}
          </DialogDescription>
        </DialogHeader>
        {dialog.type === "ban" && (
          <div className="my-4">
            <Input
              placeholder="Enter ban reason"
              value={dialog.reason}
              onChange={(e) => setDialog({ ...dialog, reason: e.target.value })}
            />
          </div>
        )}
        <DialogFooter>
          <Button
            variant="outline"
            className="cursor-pointer"
            onClick={handleCancelDialog}
            disabled={banUserMutation.isPending || removeUserMutation.isPending}
          >
            Cancel
          </Button>
          <Button
            variant="destructive"
            className="cursor-pointer"
            onClick={handleConfirmDialog}
            disabled={banUserMutation.isPending || removeUserMutation.isPending}
          >
            {banUserMutation.isPending
              ? "Banning..."
              : removeUserMutation.isPending
              ? "Deleting..."
              : "Confirm"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}


============================================================
FILE: app/(dashboard)/admin/users/_components/users/UsersHeader.jsx
============================================================
"use client";

import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { useEffect, useState } from "react";
import Link from "next/link";

export default function UsersHeader({ setDebouncedSearch }) {
  const [searchInput, setSearchInput] = useState("");
  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedSearch(searchInput);
    }, 1000);
    return () => clearTimeout(timer);
  }, [searchInput]);
  return (
    <>
      <div className="flex justify-between items-center mb-6">
        <h2 className="text-xl font-semibold">Users</h2>
        <Button className="cursor-pointer" asChild>
          <Link href="users/create">Add user</Link>
        </Button>
      </div>
      <div className="mb-4">
        <Input
          type="text"
          placeholder="Search users by email..."
          value={searchInput}
          onChange={(e) => setSearchInput(e.target.value)}
        />
      </div>
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/users/_components/users/UsersTable.jsx
============================================================
"use client";

import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Card, CardDescription, CardHeader } from "@/components/ui/card";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { usePermissions } from "@/hooks/usePermissions";
import {
  useUpdateUserRole,
  useBanUser,
  useUnbanUser,
  useRemoveUser,
} from "@/hooks/useUsers";
import { LockKeyhole, LockKeyholeOpen, Trash2 } from "lucide-react";

export default function UsersTable({ users, setDialog }) {
  const { permissions, user } = usePermissions();
  const setRoleMutation = useUpdateUserRole();
  const banUserMutation = useBanUser();
  const unbanUserMutation = useUnbanUser();
  const removeUserMutation = useRemoveUser();
  const canModifyUser = (targetUser) => {
    return permissions.canManageUsers && user?.id !== targetUser.id;
  };
  const handleOpenDialog = (type, targetUser) => {
    setDialog({
      type,
      open: true,
      user: targetUser,
      reason: "",
    });
  };
  if (users.length === 0) {
    return (
      <Card className="w-full max-w-3xl mx-auto">
        <CardHeader className="text-center gap-6">
          <CardTitle className="text-2xl">No Users Found</CardTitle>
          <CardDescription>
            {debouncedSearch && "There is no results matching your search."}
          </CardDescription>
        </CardHeader>
      </Card>
    );
  }
  return (
    <Table>
      <TableHeader>
        <TableRow className="bg-slate-100">
          {["User Id", "Name", "Email", "Role", "Status", "Actions"].map(
            (col) => (
              <TableHead key={col} className="font-bold pointer-events-none">
                {col}
              </TableHead>
            )
          )}
        </TableRow>
      </TableHeader>
      <TableBody>
        {users.map((user) => (
          <TableRow key={user.id}>
            <TableCell>{user.id}</TableCell>
            <TableCell>{user.name}</TableCell>
            <TableCell>{user.email}</TableCell>
            <TableCell>
              <Select
                value={user.role || "user"}
                onValueChange={(value) =>
                  setRoleMutation.mutate({ userId: user.id, role: value })
                }
                disabled={setRoleMutation.isPending}
              >
                <SelectTrigger className="cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed">
                  <SelectValue placeholder="Select user's role" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="admin" className="cursor-pointer">
                    Admin
                  </SelectItem>
                  <SelectItem value="user" className="cursor-pointer">
                    User
                  </SelectItem>
                </SelectContent>
              </Select>
            </TableCell>
            <TableCell>
              {user.banned ? (
                <Tooltip>
                  <TooltipTrigger>
                    <Badge
                      variant="destructive"
                      className="bg-red-100 text-red-700"
                    >
                      Banned
                    </Badge>
                  </TooltipTrigger>
                  <TooltipContent>
                    <p>Ban reason is {user.banReason}</p>
                  </TooltipContent>
                </Tooltip>
              ) : user.emailVerified ? (
                <Badge
                  variant="secondary"
                  className="bg-green-100 text-green-700"
                >
                  Active
                </Badge>
              ) : (
                <Badge
                  variant="secondary"
                  className="bg-yellow-100 text-yellow-800"
                >
                  Not Verified
                </Badge>
              )}
            </TableCell>
            <TableCell className="flex gap-2 items-center">
              {user.banned ? (
                <Tooltip>
                  <TooltipTrigger asChild>
                    <Button
                      variant="outline"
                      className="cursor-pointer text-green-600 hover:text-green-700"
                      disabled={
                        !canModifyUser(user) || unbanUserMutation.isPending
                      }
                      onClick={() => unbanUserMutation.mutate(user.id)}
                    >
                      <LockKeyholeOpen />
                    </Button>
                  </TooltipTrigger>
                  <TooltipContent>
                    <p>Unban {user.name}</p>
                  </TooltipContent>
                </Tooltip>
              ) : (
                <Tooltip>
                  <TooltipTrigger asChild>
                    <Button
                      variant="outline"
                      className="cursor-pointer text-red-500 hover:text-red-600"
                      disabled={
                        !canModifyUser(user) || banUserMutation.isPending
                      }
                      onClick={() => handleOpenDialog("ban", user)}
                    >
                      <LockKeyhole />
                    </Button>
                  </TooltipTrigger>
                  <TooltipContent>
                    <p>Ban {user.name}</p>
                  </TooltipContent>
                </Tooltip>
              )}
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="outline"
                    className="cursor-pointer"
                    disabled={
                      !canModifyUser(user) || removeUserMutation.isPending
                    }
                    onClick={() => handleOpenDialog("remove", user)}
                  >
                    <Trash2 className="text-red-500" />
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Remove {user.name}</p>
                </TooltipContent>
              </Tooltip>
            </TableCell>
          </TableRow>
        ))}
      </TableBody>
    </Table>
  );
}


============================================================
FILE: app/(dashboard)/admin/users/_components/validation/schema.js
============================================================
import * as Yup from "yup";

export const schema = Yup.object({
  name: Yup.string()
    .min(2, "Name must be at least 2 characters")
    .required("Name is required"),
  email: Yup.string()
    .email("Invalid email address")
    .required("Email is required"),
  password: Yup.string()
    .min(8, "Password must be at least 8 characters")
    .matches(
      /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,
      "Password must contain at least one uppercase letter, one lowercase letter, and one number"
    )
    .required("Password is required"),
  role: Yup.string()
    .oneOf(["user", "admin"], "Invalid role")
    .required("Role is required"),
});


============================================================
FILE: app/(dashboard)/admin/users/_components/index.js
============================================================
import UsersWrapper from "./UsersWrapper";
import UserForm from "./UserForm";
import Users from "./Users";

export { UsersWrapper, UserForm, Users };


============================================================
FILE: app/(dashboard)/admin/users/_components/UserForm.jsx
============================================================
"use client";

import { useFormik } from "formik";
import Link from "next/link";
import { Field, FieldError, FieldLabel } from "@/components/ui/field";
import { Input } from "@/components/ui/input";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Button } from "@/components/ui/button";
import { useCreateUser } from "@/hooks/useUsers";
import { schema } from "./validation/schema";
import { Eye, EyeOff } from "lucide-react";
import { useState } from "react";

export default function UserForm() {
  const [showPassword, setShowPassword] = useState(false);
  const { mutate, isPending } = useCreateUser();
  const {
    handleSubmit,
    getFieldProps,
    setFieldValue,
    values,
    touched: { name: tName, email: tEmail, password: tPassword, role: tRole },
    errors: { name: eName, email: eEmail, password: ePassword, role: eRole },
    isValid,
  } = useFormik({
    initialValues: {
      name: "",
      email: "",
      password: "",
      role: "user",
    },
    validationSchema: schema,
    onSubmit: (values) => mutate(values),
  });
  return (
    <form
      onSubmit={handleSubmit}
      noValidate
      className="p-6 space-y-6 outline shadow-md rounded-lg bg-white"
    >
      <Field data-invalid={!!(tName && eName)}>
        <FieldLabel htmlFor="name">
          Name <span className="text-red-500">*</span>
        </FieldLabel>
        <Input
          id="name"
          type="text"
          placeholder="your full name"
          {...getFieldProps("name")}
          aria-invalid={!!(tName && eName)}
        />
        {tName && eName && <FieldError>{eName}</FieldError>}
      </Field>
      <Field data-invalid={!!(tEmail && eEmail)}>
        <FieldLabel htmlFor="email">
          Email <span className="text-red-500">*</span>
        </FieldLabel>
        <Input
          id="email"
          type="email"
          placeholder="email address"
          {...getFieldProps("email")}
          aria-invalid={!!(tEmail && eEmail)}
        />
        {tEmail && eEmail && <FieldError>{eEmail}</FieldError>}
      </Field>
      <Field data-invalid={!!(tPassword && ePassword)}>
        <FieldLabel htmlFor="password">
          Password <span className="text-red-500">*</span>
        </FieldLabel>
        <div className="relative">
          <Input
            id="password"
            type={showPassword ? "text" : "password"}
            placeholder="your password"
            {...getFieldProps("password")}
            aria-invalid={!!(tPassword && ePassword)}
          />
          <button
            type="button"
            onClick={() => setShowPassword(!showPassword)}
            className="absolute right-0 inset-y-0 px-3 flex items-center text-gray-500 rounded-md cursor-pointer"
          >
            {showPassword ? (
              <EyeOff className="w-4 h-4" />
            ) : (
              <Eye className="w-4 h-4" />
            )}
          </button>
        </div>
        {tPassword && ePassword && <FieldError>{ePassword}</FieldError>}
      </Field>
      <Field data-invalid={!!(tRole && eRole)}>
        <FieldLabel htmlFor="role">
          Role <span className="text-red-500">*</span>
        </FieldLabel>
        <Select
          value={values.role}
          onValueChange={(value) => {
            setFieldValue("role", value);
          }}
        >
          <SelectTrigger
            id="role"
            className="cursor-pointer"
            aria-invalid={!!(tRole && eRole)}
          >
            <SelectValue placeholder="Choose user's role" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="user" className="cursor-pointer">
              User
            </SelectItem>
            <SelectItem value="admin" className="cursor-pointer">
              Admin
            </SelectItem>
          </SelectContent>
        </Select>
        {tRole && eRole && <FieldError>{eRole}</FieldError>}
      </Field>
      <div className="flex gap-3 justify-center pt-2">
        <Button
          type="submit"
          disabled={isPending || !isValid}
          className="flex-1 md:max-w-sm cursor-pointer"
        >
          {isPending ? "Creating..." : "Create User"}
        </Button>
        <Button variant="secondary" asChild>
          <Link
            href="."
            className="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"
          >
            Cancel
          </Link>
        </Button>
      </div>
    </form>
  );
}


============================================================
FILE: app/(dashboard)/admin/users/_components/Users.jsx
============================================================
"use client";

import { UsersTable, UsersDialog, UsersHeader } from "./users";
import { UsersSkeleton } from "./skeletons";
import { useUsers } from "@/hooks/useUsers";
import { useState } from "react";

export default function Users() {
  const [debouncedSearch, setDebouncedSearch] = useState("");
  const [dialog, setDialog] = useState({
    type: null,
    open: false,
    user: null,
    newRole: null,
    reason: "",
  });
  const { data: users = [], isLoading } = useUsers(debouncedSearch);
  if (isLoading) return <UsersSkeleton />;
  return (
    <>
      <UsersHeader setDebouncedSearch={setDebouncedSearch} />
      <UsersTable users={users} setDialog={setDialog} />
      <UsersDialog dialog={dialog} setDialog={setDialog} />
    </>
  );
}


============================================================
FILE: app/(dashboard)/admin/users/_components/UsersWrapper.jsx
============================================================
import { AdminRoute } from "@/components/auth/AdminRoute";
import { Button } from "@/components/ui/button";
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import { ChevronLeft } from "lucide-react";
import Link from "next/link";

export default function UsersWrapper({ children }) {
  return (
    <AdminRoute>
      <div className="min-h-screen bg-neutral-50">
        <main className="max-w-7xl mx-auto px-4 py-8 space-y-8">
          <div className="bg-white rounded-lg shadow-md p-6">
            <div className="max-w-7xl mx-auto py-4 flex gap-2 items-center">
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="ghost"
                    size="icon"
                    className="cursor-pointer"
                    asChild
                  >
                    <Link href="/dashboard">
                      <ChevronLeft />
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Back to Dashboard</p>
                </TooltipContent>
              </Tooltip>
              <h1 className="text-2xl font-bold">User Management</h1>
            </div>
            {children}
          </div>
        </main>
      </div>
    </AdminRoute>
  );
}


============================================================
FILE: app/(dashboard)/admin/users/create/page.js
============================================================
import { UserForm } from "../_components";

export default function CreateUserPage() {
  return (
    <div className="p-5 flex justify-center items-center">
      <div className="max-w-3xl w-full shadow-md rounded-lg p-8 bg-neutral-50">
        <h1 className="text-2xl font-bold mb-6">Create New User</h1>
        <UserForm />
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/admin/users/layout.js
============================================================
import { UsersWrapper } from "./_components";

export default function UsersLayout({ children }) {
  return <UsersWrapper>{children}</UsersWrapper>;
}


============================================================
FILE: app/(dashboard)/admin/users/page.js
============================================================
import { Users } from "./_components";

export default function UsersPage() {
  return <Users />;
}


============================================================
FILE: app/(dashboard)/dashboard/_components/AdminControls.jsx
============================================================
import Link from "next/link";
import {
  Item,
  ItemActions,
  ItemContent,
  ItemDescription,
  ItemMedia,
  ItemTitle,
} from "@/components/ui/item";
import { Button } from "@/components/ui/button";
import {
  BookText,
  ChevronRightIcon,
  Folders,
  GraduationCap,
  Mails,
  Users,
} from "lucide-react";

export default function AdminControls() {
  const links = [
    {
      id: 1,
      address: "/admin/users",
      icon: <Users />,
      title: "User Management",
      description: "Manage users and roles",
    },
    {
      id: 2,
      address: "/admin/projects",
      icon: <Folders />,
      title: "Projects",
      description: "Manage projects",
    },
    {
      id: 3,
      address: "/admin/universities",
      icon: <GraduationCap />,
      title: "Universities",
      description: "Manage universities",
    },
    {
      id: 4,
      address: "/admin/courses",
      icon: <BookText />,
      title: "Courses",
      description: "Manage courses",
    },
    {
      id: 5,
      address: "/admin/messages",
      icon: <Mails />,
      title: "Messages",
      description: "View contact messages",
    },
  ];

  return (
    <div className="bg-white rounded-lg shadow p-6 mb-6">
      <h3 className="text-lg font-semibold mb-4">Admin Controls</h3>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {links.map(({ id, address, icon, title, description }) => (
          <Item key={id} variant="outline">
            <ItemMedia variant="icon">{icon}</ItemMedia>
            <ItemContent>
              <ItemTitle className="text-lg font-bold">{title}</ItemTitle>
              <ItemDescription>{description}</ItemDescription>
            </ItemContent>
            <ItemActions>
              <Button variant="ghost" asChild>
                <Link href={address}>
                  <ChevronRightIcon />
                </Link>
              </Button>
            </ItemActions>
          </Item>
        ))}
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/dashboard/_components/CourseTab.jsx
============================================================
import { formatDate } from "@/utils/formatDate";
import {
  Card,
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
  CardFooter,
} from "@/components/ui/card";
import Link from "next/link";

export default function CourseTab({ data = [], loading, isAdmin }) {
  if (loading) return <p>Loading courses...</p>;
  if (!data?.length) return <p className="text-gray-500">No courses found.</p>;

  return (
    <div>
      <div className="flex justify-between items-center mb-4">
        <h3 className="text-lg font-semibold">Courses & Certifications</h3>
        {isAdmin && (
          <a
            href="/admin/courses"
            className="text-sm text-blue-600 hover:underline"
          >
            Manage Courses →
          </a>
        )}
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        {data.map((course) => (
          <Card key={course._id} className="hover:shadow-md transition">
            <CardHeader className="flex items-start gap-3 p-4">
              <img
                src={course.logo}
                alt={course.title}
                className="w-12 h-12 object-contain"
              />
              <div className="flex-1">
                <CardTitle>{course.title}</CardTitle>
                <CardDescription>{course.by}</CardDescription>
              </div>
            </CardHeader>

            <CardContent className="pt-0 px-4">
              <div className="mt-2 flex items-center gap-3 text-sm text-gray-600">
                <span>
                  Grade:{" "}
                  <span className="font-medium text-green-600">
                    {course.grade}
                  </span>
                </span>
                <span>{formatDate(course.earnedAt)}</span>
              </div>

              <div className="flex flex-wrap gap-2 mt-3">
                {course.skills.map((skill, idx) => (
                  <span
                    key={idx}
                    className="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded"
                  >
                    {skill}
                  </span>
                ))}
              </div>
            </CardContent>

            <CardFooter className="px-4 pt-0">
              <Link
                href={course.credential}
                className="text-sm text-blue-600 hover:underline"
              >
                🏆 View Credential
              </Link>
            </CardFooter>
          </Card>
        ))}
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/dashboard/_components/DashboardClient.jsx
============================================================
"use client";

import DashboardHeader from "./DashboardHeader";
import AdminControls from "./AdminControls";
import DashboardTabs from "./DashboardTabs";
import { ProtectedRoute } from "@/components/auth/ProtectedRoute";
import { usePermissions } from "@/hooks/usePermissions";
import { useProjects } from "@/hooks/useProjects";
import { useUniversities } from "@/hooks/useUniversities";
import { useCourses } from "@/hooks/useCourses";
import Welcoming from "./Welcoming";
import { useMessages } from "@/hooks/useMessages";

export default function DashboardClient() {
  const { permissions, session } = usePermissions();
  const { data: projects = [], isLoading: projectsLoading } = useProjects();
  const { data: universities = [], isLoading: universitiesLoading } =
    useUniversities();
  const { data: courses = [], isLoading: coursesLoading } = useCourses();
  const { data: messages = [], isLoading: messagesLoading } = useMessages();
  return (
    <ProtectedRoute>
      <div className="min-h-screen bg-gray-50">
        <DashboardHeader session={session} />
        <main className="max-w-7xl mx-auto px-4 py-8">
          <Welcoming
            session={session}
            isAdmin={permissions.isAdmin}
            data={{ projects, universities, courses, messages }}
            loading={{
              projectsLoading,
              universitiesLoading,
              coursesLoading,
              messagesLoading,
            }}
          />
          {permissions.isAdmin && <AdminControls />}
          <DashboardTabs
            isAdmin={permissions.isAdmin}
            data={{ projects, universities, courses, messages }}
            loading={{
              projectsLoading,
              universitiesLoading,
              coursesLoading,
              messagesLoading,
            }}
          />
        </main>
      </div>
    </ProtectedRoute>
  );
}


============================================================
FILE: app/(dashboard)/dashboard/_components/DashboardHeader.jsx
============================================================
import { Button } from "@/components/ui/button";
import { authClient } from "@/lib/auth-client";
import Link from "next/link";

export default function DashboardHeader({ session }) {
  return (
    <nav className="bg-white shadow">
      <div className="max-w-7xl mx-auto p-4 flex justify-between items-center">
        <h1 className="text-2xl font-bold">Dashboard</h1>
        <div className="flex items-center gap-4">
          <Link href="/" className="text-blue-600 hover:underline">
            Home
          </Link>
          <Link href="/profile" className="text-blue-600 hover:underline">
            Profile
          </Link>
          <span className="text-sm text-gray-600">
            {session?.user?.name} ({session?.user?.role})
          </span>
          <Button
            variant="destructive"
            className="cursor-pointer"
            onClick={async () => await authClient.signOut()}
          >
            Sign Out
          </Button>
        </div>
      </div>
    </nav>
  );
}


============================================================
FILE: app/(dashboard)/dashboard/_components/DashboardTabs.jsx
============================================================
import ProjectTab from "./ProjectTab";
import UniversityTab from "./UniversityTab";
import CourseTab from "./CourseTab";
import MessageTab from "./MessageTab";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";

export default function DashboardTabs({ isAdmin, data, loading }) {
  const tabs = ["projects", "universities", "courses"];
  if (isAdmin) tabs.push("messages");
  return (
    <Tabs defaultValue="projects" className="bg-white rounded-lg shadow p-6">
      <TabsList>
        {tabs.map((tab) => (
          <TabsTrigger key={tab} value={tab} className="cursor-pointer">
            {tab === "projects" && `Projects (${data.projects?.length || 0})`}
            {tab === "universities" &&
              `Universities (${data.universities?.length || 0})`}
            {tab === "courses" && `Courses (${data.courses?.length || 0})`}
            {tab === "messages" && `Messages (${data.messages?.length || 0})`}
          </TabsTrigger>
        ))}
      </TabsList>
      <TabsContent value="projects">
        <ProjectTab
          data={data.projects}
          loading={loading.projectsLoading}
          isAdmin={isAdmin}
        />
      </TabsContent>
      <TabsContent value="universities">
        <UniversityTab
          data={data.universities}
          loading={loading.universitiesLoading}
          isAdmin={isAdmin}
        />
      </TabsContent>
      <TabsContent value="courses">
        <CourseTab
          data={data.courses}
          loading={loading.coursesLoading}
          isAdmin={isAdmin}
        />
      </TabsContent>
      {isAdmin && (
        <TabsContent value="messages">
          <MessageTab data={data.messages} loading={loading.messagesLoading} />
        </TabsContent>
      )}
    </Tabs>
  );
}


============================================================
FILE: app/(dashboard)/dashboard/_components/MessageTab.jsx
============================================================
import { formatDate } from "@/utils/formatDate";
import {
  Card,
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
} from "@/components/ui/card";
import Link from "next/link";

export default function MessageTab({ data = [], loading }) {
  if (loading) return <p>Loading messages...</p>;
  if (!data?.length) return <p className="text-gray-500">No messages found.</p>;
  return (
    <div>
      <div className="flex justify-between items-center mb-4">
        <h3 className="text-lg font-semibold">Messages</h3>
        <Link
          href="/admin/courses"
          className="text-sm text-blue-600 hover:underline"
        >
          Manage Messages
        </Link>
      </div>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        {data.map(({ _id, name, email, message, createdAt }) => (
          <Card key={_id}>
            <CardHeader>
              <CardTitle className="text-xl">
                Hi, Mr/Mrs. {name}
                <span className="text-sm text-gray-500">
                  (
                  <a
                    href={`mailto:${email}`}
                    className="text-blue-500 hover:underline"
                  >
                    {email}
                  </a>
                  )
                </span>
              </CardTitle>
              <CardDescription>
                The message has been sent on {formatDate(createdAt, true)}
              </CardDescription>
            </CardHeader>
            <CardContent>{message}</CardContent>
          </Card>
        ))}
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/dashboard/_components/ProjectTab.jsx
============================================================
import {
  Card,
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
  CardFooter,
} from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import Image from "next/image";
import Link from "next/link";
import { Button } from "@/components/ui/button";

export default function ProjectTab({ data = [], loading, isAdmin }) {
  if (loading) return <p>Loading projects...</p>;
  if (!data?.length) return <p className="text-gray-500">No projects found.</p>;
  return (
    <div>
      <div className="flex justify-between items-center mb-4">
        <h3 className="text-lg font-semibold">All Projects</h3>
        {isAdmin && (
          <Link
            href="/admin/projects"
            className="text-sm text-blue-600 hover:underline"
          >
            Manage Projects
          </Link>
        )}
      </div>
      <div className="grid md:grid-cols-3 gap-4">
        {data.map(({ _id, preview, title, summary, tools, demo, code }) => (
          <Card
            key={_id}
            className="overflow-hidden hover:shadow-lg transition pt-0"
          >
            <Image
              src={preview}
              alt={`${title} preview`}
              width={600}
              height={400}
              className="object-cover"
              unoptimized
            />
            <CardHeader>
              <CardTitle className="text-2xl font-bold">{title}</CardTitle>
              <CardDescription>{summary}</CardDescription>
            </CardHeader>
            <CardContent className="flex flex-wrap gap-2">
              {tools.map((tool) => (
                <Badge
                  variant="secondary"
                  className="bg-blue-100 text-blue-700"
                  key={tool}
                >
                  {tool}
                </Badge>
              ))}
            </CardContent>
            <CardFooter className="flex gap-3">
              <Button>
                <a href={demo} target="_blank" rel="noopener noreferrer">
                  Live Demo
                </a>
              </Button>
              <Button variant="outline">
                <a href={code} target="_blank" rel="noopener noreferrer">
                  Source Code
                </a>
              </Button>
            </CardFooter>
          </Card>
        ))}
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/dashboard/_components/UniversityTab.jsx
============================================================
import { formatDate } from "@/utils/formatDate";
import {
  Card,
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
} from "@/components/ui/card";
import Link from "next/link";

export default function UniversityTab({ data = [], loading, isAdmin }) {
  if (loading) return <p>Loading universities...</p>;
  if (!data?.length)
    return <p className="text-gray-500">No universities found.</p>;
  return (
    <div>
      <div className="flex justify-between items-center mb-4">
        <h3 className="text-lg font-semibold">Universities</h3>
        {isAdmin && (
          <Link
            href="/admin/universities"
            className="text-sm text-blue-600 hover:underline"
          >
            Manage Universities
          </Link>
        )}
      </div>

      <div className="grid md:grid-cols-2 gap-4">
        {data.map((university) => (
          <Card key={university._id} className="hover:shadow-md transition">
            <CardHeader className="flex items-start gap-4 p-5">
              <img
                src={university.logo}
                alt={university.title}
                className="w-16 h-16 object-contain"
              />
              <div className="flex-1">
                <div className="flex items-start justify-between">
                  <div>
                    <CardTitle>{university.title}</CardTitle>
                    <CardDescription>{university.by}</CardDescription>
                  </div>
                  <span
                    className={`px-3 py-1 rounded text-sm ${
                      university.status === "graduated"
                        ? "bg-green-100 text-green-800"
                        : "bg-yellow-100 text-yellow-800"
                    }`}
                  >
                    {university.status === "graduated"
                      ? "✓ Graduated"
                      : "📚 In Progress"}
                  </span>
                </div>
              </div>
            </CardHeader>

            <CardContent className="pt-0 px-5">
              <div className="text-sm text-gray-600">
                {university.status === "graduated" ? (
                  <p>Graduated: {formatDate(university.graduatedAt)}</p>
                ) : (
                  <p>Started: {formatDate(university.startedAt)}</p>
                )}
                {university.grade && <p>Grade: {university.grade}</p>}
              </div>

              {university.skills?.length > 0 && (
                <div className="flex flex-wrap gap-2 mt-3">
                  {university.skills.map((skill, idx) => (
                    <span
                      key={idx}
                      className="px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded"
                    >
                      {skill}
                    </span>
                  ))}
                </div>
              )}
            </CardContent>
          </Card>
        ))}
      </div>
    </div>
  );
}


============================================================
FILE: app/(dashboard)/dashboard/_components/Welcoming.jsx
============================================================
import {
  Item,
  ItemContent,
  ItemDescription,
  ItemMedia,
  ItemTitle,
} from "@/components/ui/item";
import { Skeleton } from "@/components/ui/skeleton";
import { BadgeCheck, Mail, UserCog } from "lucide-react";

export default function Welcoming({ session, isAdmin, data, loading }) {
  const {
    user: { name, email, role, emailVerified },
  } = session;
  return (
    <div className="bg-white rounded-lg shadow p-6 mb-6">
      <h2 className="text-xl font-semibold mb-4 capitalize">
        Welcome, {name}!
      </h2>
      <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
        <Item variant="outline">
          <ItemMedia variant="icon">
            <Mail />
          </ItemMedia>
          <ItemContent>
            <ItemTitle className="text-lg font-bold">Email</ItemTitle>
            <ItemDescription>{email}</ItemDescription>
          </ItemContent>
        </Item>
        <Item variant="outline">
          <ItemMedia variant="icon">
            <UserCog />
          </ItemMedia>
          <ItemContent>
            <ItemTitle className="text-lg font-bold">Role</ItemTitle>
            <ItemDescription>{role}</ItemDescription>
          </ItemContent>
        </Item>
        <Item variant="outline">
          <ItemMedia variant="icon">
            <BadgeCheck />
          </ItemMedia>
          <ItemContent>
            <ItemTitle className="text-lg font-bold">Status</ItemTitle>
            <ItemDescription>
              {emailVerified ? "Verified" : "Unverified"}
            </ItemDescription>
          </ItemContent>
        </Item>
      </div>
      {isAdmin && (
        <div>
          <h2 className="text-xl font-semibold my-4">Statistics</h2>
          <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <Item variant="outline">
              <ItemContent className="items-center">
                <ItemTitle className="text-6xl text-center font-bold">
                  {loading.projectsLoading ? (
                    <Skeleton className="w-[40px] h-[60px]" />
                  ) : (
                    data.projects.length
                  )}
                </ItemTitle>
                <ItemDescription className="text-center">
                  Total number of projects you currently have
                </ItemDescription>
              </ItemContent>
            </Item>
            <Item variant="outline">
              <ItemContent className="items-center">
                <ItemTitle className="text-6xl text-center font-bold">
                  {loading.universitiesLoading ? (
                    <Skeleton className="w-[40px] h-[60px]" />
                  ) : (
                    data.universities.length
                  )}
                </ItemTitle>
                <ItemDescription className="text-center">
                  Total number of university degrees you currently have
                </ItemDescription>
              </ItemContent>
            </Item>
            <Item variant="outline">
              <ItemContent className="items-center">
                <ItemTitle className="text-6xl text-center font-bold">
                  {loading.coursesLoading ? (
                    <Skeleton className="w-[40px] h-[60px]" />
                  ) : (
                    data.courses.length
                  )}
                </ItemTitle>
                <ItemDescription className="text-center">
                  Total number of courses you have currently taken
                </ItemDescription>
              </ItemContent>
            </Item>
            <Item variant="outline">
              <ItemContent className="items-center">
                <ItemTitle className="text-6xl text-center font-bold">
                  {loading.messagesLoading ? (
                    <Skeleton className="w-[40px] h-[60px]" />
                  ) : (
                    data.messages.length
                  )}
                </ItemTitle>
                <ItemDescription className="text-center">
                  Total number of messages you have received so far
                </ItemDescription>
              </ItemContent>
            </Item>
          </div>
        </div>
      )}
    </div>
  );
}


============================================================
FILE: app/(dashboard)/dashboard/page.js
============================================================
import DashboardClient from "./_components/DashboardClient";

export default async function DashboardPage() {
  return <DashboardClient />;
}


============================================================
FILE: app/(dashboard)/profile/_components/validation/schema.js
============================================================
import * as Yup from "yup";

export const schema = Yup.object({
  currentPassword: Yup.string().required("Current password is required"),
  newPassword: Yup.string()
    .min(8, "Must be at least 8 characters")
    .required("New password is required"),
  confirmPassword: Yup.string()
    .oneOf([Yup.ref("newPassword")], "Passwords do not match")
    .required("Please confirm your new password"),
});


============================================================
FILE: app/(dashboard)/profile/_components/ProfileClient.jsx
============================================================
"use client";

import { useFormik } from "formik";
import { schema } from "./validation/schema";
import { ProtectedRoute } from "@/components/auth/ProtectedRoute";
import { usePermissions } from "@/hooks/usePermissions";
import { useChangePassword } from "@/hooks/useUsers";
import { Button } from "@/components/ui/button";
import { Field, FieldError, FieldLabel } from "@/components/ui/field";
import { Input } from "@/components/ui/input";
import { Eye, EyeOff } from "lucide-react";
import { useState } from "react";
import Link from "next/link";
import {
  Item,
  ItemContent,
  ItemDescription,
  ItemTitle,
} from "@/components/ui/item";

export default function ProfileClient() {
  const { session } = usePermissions();
  const { mutateAsync, isPending } = useChangePassword();
  const { handleSubmit, getFieldProps, touched, errors, isValid } = useFormik({
    initialValues: {
      currentPassword: "",
      newPassword: "",
      confirmPassword: "",
    },
    validationSchema: schema,
    onSubmit: async (values, { resetForm }) => {
      const { confirmPassword, ...data } = values;
      try {
        await mutateAsync(data);
        resetForm();
      } catch (error) {}
    },
  });
  const [showPassword, setShowPassword] = useState({
    current: false,
    new: false,
    confirm: false,
  });
  const togglePassword = (key) =>
    setShowPassword((prev) => ({ ...prev, [key]: !prev[key] }));
  return (
    <main className="min-h-screen bg-gray-50">
      <ProtectedRoute>
        <div className="max-w-3xl mx-auto px-4 py-8">
          <div className="bg-white rounded-lg shadow p-6 mb-6">
            <div className="flex flex-row items-center justify-between mb-4">
              <h2 className="text-lg font-semibold">Account Information</h2>
              <Link href="/dashboard" className="text-blue-600 hover:underline">
                Back to dashboard
              </Link>
            </div>
            <div className="grid md:grid-cols-2 gap-4">
              <Item variant="outline">
                <ItemContent>
                  <ItemTitle className="text-lg font-bold">Name</ItemTitle>
                  <ItemDescription>{session?.user.name}</ItemDescription>
                </ItemContent>
              </Item>
              <Item variant="outline">
                <ItemContent>
                  <ItemTitle className="text-lg font-bold">Email</ItemTitle>
                  <ItemDescription>{session?.user.email}</ItemDescription>
                </ItemContent>
              </Item>
              <Item variant="outline">
                <ItemContent>
                  <ItemTitle className="text-lg font-bold">Role</ItemTitle>
                  <ItemDescription>{session?.user.role}</ItemDescription>
                </ItemContent>
              </Item>
              <Item variant="outline">
                <ItemContent>
                  <ItemTitle className="text-lg font-bold">
                    Email Verified
                  </ItemTitle>
                  <ItemDescription>
                    {session?.user.emailVerified ? "Verified" : "Not Verified"}
                  </ItemDescription>
                </ItemContent>
              </Item>
            </div>
          </div>
          <div className="bg-white rounded-lg shadow p-6">
            <h2 className="text-xl font-semibold mb-4">Change Password</h2>
            <form onSubmit={handleSubmit} className="grid gap-4">
              <Field
                data-invalid={
                  !!(touched.currentPassword && errors.currentPassword)
                }
              >
                <FieldLabel htmlFor="currentPassword">
                  Current password
                </FieldLabel>
                <div className="relative">
                  <Input
                    id="currentPassword"
                    type={showPassword.current ? "text" : "password"}
                    placeholder="current password"
                    disabled={isPending}
                    aria-invalid={
                      !!(touched.currentPassword && errors.currentPassword)
                    }
                    {...getFieldProps("currentPassword")}
                  />
                  <button
                    type="button"
                    onClick={() => togglePassword("current")}
                    className="absolute right-0 inset-y-0 px-3 flex items-center text-gray-500 rounded-md cursor-pointer"
                  >
                    {showPassword.current ? (
                      <EyeOff className="w-4 h-4" />
                    ) : (
                      <Eye className="w-4 h-4" />
                    )}
                  </button>
                </div>
                {touched.currentPassword && errors.currentPassword && (
                  <FieldError>{errors.currentPassword}</FieldError>
                )}
              </Field>
              <Field
                data-invalid={!!(touched.newPassword && errors.newPassword)}
              >
                <FieldLabel htmlFor="newPassword">New password</FieldLabel>
                <div className="relative">
                  <Input
                    id="newPassword"
                    type={showPassword.new ? "text" : "password"}
                    placeholder="new password"
                    disabled={isPending}
                    aria-invalid={!!(touched.newPassword && errors.newPassword)}
                    {...getFieldProps("newPassword")}
                  />
                  <button
                    type="button"
                    onClick={() => togglePassword("new")}
                    className="absolute right-0 inset-y-0 px-3 flex items-center text-gray-500 rounded-md cursor-pointer"
                  >
                    {showPassword.new ? (
                      <EyeOff className="w-4 h-4" />
                    ) : (
                      <Eye className="w-4 h-4" />
                    )}
                  </button>
                </div>
                {touched.newPassword && errors.newPassword && (
                  <FieldError>{errors.newPassword}</FieldError>
                )}
              </Field>
              <Field
                data-invalid={
                  !!(touched.confirmPassword && errors.confirmPassword)
                }
              >
                <FieldLabel htmlFor="confirmPassword">
                  Confirm password
                </FieldLabel>
                <div className="relative">
                  <Input
                    id="confirmPassword"
                    type={showPassword.confirm ? "text" : "password"}
                    placeholder="confirm new password"
                    disabled={isPending}
                    aria-invalid={
                      !!(touched.confirmPassword && errors.confirmPassword)
                    }
                    {...getFieldProps("confirmPassword")}
                  />
                  <button
                    type="button"
                    onClick={() => togglePassword("confirm")}
                    className="absolute right-0 inset-y-0 px-3 flex items-center text-gray-500 rounded-md cursor-pointer"
                  >
                    {showPassword.confirm ? (
                      <EyeOff className="w-4 h-4" />
                    ) : (
                      <Eye className="w-4 h-4" />
                    )}
                  </button>
                </div>
                {touched.confirmPassword && errors.confirmPassword && (
                  <FieldError>{errors.confirmPassword}</FieldError>
                )}
              </Field>
              <Button
                type="submit"
                disabled={isPending || !isValid}
                className="w-full lg:max-w-md mx-auto"
              >
                {isPending ? "Changing..." : "Change Password"}
              </Button>
            </form>
          </div>
        </div>
      </ProtectedRoute>
    </main>
  );
}


============================================================
FILE: app/(dashboard)/profile/page.js
============================================================
import ProfileClient from "./_components/ProfileClient";

export default async function ProfilePage() {
  return <ProfileClient />;
}


============================================================
FILE: app/globals.css
============================================================
@import url("https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=IBM+Plex+Sans+Arabic:wght@100;200;300;400;500;600;700&display=swap");
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --font-fira: "Fira Code", sans-serif;
  --font-ibm: "IBM Plex Sans Arabic", sans-serif;
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  ::-webkit-scrollbar {
    display: none;
  }
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground font-fira;
  }
  [dir="rtl"] {
    @apply font-ibm;
  }
  [data-sonner-toaster],
  [data-sonner-toast],
  [data-sonner-toast] * {
    @apply font-fira;
  }
}


============================================================
FILE: app/layout.js
============================================================
import { Toaster } from "sonner";
import Providers from "./providers";
import "./globals.css";

export const metadata = {
  title: "Better Auth App",
  description: "Full-stack authentication with Better Auth",
};

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body className="antialiased">
        <Toaster position="top-center" expand richColors />
        <Providers>{children}</Providers>
      </body>
    </html>
  );
}


============================================================
FILE: app/page.js
============================================================
"use client";

import { Skeleton } from "@/components/ui/skeleton";
import { authClient } from "@/lib/auth-client";
import Link from "next/link";
import { useRouter } from "next/navigation";

export default function HomePage() {
  const { data: session, isPending } = authClient.useSession();
  const router = useRouter();
  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50">
      <nav className="bg-white/80 backdrop-blur-sm shadow-sm sticky top-0 z-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            <div className="flex items-center">
              <h1 className="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                Portfolio Dashboard
              </h1>
            </div>
            <div className="flex items-center gap-4">
              {isPending ? (
                <div className="flex gap-3 items-center">
                  <Skeleton className="w-24 h-8" />
                  <Skeleton className="w-24 h-8" />
                </div>
              ) : session ? (
                <>
                  <Link
                    href="/dashboard"
                    className="text-blue-600 hover:underline"
                  >
                    Dashboard
                  </Link>
                  <Link
                    href="/profile"
                    className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
                  >
                    Profile
                  </Link>
                </>
              ) : (
                <>
                  <Link
                    href="/signin"
                    className="text-blue-600 hover:underline"
                  >
                    Sign In
                  </Link>
                  <Link
                    href="/signup"
                    className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                  >
                    Get Started
                  </Link>
                </>
              )}
            </div>
          </div>
        </div>
      </nav>
      <section className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-16">
        <div className="text-center">
          <h1 className="text-5xl sm:text-6xl lg:text-7xl font-bold text-gray-900 mb-6">
            Manage Your{" "}
            <span className="bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
              Portfolio
            </span>
            <br />
            with Ease
          </h1>
          <p className="text-xl text-gray-600 mb-8 max-w-3xl mx-auto">
            A comprehensive dashboard to manage your projects, education,
            courses, and connect with your audience. Everything you need in one
            place.
          </p>
          <div className="flex gap-4 justify-center">
            {session ? (
              <button
                onClick={() => router.push("/dashboard")}
                className="px-8 py-4 bg-blue-600 text-white rounded-lg text-lg font-semibold hover:bg-blue-700 transition shadow-lg hover:shadow-xl "
              >
                Go to Dashboard
              </button>
            ) : (
              <>
                <Link
                  href="/signup"
                  className="px-8 py-4 bg-blue-600 text-white rounded-lg text-lg font-semibold hover:bg-blue-700 transition shadow-lg hover:shadow-xl"
                >
                  Get Started Free
                </Link>
                <Link
                  href="/signin"
                  className="px-8 py-4 bg-white text-blue-600 border-2 border-blue-600 rounded-lg text-lg font-semibold hover:bg-blue-50 transition"
                >
                  Sign In
                </Link>
              </>
            )}
          </div>
        </div>
      </section>
      <section className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
        <h2 className="text-3xl font-bold text-center mb-12">
          Everything You Need
        </h2>
        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
          <div className="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition">
            <div className="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4">
              <span className="text-2xl">🚀</span>
            </div>
            <h3 className="text-xl font-semibold mb-2">Project Management</h3>
            <p className="text-gray-600">
              Showcase your projects with detailed descriptions, tools used, and
              live demos.
            </p>
          </div>

          <div className="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition">
            <div className="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4">
              <span className="text-2xl">🎓</span>
            </div>
            <h3 className="text-xl font-semibold mb-2">Education Tracking</h3>
            <p className="text-gray-600">
              Keep track of your universities and academic achievements with
              ease.
            </p>
          </div>

          <div className="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition">
            <div className="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4">
              <span className="text-2xl">📚</span>
            </div>
            <h3 className="text-xl font-semibold mb-2">Course Certificates</h3>
            <p className="text-gray-600">
              Display your certifications and skills acquired from online
              courses.
            </p>
          </div>

          <div className="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition">
            <div className="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mb-4">
              <span className="text-2xl">✉️</span>
            </div>
            <h3 className="text-xl font-semibold mb-2">Contact Management</h3>
            <p className="text-gray-600">
              Receive and manage messages from visitors and potential clients.
            </p>
          </div>
        </div>
      </section>
      {session?.user?.role === "admin" && (
        <section className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl">
          <div className="text-center mb-12">
            <h2 className="text-3xl font-bold mb-4">Admin Features</h2>
            <p className="text-gray-600">Powerful tools for administrators</p>
          </div>
          <div className="grid md:grid-cols-3 gap-6 max-w-4xl mx-auto">
            <div className="bg-white p-6 rounded-lg shadow">
              <span className="text-3xl mb-2 block">👥</span>
              <h3 className="font-semibold mb-2">User Management</h3>
              <p className="text-sm text-gray-600">
                Manage users, assign roles, and control access
              </p>
            </div>
            <div className="bg-white p-6 rounded-lg shadow">
              <span className="text-3xl mb-2 block">📝</span>
              <h3 className="font-semibold mb-2">Content Control</h3>
              <p className="text-sm text-gray-600">
                Full CRUD operations for all content types
              </p>
            </div>
            <div className="bg-white p-6 rounded-lg shadow">
              <span className="text-3xl mb-2 block">📊</span>
              <h3 className="font-semibold mb-2">Message Inbox</h3>
              <p className="text-sm text-gray-600">
                View and respond to all contact messages
              </p>
            </div>
          </div>
        </section>
      )}
      {!session && (
        <section className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
          <div className="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-12 text-center text-white">
            <h2 className="text-4xl font-bold mb-4">Ready to Get Started?</h2>
            <p className="text-xl mb-8 opacity-90">
              Join now and start managing your portfolio professionally
            </p>
            <Link
              href="/signup"
              className="inline-block px-8 py-4 bg-white text-blue-600 rounded-lg text-lg font-semibold hover:bg-gray-100 transition shadow-lg"
            >
              Create Free Account
            </Link>
          </div>
        </section>
      )}
      <footer className="bg-gray-900 text-white py-12 mt-20">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="grid md:grid-cols-3 gap-8">
            <div>
              <h3 className="text-xl font-bold mb-4">Portfolio Dashboard</h3>
              <p className="text-gray-400">
                Your all-in-one solution for managing your professional
                portfolio and connecting with your audience.
              </p>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Quick Links</h4>
              <ul className="space-y-2 text-gray-400">
                {session ? (
                  <>
                    <li>
                      <Link href="/dashboard" className="hover:text-white">
                        Dashboard
                      </Link>
                    </li>
                    <li>
                      <Link href="/profile" className="hover:text-white">
                        Profile
                      </Link>
                    </li>
                    <li>
                      <Link href="/contact" className="hover:text-white">
                        Contact
                      </Link>
                    </li>
                  </>
                ) : (
                  <>
                    <li>
                      <Link href="/signin" className="hover:text-white">
                        Sign In
                      </Link>
                    </li>
                    <li>
                      <Link href="/signup" className="hover:text-white">
                        Sign Up
                      </Link>
                    </li>
                  </>
                )}
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Features</h4>
              <ul className="space-y-2 text-gray-400">
                <li>Project Management</li>
                <li>Education Tracking</li>
                <li>Course Certificates</li>
                <li>Contact Management</li>
              </ul>
            </div>
          </div>
          <div className="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
            <p>
              &copy; {new Date().getFullYear()} Portfolio Dashboard. All rights
              reserved.
            </p>
          </div>
        </div>
      </footer>
    </div>
  );
}


============================================================
FILE: app/providers.js
============================================================
"use client";

import { QueryClient, QueryClientProvider } from "@tanstack/react-query";

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 60 * 1000,
    },
  },
});
export default function Providers({ children }) {
  return (
    <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
  );
}


============================================================
FILE: components/auth/AdminRoute.jsx
============================================================
"use client";

import { usePermissions } from "@/hooks/usePermissions";
import { useRouter } from "next/navigation";
import { useEffect } from "react";
import { Spinner } from "@/components/ui/spinner";
import { toast } from "sonner";

export function AdminRoute({ children }) {
  const { permissions, session, isPending } = usePermissions();
  const router = useRouter();
  useEffect(() => {
    if (!isPending) {
      if (!session) {
        toast.warning("Please sign in to access this page");
        router.push("/signin");
      } else if (!permissions.isAdmin) {
        toast.warning("You don't have permission to access this page");
        router.push("/dashboard");
      }
    }
  }, [session, permissions.isAdmin, isPending, router]);
  if (isPending) return <Spinner />;
  if (!session || !permissions.isAdmin) return null;
  return <>{children}</>;
}


============================================================
FILE: components/auth/ProtectedRoute.jsx
============================================================
"use client";

import { usePermissions } from "@/hooks/usePermissions";
import { useRouter } from "next/navigation";
import { useEffect } from "react";
import { Spinner } from "@/components/ui/spinner";
import { toast } from "sonner";

export function ProtectedRoute({ children }) {
  const { session, isPending } = usePermissions();
  const router = useRouter();
  useEffect(() => {
    if (!isPending && !session) {
      toast.warning("Your session is expired, Sign in again");
      router.push("/signin");
    }
  }, [session, isPending, router]);
  if (isPending) return <Spinner />;
  if (!session) return null;
  return <>{children}</>;
}


============================================================
FILE: components/shared/DatePicker.jsx
============================================================
"use client";

import { useState } from "react";
import { ChevronDownIcon } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Calendar } from "@/components/ui/calendar";
import {
  Popover,
  PopoverContent,
  PopoverTrigger,
} from "@/components/ui/popover";
import { Label } from "@/components/ui/label";
import { Field, FieldError } from "@/components/ui/field";

export function DateInput({
  name,
  label,
  disabled = false,
  values,
  setFieldValue,
  touched,
  errors,
}) {
  const [open, setOpen] = useState(false);
  const selectedDate = values[name] ? new Date(values[name]) : undefined;
  return (
    <Field data-invalid={!!(touched[name] && errors[name])}>
      <Label htmlFor={name}>
        {label} {!disabled && <span className="text-red-500">*</span>}
      </Label>
      <Popover open={open} onOpenChange={setOpen}>
        <PopoverTrigger asChild>
          <Button
            id={name}
            variant="outline"
            className={`justify-between ${
              disabled ? "bg-neutral-100" : "cursor-pointer"
            }`}
            disabled={disabled}
          >
            {selectedDate ? selectedDate.toLocaleDateString() : "Select date"}
            <ChevronDownIcon />
          </Button>
        </PopoverTrigger>
        <PopoverContent className="w-auto overflow-hidden p-0" align="start">
          <Calendar
            mode="single"
            selected={selectedDate}
            captionLayout="dropdown"
            onSelect={(date) => {
              setFieldValue(name, date?.toISOString() || "");
              setOpen(false);
            }}
            disabled={disabled}
          />
        </PopoverContent>
      </Popover>
      {touched[name] && errors[name] && <FieldError>{errors[name]}</FieldError>}
    </Field>
  );
}


============================================================
FILE: components/ui/badge.jsx
============================================================
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva } from "class-variance-authority";

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
        destructive:
          "border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

function Badge({
  className,
  variant,
  asChild = false,
  ...props
}) {
  const Comp = asChild ? Slot : "span"

  return (
    <Comp
      data-slot="badge"
      className={cn(badgeVariants({ variant }), className)}
      {...props} />
  );
}

export { Badge, badgeVariants }


============================================================
FILE: components/ui/button.jsx
============================================================
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva } from "class-variance-authority";

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive:
          "bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary:
          "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost:
          "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9",
        "icon-sm": "size-8",
        "icon-lg": "size-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function Button({
  className,
  variant,
  size,
  asChild = false,
  ...props
}) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      {...props} />
  );
}

export { Button, buttonVariants }


============================================================
FILE: components/ui/calendar.jsx
============================================================
"use client";

import * as React from "react";
import {
  ChevronDownIcon,
  ChevronLeftIcon,
  ChevronRightIcon,
} from "lucide-react";
import { DayPicker, getDefaultClassNames } from "react-day-picker";

import { cn } from "@/lib/utils";
import { Button, buttonVariants } from "@/components/ui/button";

function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  captionLayout = "label",
  buttonVariant = "ghost",
  formatters,
  components,
  ...props
}) {
  const defaultClassNames = getDefaultClassNames();

  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn(
        "bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",
        String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,
        String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,
        className
      )}
      captionLayout={captionLayout}
      formatters={{
        formatMonthDropdown: (date) =>
          date.toLocaleString("default", { month: "short" }),
        ...formatters,
      }}
      classNames={{
        root: cn("w-fit", defaultClassNames.root),
        months: cn(
          "flex gap-4 flex-col md:flex-row relative",
          defaultClassNames.months
        ),
        month: cn("flex flex-col w-full gap-4", defaultClassNames.month),
        nav: cn(
          "flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",
          defaultClassNames.nav
        ),
        button_previous: cn(
          buttonVariants({ variant: buttonVariant }),
          "cursor-pointer size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",
          defaultClassNames.button_previous
        ),
        button_next: cn(
          buttonVariants({ variant: buttonVariant }),
          "cursor-pointer size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",
          defaultClassNames.button_next
        ),
        month_caption: cn(
          "flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",
          defaultClassNames.month_caption
        ),
        dropdowns: cn(
          "w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",
          defaultClassNames.dropdowns
        ),
        dropdown_root: cn(
          "relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",
          defaultClassNames.dropdown_root
        ),
        dropdown: cn(
          "cursor-pointer absolute bg-popover inset-0 opacity-0",
          defaultClassNames.dropdown
        ),
        caption_label: cn(
          "select-none font-medium",
          captionLayout === "label"
            ? "text-sm"
            : "rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",
          defaultClassNames.caption_label
        ),
        table: "w-full border-collapse",
        weekdays: cn("flex", defaultClassNames.weekdays),
        weekday: cn(
          "text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",
          defaultClassNames.weekday
        ),
        week: cn("flex w-full mt-2", defaultClassNames.week),
        week_number_header: cn(
          "select-none w-(--cell-size)",
          defaultClassNames.week_number_header
        ),
        week_number: cn(
          "text-[0.8rem] select-none text-muted-foreground",
          defaultClassNames.week_number
        ),
        day: cn(
          "relative w-full h-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",
          props.showWeekNumber
            ? "[&:nth-child(2)[data-selected=true]_button]:rounded-l-md"
            : "[&:first-child[data-selected=true]_button]:rounded-l-md",
          defaultClassNames.day
        ),
        range_start: cn(
          "rounded-l-md bg-accent",
          defaultClassNames.range_start
        ),
        range_middle: cn("rounded-none", defaultClassNames.range_middle),
        range_end: cn("rounded-r-md bg-accent", defaultClassNames.range_end),
        today: cn(
          "bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",
          defaultClassNames.today
        ),
        outside: cn(
          "text-muted-foreground aria-selected:text-muted-foreground",
          defaultClassNames.outside
        ),
        disabled: cn("bg-neutral-100", defaultClassNames.disabled),
        hidden: cn("invisible", defaultClassNames.hidden),
        ...classNames,
      }}
      components={{
        Root: ({ className, rootRef, ...props }) => {
          return (
            <div
              data-slot="calendar"
              ref={rootRef}
              className={cn(className)}
              {...props}
            />
          );
        },
        Chevron: ({ className, orientation, ...props }) => {
          if (orientation === "left") {
            return (
              <ChevronLeftIcon className={cn("size-4", className)} {...props} />
            );
          }

          if (orientation === "right") {
            return (
              <ChevronRightIcon
                className={cn("size-4", className)}
                {...props}
              />
            );
          }

          return (
            <ChevronDownIcon className={cn("size-4", className)} {...props} />
          );
        },
        DayButton: CalendarDayButton,
        WeekNumber: ({ children, ...props }) => {
          return (
            <td {...props}>
              <div className="flex size-(--cell-size) items-center justify-center text-center">
                {children}
              </div>
            </td>
          );
        },
        ...components,
      }}
      {...props}
    />
  );
}

function CalendarDayButton({ className, day, modifiers, ...props }) {
  const defaultClassNames = getDefaultClassNames();

  const ref = React.useRef(null);
  React.useEffect(() => {
    if (modifiers.focused) ref.current?.focus();
  }, [modifiers.focused]);

  return (
    <Button
      ref={ref}
      variant="ghost"
      size="icon"
      data-day={day.date.toLocaleDateString()}
      data-selected-single={
        modifiers.selected &&
        !modifiers.range_start &&
        !modifiers.range_end &&
        !modifiers.range_middle
      }
      data-range-start={modifiers.range_start}
      data-range-end={modifiers.range_end}
      data-range-middle={modifiers.range_middle}
      className={cn(
        "cursor-pointer data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",
        defaultClassNames.day,
        className
      )}
      {...props}
    />
  );
}

export { Calendar, CalendarDayButton };


============================================================
FILE: components/ui/card.jsx
============================================================
import * as React from "react"

import { cn } from "@/lib/utils"

function Card({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card"
      className={cn(
        "bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",
        className
      )}
      {...props} />
  );
}

function CardHeader({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card-header"
      className={cn(
        "@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",
        className
      )}
      {...props} />
  );
}

function CardTitle({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card-title"
      className={cn("leading-none font-semibold", className)}
      {...props} />
  );
}

function CardDescription({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />
  );
}

function CardAction({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card-action"
      className={cn(
        "col-start-2 row-span-2 row-start-1 self-start justify-self-end",
        className
      )}
      {...props} />
  );
}

function CardContent({
  className,
  ...props
}) {
  return (<div data-slot="card-content" className={cn("px-6", className)} {...props} />);
}

function CardFooter({
  className,
  ...props
}) {
  return (
    <div
      data-slot="card-footer"
      className={cn("flex items-center px-6 [.border-t]:pt-6", className)}
      {...props} />
  );
}

export {
  Card,
  CardHeader,
  CardFooter,
  CardTitle,
  CardAction,
  CardDescription,
  CardContent,
}


============================================================
FILE: components/ui/dialog.jsx
============================================================
"use client"

import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { XIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Dialog({
  ...props
}) {
  return <DialogPrimitive.Root data-slot="dialog" {...props} />;
}

function DialogTrigger({
  ...props
}) {
  return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />;
}

function DialogPortal({
  ...props
}) {
  return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />;
}

function DialogClose({
  ...props
}) {
  return <DialogPrimitive.Close data-slot="dialog-close" {...props} />;
}

function DialogOverlay({
  className,
  ...props
}) {
  return (
    <DialogPrimitive.Overlay
      data-slot="dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props} />
  );
}

function DialogContent({
  className,
  children,
  showCloseButton = true,
  ...props
}) {
  return (
    <DialogPortal data-slot="dialog-portal">
      <DialogOverlay />
      <DialogPrimitive.Content
        data-slot="dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className
        )}
        {...props}>
        {children}
        {showCloseButton && (
          <DialogPrimitive.Close
            data-slot="dialog-close"
            className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4">
            <XIcon />
            <span className="sr-only">Close</span>
          </DialogPrimitive.Close>
        )}
      </DialogPrimitive.Content>
    </DialogPortal>
  );
}

function DialogHeader({
  className,
  ...props
}) {
  return (
    <div
      data-slot="dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props} />
  );
}

function DialogFooter({
  className,
  ...props
}) {
  return (
    <div
      data-slot="dialog-footer"
      className={cn("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end", className)}
      {...props} />
  );
}

function DialogTitle({
  className,
  ...props
}) {
  return (
    <DialogPrimitive.Title
      data-slot="dialog-title"
      className={cn("text-lg leading-none font-semibold", className)}
      {...props} />
  );
}

function DialogDescription({
  className,
  ...props
}) {
  return (
    <DialogPrimitive.Description
      data-slot="dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props} />
  );
}

export {
  Dialog,
  DialogClose,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogOverlay,
  DialogPortal,
  DialogTitle,
  DialogTrigger,
}


============================================================
FILE: components/ui/empty.jsx
============================================================
import { cva } from "class-variance-authority";

import { cn } from "@/lib/utils"

function Empty({
  className,
  ...props
}) {
  return (
    <div
      data-slot="empty"
      className={cn(
        "flex min-w-0 flex-1 flex-col items-center justify-center gap-6 rounded-lg border-dashed p-6 text-center text-balance md:p-12",
        className
      )}
      {...props} />
  );
}

function EmptyHeader({
  className,
  ...props
}) {
  return (
    <div
      data-slot="empty-header"
      className={cn("flex max-w-sm flex-col items-center gap-2 text-center", className)}
      {...props} />
  );
}

const emptyMediaVariants = cva(
  "flex shrink-0 items-center justify-center mb-2 [&_svg]:pointer-events-none [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        icon: "bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

function EmptyMedia({
  className,
  variant = "default",
  ...props
}) {
  return (
    <div
      data-slot="empty-icon"
      data-variant={variant}
      className={cn(emptyMediaVariants({ variant, className }))}
      {...props} />
  );
}

function EmptyTitle({
  className,
  ...props
}) {
  return (
    <div
      data-slot="empty-title"
      className={cn("text-lg font-medium tracking-tight", className)}
      {...props} />
  );
}

function EmptyDescription({
  className,
  ...props
}) {
  return (
    <div
      data-slot="empty-description"
      className={cn(
        "text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4",
        className
      )}
      {...props} />
  );
}

function EmptyContent({
  className,
  ...props
}) {
  return (
    <div
      data-slot="empty-content"
      className={cn(
        "flex w-full max-w-sm min-w-0 flex-col items-center gap-4 text-sm text-balance",
        className
      )}
      {...props} />
  );
}

export {
  Empty,
  EmptyHeader,
  EmptyTitle,
  EmptyDescription,
  EmptyContent,
  EmptyMedia,
}


============================================================
FILE: components/ui/field.jsx
============================================================
"use client";

import { useMemo } from "react";
import { cva } from "class-variance-authority";

import { cn } from "@/lib/utils";
import { Label } from "@/components/ui/label";
import { Separator } from "@/components/ui/separator";

function FieldSet({ className, ...props }) {
  return (
    <fieldset
      data-slot="field-set"
      className={cn(
        "flex flex-col gap-6",
        "has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3",
        className
      )}
      {...props}
    />
  );
}

function FieldLegend({ className, variant = "legend", ...props }) {
  return (
    <legend
      data-slot="field-legend"
      data-variant={variant}
      className={cn(
        "mb-1 font-bold",
        "data-[variant=legend]:text-xl",
        "data-[variant=label]:text-sm",
        className
      )}
      {...props}
    />
  );
}

function FieldGroup({ className, ...props }) {
  return (
    <div
      data-slot="field-group"
      className={cn(
        "group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4",
        className
      )}
      {...props}
    />
  );
}

const fieldVariants = cva(
  "group/field flex w-full gap-3 data-[invalid=true]:text-destructive",
  {
    variants: {
      orientation: {
        vertical: ["flex-col [&>*]:w-full [&>.sr-only]:w-auto"],
        horizontal: [
          "flex-row items-center",
          "[&>[data-slot=field-label]]:flex-auto",
          "has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px",
        ],
        responsive: [
          "flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto",
          "@md/field-group:[&>[data-slot=field-label]]:flex-auto",
          "@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px",
        ],
      },
    },
    defaultVariants: {
      orientation: "vertical",
    },
  }
);

function Field({ className, orientation = "vertical", ...props }) {
  return (
    <div
      role="group"
      data-slot="field"
      data-orientation={orientation}
      className={cn(fieldVariants({ orientation }), className)}
      {...props}
    />
  );
}

function FieldContent({ className, ...props }) {
  return (
    <div
      data-slot="field-content"
      className={cn(
        "group/field-content flex flex-1 flex-col gap-1.5 leading-snug",
        className
      )}
      {...props}
    />
  );
}

function FieldLabel({ className, ...props }) {
  return (
    <Label
      data-slot="field-label"
      className={cn(
        "group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50",
        "has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>*]:data-[slot=field]:p-4",
        "has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10",
        className
      )}
      {...props}
    />
  );
}

function FieldTitle({ className, ...props }) {
  return (
    <div
      data-slot="field-label"
      className={cn(
        "flex w-fit items-center gap-2 text-sm leading-snug font-medium group-data-[disabled=true]/field:opacity-50",
        className
      )}
      {...props}
    />
  );
}

function FieldDescription({ className, ...props }) {
  return (
    <p
      data-slot="field-description"
      className={cn(
        "text-muted-foreground text-sm leading-normal font-normal group-has-[[data-orientation=horizontal]]/field:text-balance",
        "last:mt-0 nth-last-2:-mt-1 [[data-variant=legend]+&]:-mt-1.5",
        "[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4",
        className
      )}
      {...props}
    />
  );
}

function FieldSeparator({ children, className, ...props }) {
  return (
    <div
      data-slot="field-separator"
      data-content={!!children}
      className={cn(
        "relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2",
        className
      )}
      {...props}
    >
      <Separator className="absolute inset-0 top-1/2" />
      {children && (
        <span
          className="bg-background text-muted-foreground relative mx-auto block w-fit px-2"
          data-slot="field-separator-content"
        >
          {children}
        </span>
      )}
    </div>
  );
}

function FieldError({ className, children, errors, ...props }) {
  const content = useMemo(() => {
    if (children) {
      return children;
    }

    if (!errors?.length) {
      return null;
    }

    const uniqueErrors = [
      ...new Map(errors.map((error) => [error?.message, error])).values(),
    ];

    if (uniqueErrors?.length == 1) {
      return uniqueErrors[0]?.message;
    }

    return (
      <ul className="ml-4 flex list-disc flex-col gap-1">
        {uniqueErrors.map(
          (error, index) =>
            error?.message && <li key={index}>{error.message}</li>
        )}
      </ul>
    );
  }, [children, errors]);

  if (!content) {
    return null;
  }

  return (
    <div
      role="alert"
      data-slot="field-error"
      className={cn("text-destructive text-sm font-normal", className)}
      {...props}
    >
      {content}
    </div>
  );
}

export {
  Field,
  FieldLabel,
  FieldDescription,
  FieldError,
  FieldGroup,
  FieldLegend,
  FieldSeparator,
  FieldSet,
  FieldContent,
  FieldTitle,
};


============================================================
FILE: components/ui/input.jsx
============================================================
import * as React from "react"

import { cn } from "@/lib/utils"

function Input({
  className,
  type,
  ...props
}) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(
        "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
        "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
        className
      )}
      {...props} />
  );
}

export { Input }


============================================================
FILE: components/ui/item.jsx
============================================================
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva } from "class-variance-authority";

import { cn } from "@/lib/utils"
import { Separator } from "@/components/ui/separator"

function ItemGroup({
  className,
  ...props
}) {
  return (
    <div
      role="list"
      data-slot="item-group"
      className={cn("group/item-group flex flex-col", className)}
      {...props} />
  );
}

function ItemSeparator({
  className,
  ...props
}) {
  return (
    <Separator
      data-slot="item-separator"
      orientation="horizontal"
      className={cn("my-0", className)}
      {...props} />
  );
}

const itemVariants = cva(
  "group/item flex items-center border border-transparent text-sm rounded-md transition-colors [a]:hover:bg-accent/50 [a]:transition-colors duration-100 flex-wrap outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        outline: "border-border",
        muted: "bg-muted/50",
      },
      size: {
        default: "p-4 gap-4 ",
        sm: "py-3 px-4 gap-2.5",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function Item({
  className,
  variant = "default",
  size = "default",
  asChild = false,
  ...props
}) {
  const Comp = asChild ? Slot : "div"
  return (
    <Comp
      data-slot="item"
      data-variant={variant}
      data-size={size}
      className={cn(itemVariants({ variant, size, className }))}
      {...props} />
  );
}

const itemMediaVariants = cva(
  "flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none group-has-[[data-slot=item-description]]/item:translate-y-0.5",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        icon: "size-8 border rounded-sm bg-muted [&_svg:not([class*='size-'])]:size-4",
        image:
          "size-10 rounded-sm overflow-hidden [&_img]:size-full [&_img]:object-cover",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

function ItemMedia({
  className,
  variant = "default",
  ...props
}) {
  return (
    <div
      data-slot="item-media"
      data-variant={variant}
      className={cn(itemMediaVariants({ variant, className }))}
      {...props} />
  );
}

function ItemContent({
  className,
  ...props
}) {
  return (
    <div
      data-slot="item-content"
      className={cn(
        "flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none",
        className
      )}
      {...props} />
  );
}

function ItemTitle({
  className,
  ...props
}) {
  return (
    <div
      data-slot="item-title"
      className={cn(
        "flex w-fit items-center gap-2 text-sm leading-snug font-medium",
        className
      )}
      {...props} />
  );
}

function ItemDescription({
  className,
  ...props
}) {
  return (
    <p
      data-slot="item-description"
      className={cn(
        "text-muted-foreground line-clamp-2 text-sm leading-normal font-normal text-balance",
        "[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4",
        className
      )}
      {...props} />
  );
}

function ItemActions({
  className,
  ...props
}) {
  return (
    <div
      data-slot="item-actions"
      className={cn("flex items-center gap-2", className)}
      {...props} />
  );
}

function ItemHeader({
  className,
  ...props
}) {
  return (
    <div
      data-slot="item-header"
      className={cn("flex basis-full items-center justify-between gap-2", className)}
      {...props} />
  );
}

function ItemFooter({
  className,
  ...props
}) {
  return (
    <div
      data-slot="item-footer"
      className={cn("flex basis-full items-center justify-between gap-2", className)}
      {...props} />
  );
}

export {
  Item,
  ItemMedia,
  ItemContent,
  ItemActions,
  ItemGroup,
  ItemSeparator,
  ItemTitle,
  ItemDescription,
  ItemHeader,
  ItemFooter,
}


============================================================
FILE: components/ui/label.jsx
============================================================
"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"

import { cn } from "@/lib/utils"

function Label({
  className,
  ...props
}) {
  return (
    <LabelPrimitive.Root
      data-slot="label"
      className={cn(
        "flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",
        className
      )}
      {...props} />
  );
}

export { Label }


============================================================
FILE: components/ui/popover.jsx
============================================================
"use client"

import * as React from "react"
import * as PopoverPrimitive from "@radix-ui/react-popover"

import { cn } from "@/lib/utils"

function Popover({
  ...props
}) {
  return <PopoverPrimitive.Root data-slot="popover" {...props} />;
}

function PopoverTrigger({
  ...props
}) {
  return <PopoverPrimitive.Trigger data-slot="popover-trigger" {...props} />;
}

function PopoverContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}) {
  return (
    <PopoverPrimitive.Portal>
      <PopoverPrimitive.Content
        data-slot="popover-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className
        )}
        {...props} />
    </PopoverPrimitive.Portal>
  );
}

function PopoverAnchor({
  ...props
}) {
  return <PopoverPrimitive.Anchor data-slot="popover-anchor" {...props} />;
}

export { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }


============================================================
FILE: components/ui/select.jsx
============================================================
"use client"

import * as React from "react"
import * as SelectPrimitive from "@radix-ui/react-select"
import { CheckIcon, ChevronDownIcon, ChevronUpIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Select({
  ...props
}) {
  return <SelectPrimitive.Root data-slot="select" {...props} />;
}

function SelectGroup({
  ...props
}) {
  return <SelectPrimitive.Group data-slot="select-group" {...props} />;
}

function SelectValue({
  ...props
}) {
  return <SelectPrimitive.Value data-slot="select-value" {...props} />;
}

function SelectTrigger({
  className,
  size = "default",
  children,
  ...props
}) {
  return (
    <SelectPrimitive.Trigger
      data-slot="select-trigger"
      data-size={size}
      className={cn(
        "border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}>
      {children}
      <SelectPrimitive.Icon asChild>
        <ChevronDownIcon className="size-4 opacity-50" />
      </SelectPrimitive.Icon>
    </SelectPrimitive.Trigger>
  );
}

function SelectContent({
  className,
  children,
  position = "popper",
  align = "center",
  ...props
}) {
  return (
    <SelectPrimitive.Portal>
      <SelectPrimitive.Content
        data-slot="select-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",
          position === "popper" &&
            "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
          className
        )}
        position={position}
        align={align}
        {...props}>
        <SelectScrollUpButton />
        <SelectPrimitive.Viewport
          className={cn("p-1", position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1")}>
          {children}
        </SelectPrimitive.Viewport>
        <SelectScrollDownButton />
      </SelectPrimitive.Content>
    </SelectPrimitive.Portal>
  );
}

function SelectLabel({
  className,
  ...props
}) {
  return (
    <SelectPrimitive.Label
      data-slot="select-label"
      className={cn("text-muted-foreground px-2 py-1.5 text-xs", className)}
      {...props} />
  );
}

function SelectItem({
  className,
  children,
  ...props
}) {
  return (
    <SelectPrimitive.Item
      data-slot="select-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",
        className
      )}
      {...props}>
      <span className="absolute right-2 flex size-3.5 items-center justify-center">
        <SelectPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </SelectPrimitive.ItemIndicator>
      </span>
      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
    </SelectPrimitive.Item>
  );
}

function SelectSeparator({
  className,
  ...props
}) {
  return (
    <SelectPrimitive.Separator
      data-slot="select-separator"
      className={cn("bg-border pointer-events-none -mx-1 my-1 h-px", className)}
      {...props} />
  );
}

function SelectScrollUpButton({
  className,
  ...props
}) {
  return (
    <SelectPrimitive.ScrollUpButton
      data-slot="select-scroll-up-button"
      className={cn("flex cursor-default items-center justify-center py-1", className)}
      {...props}>
      <ChevronUpIcon className="size-4" />
    </SelectPrimitive.ScrollUpButton>
  );
}

function SelectScrollDownButton({
  className,
  ...props
}) {
  return (
    <SelectPrimitive.ScrollDownButton
      data-slot="select-scroll-down-button"
      className={cn("flex cursor-default items-center justify-center py-1", className)}
      {...props}>
      <ChevronDownIcon className="size-4" />
    </SelectPrimitive.ScrollDownButton>
  );
}

export {
  Select,
  SelectContent,
  SelectGroup,
  SelectItem,
  SelectLabel,
  SelectScrollDownButton,
  SelectScrollUpButton,
  SelectSeparator,
  SelectTrigger,
  SelectValue,
}


============================================================
FILE: components/ui/separator.jsx
============================================================
"use client"

import * as React from "react"
import * as SeparatorPrimitive from "@radix-ui/react-separator"

import { cn } from "@/lib/utils"

function Separator({
  className,
  orientation = "horizontal",
  decorative = true,
  ...props
}) {
  return (
    <SeparatorPrimitive.Root
      data-slot="separator"
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",
        className
      )}
      {...props} />
  );
}

export { Separator }


============================================================
FILE: components/ui/skeleton.jsx
============================================================
import { cn } from "@/lib/utils"

function Skeleton({
  className,
  ...props
}) {
  return (
    <div
      data-slot="skeleton"
      className={cn("bg-accent animate-pulse rounded-md", className)}
      {...props} />
  );
}

export { Skeleton }


============================================================
FILE: components/ui/spinner.jsx
============================================================
import { Loader2Icon } from "lucide-react";
import { cn } from "@/lib/utils";

function Spinner({ className, ...props }) {
  return (
    <div className="grid place-items-center w-full min-h-screen fixed top-0 left-0">
      <Loader2Icon
        role="status"
        aria-label="Loading"
        className={cn("size-12 animate-spin", className)}
        {...props}
      />
    </div>
  );
}

export { Spinner };


============================================================
FILE: components/ui/table.jsx
============================================================
"use client"

import * as React from "react"

import { cn } from "@/lib/utils"

function Table({
  className,
  ...props
}) {
  return (
    <div data-slot="table-container" className="relative w-full overflow-x-auto">
      <table
        data-slot="table"
        className={cn("w-full caption-bottom text-sm", className)}
        {...props} />
    </div>
  );
}

function TableHeader({
  className,
  ...props
}) {
  return (
    <thead
      data-slot="table-header"
      className={cn("[&_tr]:border-b", className)}
      {...props} />
  );
}

function TableBody({
  className,
  ...props
}) {
  return (
    <tbody
      data-slot="table-body"
      className={cn("[&_tr:last-child]:border-0", className)}
      {...props} />
  );
}

function TableFooter({
  className,
  ...props
}) {
  return (
    <tfoot
      data-slot="table-footer"
      className={cn("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0", className)}
      {...props} />
  );
}

function TableRow({
  className,
  ...props
}) {
  return (
    <tr
      data-slot="table-row"
      className={cn(
        "hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",
        className
      )}
      {...props} />
  );
}

function TableHead({
  className,
  ...props
}) {
  return (
    <th
      data-slot="table-head"
      className={cn(
        "text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className
      )}
      {...props} />
  );
}

function TableCell({
  className,
  ...props
}) {
  return (
    <td
      data-slot="table-cell"
      className={cn(
        "p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className
      )}
      {...props} />
  );
}

function TableCaption({
  className,
  ...props
}) {
  return (
    <caption
      data-slot="table-caption"
      className={cn("text-muted-foreground mt-4 text-sm", className)}
      {...props} />
  );
}

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}


============================================================
FILE: components/ui/tabs.jsx
============================================================
"use client"

import * as React from "react"
import * as TabsPrimitive from "@radix-ui/react-tabs"

import { cn } from "@/lib/utils"

function Tabs({
  className,
  ...props
}) {
  return (
    <TabsPrimitive.Root
      data-slot="tabs"
      className={cn("flex flex-col gap-2", className)}
      {...props} />
  );
}

function TabsList({
  className,
  ...props
}) {
  return (
    <TabsPrimitive.List
      data-slot="tabs-list"
      className={cn(
        "bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",
        className
      )}
      {...props} />
  );
}

function TabsTrigger({
  className,
  ...props
}) {
  return (
    <TabsPrimitive.Trigger
      data-slot="tabs-trigger"
      className={cn(
        "data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props} />
  );
}

function TabsContent({
  className,
  ...props
}) {
  return (
    <TabsPrimitive.Content
      data-slot="tabs-content"
      className={cn("flex-1 outline-none", className)}
      {...props} />
  );
}

export { Tabs, TabsList, TabsTrigger, TabsContent }


============================================================
FILE: components/ui/textarea.jsx
============================================================
import * as React from "react"

import { cn } from "@/lib/utils"

function Textarea({
  className,
  ...props
}) {
  return (
    <textarea
      data-slot="textarea"
      className={cn(
        "border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        className
      )}
      {...props} />
  );
}

export { Textarea }


============================================================
FILE: components/ui/tooltip.jsx
============================================================
"use client"

import * as React from "react"
import * as TooltipPrimitive from "@radix-ui/react-tooltip"

import { cn } from "@/lib/utils"

function TooltipProvider({
  delayDuration = 0,
  ...props
}) {
  return (<TooltipPrimitive.Provider data-slot="tooltip-provider" delayDuration={delayDuration} {...props} />);
}

function Tooltip({
  ...props
}) {
  return (
    <TooltipProvider>
      <TooltipPrimitive.Root data-slot="tooltip" {...props} />
    </TooltipProvider>
  );
}

function TooltipTrigger({
  ...props
}) {
  return <TooltipPrimitive.Trigger data-slot="tooltip-trigger" {...props} />;
}

function TooltipContent({
  className,
  sideOffset = 0,
  children,
  ...props
}) {
  return (
    <TooltipPrimitive.Portal>
      <TooltipPrimitive.Content
        data-slot="tooltip-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",
          className
        )}
        {...props}>
        {children}
        <TooltipPrimitive.Arrow
          className="bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]" />
      </TooltipPrimitive.Content>
    </TooltipPrimitive.Portal>
  );
}

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }


============================================================
FILE: hooks/useAuth.js
============================================================
import { forgotPassword, resetPassword, signin, signup } from "@/requests/auth";
import { useMutation } from "@tanstack/react-query";
import { useRouter } from "next/navigation";
import { toast } from "sonner";

export function useSignIn() {
  return useMutation({
    mutationFn: signin,
    onSuccess: () => {
      toast.success("You gain access to dashboard!");
    },
    onError: (err) => {
      toast.error(err.message || "Failed to sign in");
    },
  });
}

export function useForgotPassword() {
  const router = useRouter();
  return useMutation({
    mutationFn: forgotPassword,
    onSuccess: () => {
      toast.success("Password reset link sent! Check your email.");
      router.push("/signin");
    },
    onError: (err) => {
      toast.error(err.message || "Failed to send reset link");
    },
  });
}

export function useResetPassword() {
  const router = useRouter();
  return useMutation({
    mutationFn: resetPassword,
    onSuccess: () => {
      toast.success("Password reset successfully! Please sign in.");
      router.push("/signin");
    },
    onError: (err) => {
      toast.error(err.message || "Failed to reset password");
    },
  });
}

export function useSignUp() {
  const router = useRouter();
  return useMutation({
    mutationFn: signup,
    onSuccess: () => {
      toast.success("Account created!", {
        description:
          "Please check your email to verify your account before signing in.",
      });
      router.push("/signin");
    },
    onError: (err) => {
      toast.error(err.message || "Failed to sign up");
    },
  });
}


============================================================
FILE: hooks/useCourses.js
============================================================
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { usePermissions } from "@/hooks/usePermissions";
import {
  getCourses,
  getCourse,
  createCourse,
  updateCourse,
  removeCourse,
} from "@/requests/courses";
import { toast } from "sonner";

export function useCourses() {
  return useQuery({
    queryKey: ["courses"],
    queryFn: getCourses,
    onError: (error) => toast.error(error.message),
  });
}

export function useCourse(id) {
  return useQuery({
    queryKey: ["courses", id],
    queryFn: () => getCourse(id),
    enabled: !!id,
    onError: (error) => toast.error(error.message),
  });
}

export function useUpsertCourse(mode = "edit") {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  const isEdit = mode === "edit";
  return useMutation({
    mutationFn: isEdit
      ? ({ id, data }) => updateCourse(id, data)
      : (data) => createCourse(data),
    onMutate: () => {
      if (!isEdit && !permissions.canCreateCourse) {
        throw new Error("You don't have permission to create courses");
      }
      if (isEdit && !permissions.canUpdateCourse) {
        throw new Error("You don't have permission to edit courses");
      }
    },
    onSuccess: () => {
      queryClient.invalidateQueries(["courses"]);
      toast.success(
        isEdit ? "Course updated successfully" : "Course created successfully"
      );
    },
    onError: (error) => {
      toast.error(
        error.message ||
          (isEdit ? "Failed to update course" : "Failed to create course")
      );
    },
  });
}
export function useDeleteCourse() {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: removeCourse,
    onSuccess: () => {
      queryClient.invalidateQueries(["courses"]);
      toast.success("Course deleted successfully");
    },
    onError: (error) => {
      toast.error(error.message || "Failed to delete course");
    },
    onMutate: () => {
      if (!permissions.canDeleteCourse) {
        throw new Error("You don't have permission to delete courses");
      }
    },
  });
}


============================================================
FILE: hooks/useMessages.js
============================================================
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { usePermissions } from "@/hooks/usePermissions";
import {
  getMessages,
  getMessage,
  createMessage,
  removeMessage,
} from "@/requests/messages";
import { toast } from "sonner";

export function useMessages() {
  const { permissions } = usePermissions();
  return useQuery({
    queryKey: ["messages"],
    queryFn: getMessages,
    enabled: permissions.canReadMessage,
    onError: (error) => toast.error(error.message),
  });
}

export function useMessage(id) {
  const { permissions } = usePermissions();
  return useQuery({
    queryKey: ["messages", id],
    queryFn: () => getMessage(id),
    enabled: !!id && permissions.canReadMessage,
    onError: (error) => toast.error(error.message),
  });
}

export function useCreateMessage() {
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: createMessage,
    onSuccess: () => {
      queryClient.invalidateQueries(["messages"]);
      toast.success("Message sent successfully");
    },
    onError: (error) => {
      toast.error(error.message || "Failed to send message");
    },
  });
}

export function useDeleteMessage() {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: removeMessage,
    onSuccess: () => {
      queryClient.invalidateQueries(["messages"]);
      toast.success("Message deleted successfully");
    },
    onError: (error) => {
      toast.error(error.message || "Failed to delete message");
    },
    onMutate: () => {
      if (!permissions.canDeleteMessage) {
        throw new Error("You don't have permission to delete messages");
      }
    },
  });
}


============================================================
FILE: hooks/usePermissions.js
============================================================
// hooks/usePermissions.ts
import { authClient } from "@/lib/auth-client";
import { useMemo } from "react";

export function usePermissions() {
  const { data: session, isPending } = authClient.useSession();

  const permissions = useMemo(() => {
    if (!session?.user) {
      return {
        canViewDashboard: false,
        canEditProfile: false,
        canChangePassword: false,
        isAdmin: false,
        canCreateProject: false,
        canReadProject: false,
        canUpdateProject: false,
        canDeleteProject: false,
        canCreateCourse: false,
        canReadCourse: false,
        canUpdateCourse: false,
        canDeleteCourse: false,
        canCreateUniversity: false,
        canReadUniversity: false,
        canUpdateUniversity: false,
        canDeleteUniversity: false,
        canCreateMessage: false,
        canReadMessage: false,
        canDeleteMessage: false,
        canManageUsers: false,
        canCreateUser: false,
        canListUsers: false,
        canBanUser: false,
        canImpersonateUser: false,
        canDeleteUser: false,
        canSetUserPassword: false,
        canSetUserRole: false,
        canListSessions: false,
        canRevokeSessions: false,
        canDeleteSessions: false,
      };
    }
    const role = session.user.role || "user";
    const can = (resource, actions) => {
      return authClient.admin.checkRolePermission({
        role,
        permissions: { [resource]: actions },
      });
    };
    return {
      isAuthenticated: !!session,
      isAdmin: role === "admin",
      canCreateProject: can("project", ["create"]),
      canUpdateProject: can("project", ["update"]),
      canDeleteProject: can("project", ["delete"]),
      canCreateCourse: can("course", ["create"]),
      canUpdateCourse: can("course", ["update"]),
      canDeleteCourse: can("course", ["delete"]),
      canCreateUniversity: can("university", ["create"]),
      canUpdateUniversity: can("university", ["update"]),
      canDeleteUniversity: can("university", ["delete"]),
      canReadMessage: can("message", ["read"]),
      canDeleteMessage: can("message", ["delete"]),
      canCreateUser: can("user", ["create"]),
      canListUsers: can("user", ["list"]),
      canBanUser: can("user", ["ban"]),
      canDeleteUser: can("user", ["delete"]),
      canSetUserPassword: can("user", ["set-password"]),
      canSetUserRole: can("user", ["set-role"]),
    };
  }, [session]);

  return {
    permissions,
    session,
    isPending,
    user: session?.user,
  };
}


============================================================
FILE: hooks/useProjects.js
============================================================
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { usePermissions } from "@/hooks/usePermissions";
import {
  getProjects,
  getProject,
  createProject,
  updateProject,
  removeProject,
} from "@/requests/projects";
import { toast } from "sonner";

export function useProjects() {
  const { permissions } = usePermissions();
  return useQuery({
    queryKey: ["projects"],
    queryFn: getProjects,
    onError: (error) => toast.error(error.message),
  });
}

export function useProject(id) {
  return useQuery({
    queryKey: ["projects", id],
    queryFn: () => getProject(id),
    enabled: !!id,
    onError: (error) => toast.error(error.message),
  });
}

export function useUpsertProject(mode = "edit") {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  const isEdit = mode === "edit";
  return useMutation({
    mutationFn: isEdit
      ? ({ id, data }) => updateProject(id, data)
      : (data) => createProject(data),
    onMutate: () => {
      if (!isEdit && !permissions.canCreateProject) {
        throw new Error("You don't have permission to create projects");
      }
      if (isEdit && !permissions.canUpdateProject) {
        throw new Error("You don't have permission to edit projects");
      }
    },
    onSuccess: () => {
      queryClient.invalidateQueries(["projects"]);
      toast.success(
        isEdit ? "Project updated successfully" : "Project created successfully"
      );
    },
    onError: (error) => {
      toast.error(
        error.message ||
          (isEdit ? "Failed to update project" : "Failed to create project")
      );
    },
  });
}

export function useDeleteProject() {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: removeProject,
    onSuccess: () => {
      queryClient.invalidateQueries(["projects"]);
      toast.success("Project deleted successfully");
    },
    onError: (error) => {
      toast.error(error.message || "Failed to delete project");
    },
    onMutate: () => {
      if (!permissions.canDeleteProject) {
        throw new Error("You don't have permission to delete projects");
      }
    },
  });
}


============================================================
FILE: hooks/useUniversities.js
============================================================
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { usePermissions } from "@/hooks/usePermissions";
import {
  getUniversities,
  getUniversity,
  createUniversity,
  updateUniversity,
  removeUniversity,
} from "@/requests/universities";
import { toast } from "sonner";

export function useUniversities() {
  return useQuery({
    queryKey: ["universities"],
    queryFn: getUniversities,
    onError: (error) => toast.error(error.message),
  });
}

export function useUniversity(id) {
  return useQuery({
    queryKey: ["universities", id],
    queryFn: () => getUniversity(id),
    enabled: !!id,
    onError: (error) => toast.error(error.message),
  });
}

export function useUpsertUniversity(mode = "edit") {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  const isEdit = mode === "edit";
  return useMutation({
    mutationFn: isEdit
      ? ({ id, data }) => updateUniversity(id, data)
      : (data) => createUniversity(data),
    onMutate: () => {
      if (!isEdit && !permissions.canCreateUniversity) {
        throw new Error("You don't have permission to create universities");
      }
      if (isEdit && !permissions.canUpdateUniversity) {
        throw new Error("You don't have permission to edit universities");
      }
    },
    onSuccess: () => {
      queryClient.invalidateQueries(["universities"]);
      toast.success(
        isEdit
          ? "University updated successfully"
          : "University created successfully"
      );
    },
    onError: (error) => {
      toast.error(
        error.message ||
          (isEdit
            ? "Failed to update university"
            : "Failed to create university")
      );
    },
  });
}
export function useDeleteUniversity() {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: removeUniversity,
    onSuccess: () => {
      queryClient.invalidateQueries(["universities"]);
      toast.success("University deleted successfully");
    },
    onError: (error) => {
      toast.error(error.message || "Failed to delete university");
    },
    onMutate: () => {
      if (!permissions.canDeleteUniversity) {
        throw new Error("You don't have permission to delete universities");
      }
    },
  });
}


============================================================
FILE: hooks/useUsers.js
============================================================
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { usePermissions } from "@/hooks/usePermissions";
import {
  getUsers,
  createUser,
  updateUserRole,
  banUser,
  unbanUser,
  removeUser,
  changePassword,
} from "@/requests/users";
import { toast } from "sonner";
import { useRouter } from "next/navigation";

export function useUsers(searchQuery = "") {
  const { permissions } = usePermissions();
  return useQuery({
    queryKey: ["users", searchQuery],
    queryFn: () => getUsers(searchQuery),
    enabled: permissions.canListUsers,
    onError: (error) => toast.error(error.message),
  });
}

export function useCreateUser() {
  const router = useRouter();
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: createUser,
    onSuccess: () => {
      queryClient.invalidateQueries(["users"]);
      toast.success("User created successfully");
      router.back();
    },
    onError: (error) => {
      toast.error(error.message || "Failed to create user");
    },
    onMutate: () => {
      if (!permissions.canCreateUser) {
        throw new Error("You don't have permission to create users");
      }
    },
  });
}

export function useUpdateUserRole() {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: updateUserRole,
    onSuccess: () => {
      queryClient.invalidateQueries(["users"]);
      toast.success("User role updated successfully");
    },
    onError: (error) => {
      toast.error(error.message || "Failed to update user role");
    },
    onMutate: () => {
      if (!permissions.canSetUserRole) {
        throw new Error("You don't have permission to update user roles");
      }
    },
  });
}

export function useBanUser() {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: banUser,
    onSuccess: () => {
      queryClient.invalidateQueries(["users"]);
      toast.success("User banned successfully");
    },
    onError: (error) => {
      toast.error(error.message || "Failed to ban user");
    },
    onMutate: () => {
      if (!permissions.canBanUser) {
        throw new Error("You don't have permission to ban users");
      }
    },
  });
}

export function useUnbanUser() {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: unbanUser,
    onSuccess: () => {
      queryClient.invalidateQueries(["users"]);
      toast.success("User unbanned successfully");
    },
    onError: (error) => {
      toast.error(error.message || "Failed to unban user");
    },
    onMutate: () => {
      if (!permissions.canBanUser) {
        throw new Error("You don't have permission to unban users");
      }
    },
  });
}

export function useRemoveUser() {
  const { permissions } = usePermissions();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: removeUser,
    onSuccess: () => {
      queryClient.invalidateQueries(["users"]);
      toast.success("User removed successfully");
    },
    onError: (error) => {
      toast.error(error.message || "Failed to remove user");
    },
    onMutate: () => {
      if (!permissions.canDeleteUser) {
        throw new Error("You don't have permission to remove users");
      }
    },
  });
}
export function useChangePassword() {
  const { permissions } = usePermissions();
  return useMutation({
    mutationFn: changePassword,
    onSuccess: () => {
      toast.success("Password changed successfully", {
        description: "All other sessions have been logged out for security.",
      });
    },
    onError: (error) => {
      toast.error(error.message || "Failed to changed password");
    },
    onMutate: () => {
      if (!permissions.isAuthenticated) {
        throw new Error("You don't have permission to change password");
      }
    },
  });
}


============================================================
FILE: requests/auth.js
============================================================
import { authClient } from "@/lib/auth-client";

export const forgotPassword = async (email) => {
  const { data, error } = await authClient.requestPasswordReset({
    email,
    redirectTo: `${process.env.NEXT_PUBLIC_LOCAL_CLIENT}/reset-password`,
  });
  if (error)
    throw new Error(error.message || "Failed to send password reset email");
  return data;
};

export const resetPassword = async ({ password, token }) => {
  const { data, error } = await authClient.resetPassword({
    newPassword: password,
    token,
  });
  if (error) throw new Error(error.message || "Failed to reset password");
  return data;
};

export const signin = async (payload) => {
  const { data, error } = await authClient.signIn.email({
    ...payload,
    callbackURL: `${process.env.NEXT_PUBLIC_LOCAL_CLIENT}/dashboard`,
  });
  if (error) {
    let errorMessage = "Failed to sign in";
    if (error.status === 403) {
      if (error.code === "BANNED_USER") {
        errorMessage = error.message || "Your account has been banned";
      } else if (error.code === "EMAIL_NOT_VERIFIED") {
        errorMessage = "Please verify your email before signing in";
      } else {
        errorMessage = "Invalid email or password";
      }
    } else {
      errorMessage = error.message || errorMessage;
    }
    throw new Error(errorMessage);
  }
  return data;
};

export const signup = async (payload) => {
  const { data, error } = await authClient.signUp.email({
    ...payload,
    callbackURL: `${process.env.NEXT_PUBLIC_LOCAL_CLIENT}/signin`,
  });
  if (error) {
    let errorMessage = "Failed to create account";
    if (
      error.status === 422 &&
      error.code === "USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL"
    ) {
      errorMessage = "An account with this email already exists";
    } else {
      errorMessage = error.message || errorMessage;
    }
    throw new Error(errorMessage);
  }
  return data;
};


============================================================
FILE: requests/courses.js
============================================================
import apiClient from "@/lib/api-client";

export const getCourses = async () => {
  try {
    const { data } = await apiClient.get("/education/course");
    return data.contents;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to fetch courses");
  }
};

export const getCourse = async (id) => {
  try {
    const { data } = await apiClient.get(`/education/course/${id}`);
    return data.content;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to fetch course");
  }
};

export const createCourse = async (payload) => {
  try {
    const { data } = await apiClient.post("/education/course", payload);
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to create course");
  }
};

export const updateCourse = async (id, payload) => {
  try {
    const { data } = await apiClient.patch(`/education/course/${id}`, payload);
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to update course");
  }
};

export const removeCourse = async (id) => {
  try {
    const { data } = await apiClient.delete(`/education/course/${id}`);
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to delete course");
  }
};


============================================================
FILE: requests/messages.js
============================================================
import apiClient from "@/lib/api-client";

export const getMessages = async () => {
  try {
    const { data } = await apiClient.get("/message");
    return data.contents;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to fetch messages");
  }
};

export const getMessage = async (id) => {
  try {
    const { data } = await apiClient.get(`/message/${id}`);
    return data.content;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to fetch message");
  }
};

export const createMessage = async (payload) => {
  try {
    const { data } = await apiClient.post("/message", payload);
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to send message");
  }
};

export const removeMessage = async (id) => {
  try {
    const { data } = await apiClient.delete(`/message/${id}`);
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to delete message");
  }
};


============================================================
FILE: requests/projects.js
============================================================
import apiClient from "@/lib/api-client";

export const getProjects = async () => {
  try {
    const { data } = await apiClient.get("/project");
    return data.contents;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to fetch projects");
  }
};

export const getProject = async (id) => {
  try {
    const { data } = await apiClient.get(`/project/${id}`);
    return data.content;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to fetch project");
  }
};

export const createProject = async (payload) => {
  try {
    const { data } = await apiClient.post("/project", payload);
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to create project");
  }
};

export const updateProject = async (id, payload) => {
  try {
    const { data } = await apiClient.patch(`/project/${id}`, payload);
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to update project");
  }
};

export const removeProject = async (id) => {
  try {
    const { data } = await apiClient.delete(`/project/${id}`);
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to delete project");
  }
};


============================================================
FILE: requests/universities.js
============================================================
import apiClient from "@/lib/api-client";

export const getUniversities = async () => {
  try {
    const { data } = await apiClient.get("/education/university");
    return data.contents;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to fetch universities");
  }
};

export const getUniversity = async (id) => {
  try {
    const { data } = await apiClient.get(`/education/university/${id}`);
    return data.content;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to fetch university");
  }
};

export const createUniversity = async (payload) => {
  try {
    const { data } = await apiClient.post("/education/university", payload);
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to create university");
  }
};

export const updateUniversity = async (id, payload) => {
  try {
    const { data } = await apiClient.patch(
      `/education/university/${id}`,
      payload
    );
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to update university");
  }
};

export const removeUniversity = async (id) => {
  try {
    const { data } = await apiClient.delete(`/education/university/${id}`);
    return data;
  } catch (error) {
    throw new Error(error.response.data.msg || "Failed to delete university");
  }
};


============================================================
FILE: requests/users.js
============================================================
import { authClient } from "@/lib/auth-client";

export const getUsers = async (search = "") => {
  const { data, error } = await authClient.admin.listUsers({
    query: {
      limit: 100,
      offset: 0,
      searchValue: search,
      searchField: "email",
      searchOperator: "starts_with",
    },
  });
  if (error) throw new Error(error.message || "Failed to fetch users");
  return data.users;
};

export const createUser = async (payload) => {
  const { data, error } = await authClient.admin.createUser(payload);
  if (error) throw new Error(error.message || "Failed to create user");
  return data;
};

export const updateUserRole = async (payload) => {
  const { data, error } = await authClient.admin.setRole(payload);
  if (error) throw new Error(error.message || "Failed to update user role");
  return data;
};

export const banUser = async (payload) => {
  const { data, error } = await authClient.admin.banUser(payload);
  if (error) throw new Error(error.message || "Failed to ban user");
  return data;
};

export const unbanUser = async (userId) => {
  const { data, error } = await authClient.admin.unbanUser({ userId });
  if (error) throw new Error(error.message || "Failed to unban user");
  return data;
};

export const removeUser = async (userId) => {
  const { data, error } = await authClient.admin.removeUser({ userId });
  if (error) throw new Error(error.message || "Failed to remove user");
  return data;
};

export const changePassword = async (payload) => {
  const { data, error } = await authClient.changePassword(payload);
  if (error) {
    let errorMessage = "Failed to change password";
    if (error.status === 400) {
      if (error.code === "INVALID_PASSWORD") {
        errorMessage = "Please add your correct current password";
      }
    } else {
      errorMessage = error.message || errorMessage;
    }
    throw new Error(errorMessage);
  }
  return data;
};


============================================================
FILE: utils/formatDate.js
============================================================
export const formatDate = (dateString, extended = false) => {
  const date = new Date(dateString);
  return `${date.toLocaleString("en-US", {
    month: "long",
    day: "numeric",
    year: "numeric",
  })}${
    extended
      ? ` at ${date.toLocaleString("en-US", {
          hour: "2-digit",
          minute: "2-digit",
          hour12: true,
        })}`
      : ""
  }`;
};


============================================================
FILE: components.json
============================================================
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": false,
  "tailwind": {
    "config": "",
    "css": "app/globals.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "registries": {}
}


============================================================
FILE: jsconfig.json
============================================================
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./*"]
    }
  }
}


============================================================
FILE: next.config.mjs
============================================================
const nextConfig = {
  images: {
    remotePatterns: [
      {
        protocol: "https",
        hostname: "placehold.co",
        port: "",
        pathname: "/**",
      },
    ],
  },
};

export default nextConfig;


============================================================
FILE: package.json
============================================================
{
  "name": "dashboard-client",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev --turbopack",
    "build": "next build --turbopack",
    "start": "next start"
  },
  "dependencies": {
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-label": "^2.1.7",
    "@radix-ui/react-popover": "^1.1.15",
    "@radix-ui/react-select": "^2.2.6",
    "@radix-ui/react-separator": "^1.1.7",
    "@radix-ui/react-slot": "^1.2.4",
    "@radix-ui/react-tabs": "^1.1.13",
    "@radix-ui/react-tooltip": "^1.2.8",
    "@tanstack/react-query": "^5.90.2",
    "axios": "^1.12.2",
    "better-auth": "^1.3.27",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "date-fns": "^4.1.0",
    "formik": "^2.4.6",
    "lucide-react": "^0.548.0",
    "next": "15.5.4",
    "react": "19.1.0",
    "react-day-picker": "^9.11.1",
    "react-dom": "19.1.0",
    "sonner": "^2.0.7",
    "tailwind-merge": "^3.3.1",
    "yup": "^1.7.1"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "tailwindcss": "^4",
    "tw-animate-css": "^1.4.0"
  }
}


============================================================
FILE: postcss.config.mjs
============================================================
const config = {
  plugins: ["@tailwindcss/postcss"],
};

export default config;